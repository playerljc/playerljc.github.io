"use strict";(self.webpackChunk_ctsj_build=self.webpackChunk_ctsj_build||[]).push([[8405],{38405:(e,t,n)=>{n.d(t,{A:()=>p});var l=n(78127),r=n(26322),a=n(7429),i=n(72687),s=n(99815),o=n(2529),c=n(17242),u=n(52876),h=n(32115),d=n(54148);const f="adm-pull-to-refresh",m={pullingText:"下拉刷新",canReleaseText:"释放立即刷新",refreshingText:"加载中...",completeText:"刷新成功",completeDelay:500,disabled:!1,onRefresh:()=>{}},p=e=>{var t,n;const{locale:p}=(0,d.UK)(),v=(0,a.v)(m,{refreshingText:`${p.common.loading}...`,pullingText:p.PullToRefresh.pulling,canReleaseText:p.PullToRefresh.canRelease,completeText:p.PullToRefresh.complete},e),g=null!==(t=v.headHeight)&&void 0!==t?t:(0,u.k)(40),T=null!==(n=v.threshold)&&void 0!==n?n:(0,u.k)(60),[x,R]=(0,r.useState)("pulling"),[b,y]=(0,i.useSpring)((()=>({from:{height:0},config:{tension:300,friction:30,round:!0,clamp:!0}}))),k=(0,r.useRef)(null),E=(0,r.useRef)(!1);(0,r.useEffect)((()=>{var e;null===(e=k.current)||void 0===e||e.addEventListener("touchmove",(()=>{}))}),[]);const w=()=>new Promise((e=>{y.start({to:{height:0},onResolve(){R("pulling"),e()}})}));function P(){return(0,l.sH)(this,void 0,void 0,(function*(){y.start({height:g}),R("refreshing");try{yield v.onRefresh(),R("complete")}catch(e){throw w(),e}var e;v.completeDelay>0&&(yield(e=v.completeDelay,new Promise((t=>setTimeout(t,e))))),w()}))}(0,s.useDrag)((e=>{if("refreshing"===x||"complete"===x)return;const{event:t}=e;if(e.last)return E.current=!1,void("canRelease"===x?P():y.start({height:0}));const[,n]=e.movement,l=Math.ceil(n);if(e.first&&l>0){const t=e.event.target;if(!(t&&t instanceof Element))return;let n=(0,o.m)(t);for(;;){if(!n)return;if(("scrollTop"in(r=n)?r.scrollTop:r.scrollY)>0)return;if(n instanceof Window)break;n=(0,o.m)(n.parentNode)}E.current=!0}var r;if(!E.current)return;t.cancelable&&t.preventDefault(),t.stopPropagation();const a=Math.max((0,h.B)(l,0,0,5*g,.5),0);y.start({height:a}),R(a>T?"canRelease":"pulling")}),{pointer:{touch:!0},axis:"y",target:k,enabled:!v.disabled,eventOptions:c.C?{passive:!1}:void 0});return r.createElement(i.animated.div,{ref:k,className:f},r.createElement(i.animated.div,{style:b,className:`${f}-head`},r.createElement("div",{className:`${f}-head-content`,style:{height:g}},(()=>{var e;return v.renderText?null===(e=v.renderText)||void 0===e?void 0:e.call(v,x):"pulling"===x?v.pullingText:"canRelease"===x?v.canReleaseText:"refreshing"===x?v.refreshingText:"complete"===x?v.completeText:void 0})())),r.createElement("div",{className:`${f}-content`},v.children))}}}]);