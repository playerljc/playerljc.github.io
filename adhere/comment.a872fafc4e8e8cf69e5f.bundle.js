"use strict";(self.webpackChunk_ctsj_build=self.webpackChunk_ctsj_build||[]).push([[4570],{50841:function(e,t){t.Z={ScrollWrap:"YQCLST4ChPnECAvcp9Z6",Scroll:"gHKU4PFDvuKn7sdNEUlw"}},374204:function(e,t,n){var r=n(801821),a=n.n(r),l=n(690171),o=n(458860),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i="adhere-ui-backtopanimation",u=function(e){var t,n=e.className,r=e.style,u=void 0===(t=e.zIndex)?o.Z.Dict.value.ResourceNormalMaxZIndex.value:t,s=e.getContainer,d=e.onScrollTop,m=void 0===(t=e.duration)?300:t,p=(0,l.useRef)(null),f=(0,l.useRef)(null),y=(0,l.useRef)(!1);function v(){return"updateInterval"in screen?screen.updateInterval:16.7}return(0,l.useLayoutEffect)((function(){f.current=document.body.querySelector(".".concat(i,"-mask")),f.current||(f.current=document.createElement("div"),f.current.className="".concat(i,"-mask"),f.current.style.zIndex="".concat(u),document.body.appendChild(f.current))}),[]),(0,l.useLayoutEffect)((function(){var e=s();function t(){0!==e.scrollTop?p.current.style.display="block":p.current.style.display="none"}return e.addEventListener("scroll",t),function(){return e.removeEventListener("scroll",t)}})),l.createElement("div",{ref:p,className:a()(i,null!=n?n:""),style:c({zIndex:u},null!=r?r:{}),onClick:function(){y.current||e.onTrigger&&e.onTrigger().then((function(){y.current=!0,f.current.style.display="block";var e=s(),t=e.scrollTop,n=t,r=e.scrollHeight/(m/v()+(m%v()!=0?1:0));"undefined"!=typeof window&&window.requestAnimationFrame((function a(){function l(){f.current.style.display="none",y.current=!1}t<0?0<n+r?n=0:n+=r:n-r<0?n=0:n-=r,e.scrollTop=n,d&&d(n),t<0?0<=n?l():"undefined"!=typeof window&&window.requestAnimationFrame(a):n<=0?l():"undefined"!=typeof window&&window.requestAnimationFrame(a)}))}))}})};t.Z=(0,l.memo)(u)},629361:function(e,t,n){var r=n(374204);t.Z=r.Z},391782:function(e,t,n){var r=n(690171),a=n(310143),l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},o=function(e){return r.createElement(a.Z,l({},e,{isReply:!1}),(function(t){var n;return null==(n=null==e?void 0:e.children)?void 0:n.call(e,t)}))};t.Z=(0,r.memo)(o)},626900:function(e,t,n){var r=n(102971),a=n(690171),l=n(519344),o=n(241887),c=n(648316),i=n(519473),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},s=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,l=t.length;a<l;a++)!r&&a in t||((r=r||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},d=o.Z.VerticalFlexLayout,m="adhere-ui-comment-list-standard",p=function(e){var t=void 0===(p=e.limit)?10:p,n=void 0===(p=e.dataKeys)?{current:"current",totalPage:"totalPage",list:"list",totalCount:"totalCount"}:p,o=void 0===(p=e.listProps)?{}:p,p=void 0===(p=e.flexLayoutProps)?{}:p,f=e.renderFirstLoading,y=void 0===(Z=e.renderEmpty)?function(){return a.createElement(r.Z,null)}:Z,v=e.renderList,h=e.getScrollWrapContainer,E=(0,a.useRef)({page:1,limit:t}),g=(0,a.useRef)(),C=(0,a.useRef)(c.Z.NORMAL),Z=(0,a.useRef)(null),R=(T=(0,a.useState)(((T={})[n.current]=1,T[n.totalPage]=0,T[n.list]=[],T[n.totalCount]=0,T)))[0],P=T[1],k=(T=(0,a.useState)(!0))[0],b=T[1];function N(t){var n;return null==(n=null==e?void 0:e.fetchData)?void 0:n.call(e,null==E?void 0:E.current).then((function(e){return t(e),b(!1),e})).catch((function(e){var t;return b(!1),g.current&&(C.current=c.Z.ERROR,null!=(t=null==g?void 0:g.current))&&t.call(g,C.current),e}))}var x=(0,a.useCallback)((function(e){C.current===c.Z.EMPTY?(C.current=c.Z.EMPTY,e(c.Z.EMPTY)):(g.current=e,setTimeout((function(){return b(!0),E.current.page=E.current.page+1,e=n.list,N((function(t){P((function(r){var a;return u(u({},t),((a={})[n.list]=s(s([],r[e],!0),t[e],!0),a))}))}));var e}),100))}),[]),w=(0,a.useCallback)((function(){return 1===E.current.page&&0===R[n.list].length}),[R,n,E.current.page]),T=(0,a.useMemo)((function(){return a.createElement(i.Z,u({getScrollWrapContainer:h,isLoading:k,hasMore:R[n.list].length<=R[n.totalCount],onLoadMore:x,renderFirstLoading:f},null!=o?o:{}),a.createElement(l.Z,{conditional:!w(),noMatch:function(){return y()}},(function(){return null==v?void 0:v(R)})))}),[h,k,R,n.totalCount,n.list,f,o,y]);return(0,a.useEffect)((function(){b(!0),E.current={page:1,limit:t},N((function(e){P(e)}))}),[]),(0,a.useLayoutEffect)((function(){g.current&&(C.current=E.current.page<R[n.totalPage]?c.Z.NORMAL:c.Z.EMPTY,null!=g)&&g.current(C.current)}),[R]),a.createElement(d,u({},null!=p?p:{},{className:"".concat(m),renderMain:a.createElement("div",{className:"".concat(m,"-auto"),ref:Z},T)}))};t.Z=(0,a.memo)(p)},519473:function(e,t,n){var r=n(595209),a=n(801821),l=n.n(a),o=n(690171),c=n(847850),i=n(629361),u=n(519344),s=n(648316),d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},m="adhere-ui-comment-inner-list",p=function(e){var t,n=void 0===(n=e.className)?"":n,a=void 0===(a=e.style)?{}:a,p=void 0!==(t=e.isLoading)&&t,f=void 0!==(t=e.hasMore)&&t,y=e.onLoadMore,v=void 0===(t=e.scrollLoadProps)?{}:t,h=e.renderFirstLoading,E=e.getScrollWrapContainer,g=e.children,C=(0,o.useRef)(!0),Z=(0,o.useRef)(!1),R=(0,o.useRef)(null);return o.createElement("div",{className:l()(m,null!=n?n:""),style:null!=a?a:{},ref:R},function(){var e,t=p;if(C.current&&!Z.current&&t&&(Z.current=!0),C.current&&Z.current&&!t&&(C.current=!1,Z.current=!1),C.current){if(h)return h();for(var n=[],a=0;a<7;a++)n.push(o.createElement(r.Z,{key:a+1,loading:!0,avatar:!0}));return o.createElement("div",{className:"".concat(m,"-first-loading-wrap")},n)}return e={getScrollContainer:function(){var e;return null==(e=null==E?void 0:E())?void 0:e.firstElementChild},onScrollBottom:y},o.createElement(u.Z,{conditional:f},(function(){return o.createElement("div",{className:"".concat(m,"-normal-wrap")},o.createElement(s.Z,d({},e,null!=v?v:{},{distance:(null==v?void 0:v.distance)||50}),g),o.createElement(u.Z,{conditional:!(!E||!E()),noMatch:function(){return o.createElement(i.Z,{getContainer:function(){var e,t;return null==(t=null==(e=null==R?void 0:R.current)?void 0:e.querySelector)?void 0:t.call(e,".adhere-ui-scrollload")},onTrigger:function(){return Promise.resolve()}})}},(function(){return c.createPortal(o.createElement(i.Z,{getContainer:function(){var e;return null==(e=null==E?void 0:E())?void 0:e.firstElementChild},onTrigger:function(){return Promise.resolve()}}),null==E?void 0:E())})))}))}())};t.Z=(0,o.memo)(p)},110107:function(e,t,n){var r=n(489433),a=n(39219),l=n(373994),o=n(179984),c=n(988081),i=n(690171),u=n(355360),s=n(603262),d=n(391782),m=n(626900),p="adhere-ui-comment",f=function(e){var t=e.listProps,n=void 0===(n=e.commentDataKeys)?{current:"current",totalPage:"totalPage",list:"list",totalCount:"totalCount"}:n,f=void 0===(f=e.commentLimit)?10:f,y=e.flexLayoutProps,v=e.getScrollWrapContainer,h=void 0===(R=e.commentKeyProp)?"id":R,E=void 0===(R=e.replyDataKeys)?{current:"current",totalPage:"totalPage",list:"list",totalCount:"totalCount"}:R,g=void 0===(R=e.replyLimit)?10:R,C=void 0===(R=e.replyKeyProp)?"id":R,Z=void 0===(R=e.isMoreProp)?"isMore":R,R=e.fetchCommentData,P=e.fetchReplyData,k=e.fetchReply,b=e.renderEmpty,N=e.renderFirstLoading,x=e.renderCommentActions,w=e.renderCommentAuthor,T=e.renderCommentAvatar,L=e.renderCommentContent,M=e.renderCommentDateTime,S=e.renderCommentLoading,A=e.renderReplyActions,F=e.renderReplyAuthor,O=e.renderReplyAvatar,j=e.renderReplyContent,D=e.renderReplyDateTime,V=e.renderReplyLoading,I=void 0===(_=e.showReplyText)?u.ZP.v("显示回复内容"):_,K=void 0===(_=e.hideReplyText)?u.ZP.v("收起回复"):_,z=void 0===(_=e.loadMoreReplyText)?u.ZP.v("加载更多回复"):_,W=void 0===(_=e.showReplyTextIcon)?i.createElement(c.Z,null):_,q=void 0===(_=e.hideReplyTextIcon)?i.createElement(o.Z,null):_,B=void 0===(_=e.loadMoreCollapseTextIcon)?i.createElement(l.Z,{className:"reply-icon"}):_,H=void 0===(_=e.local)?"zh":_,Y=e.emojiPickerProps,_=(0,i.useCallback)((function(e){var t;return i.createElement("ul",{className:"".concat(p,"-list")},null==(t=null==(e=null==e?void 0:e.list)?void 0:e.map)?void 0:t.call(e,(function(e){return i.createElement("li",{className:"".concat(p,"-list-item"),key:e[h]},i.createElement(d.Z,{data:e,dataKeys:E,limit:g,keyProp:C,isMoreProp:Z,fetchData:P,fetchReply:k,renderActions:x,renderAuthor:w,renderAvatar:T,renderContent:L,renderDateTime:M,renderLoading:S||G,showReplyText:I,hideReplyText:K,loadMoreReplyText:z,showReplyTextIcon:W,hideReplyTextIcon:q,loadMoreCollapseTextIcon:B,local:H,emojiPickerProps:Y},(function(e){return i.createElement(s.Z,{data:e,dataKeys:E,limit:g,keyProp:C,isMoreProp:Z,fetchData:P,fetchReply:k,renderActions:A,renderAuthor:F,renderAvatar:O,renderContent:j,renderDateTime:D,renderLoading:V||G,showReplyText:I,hideReplyText:K,loadMoreReplyText:z,showReplyTextIcon:W,hideReplyTextIcon:q,loadMoreCollapseTextIcon:B,local:H,emojiPickerProps:Y})})))})))}),[E,g,C,Z,P,k,x,w,T,L,D,S,I,K,z,W,q,B,H,Y,j,O,F,A]),G=(0,i.useCallback)((function(){return i.createElement("div",{className:"".concat(p,"-loading")},i.createElement(a.Z,{indicator:i.createElement(r.Z,{style:{fontSize:24}})}))}),[]);return i.createElement(m.Z,{getScrollWrapContainer:v,listProps:t,dataKeys:n,limit:f,renderList:_,renderLoading:G,fetchData:R,renderEmpty:b,renderFirstLoading:N,flexLayoutProps:y})};t.Z=(0,i.memo)(f)},310143:function(e,t,n){var r=n(801821),a=n.n(r),l=n(690171),o=n(519344),c=n(241887),i=n(460467),u=n(355360),s=n(603262),d=n(431786),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},p=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,l=t.length;a<l;a++)!r&&a in t||((r=r||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},f="adhere-ui-comment-node",y=function(e){var t=void 0!==(t=e.isReply)&&t,n=void 0===(q=e.dataKeys)?{current:"current",totalPage:"totalPage",list:"list",totalCount:"totalCount"}:q,r=void 0===(q=e.limit)?10:q,y=e.keyProp,v=e.children,h=e.isMoreProp,E=e.renderAuthor,g=e.renderAvatar,C=e.renderContent,Z=e.renderDateTime,R=e.renderLoading,P=e.showReplyText,k=e.hideReplyText,b=e.loadMoreReplyText,N=e.showReplyTextIcon,x=e.loadMoreCollapseTextIcon,w=e.hideReplyTextIcon,T=e.fetchReply,L=e.emojiPickerProps,M=void 0===(q=e.local)?"zh":q,S=(q=(0,l.useState)(((q={})[n.current]=1,q[n.list]=[],q[n.totalCount]=0,q[n.totalPage]=0,q)))[0],A=q[1],F=(q=(0,l.useState)(null==e?void 0:e.data))[0],O=q[1],j=(q=(0,l.useState)(!1))[0],D=q[1],V=(q=(0,l.useState)(!1))[0],I=q[1],K=(q=(0,l.useState)(!1))[0],z=q[1],W=(0,l.useRef)({page:1,limit:r}),q=(0,l.useCallback)((function(){var t=p([],((null==(t=null==e?void 0:e.renderActions)?void 0:t.call(e,m({},F),(function(e){return O(e)})))||[]).map((function(e,t){var n;return o.Z.conditionalRender({conditional:!(null!=(n=null==(n=null==e?void 0:e.props)?void 0:n.className)&&n.endsWith("-actions-action")),noMatch:e,match:l.createElement("li",{key:t,className:"".concat(f,"-actions-action")},e)})})),!0);return t.find((function(e){return"reply"===(null==(e=null==(e=null==e?void 0:e.props)?void 0:e.children)?void 0:e.key)}))||t.push(l.createElement("li",{key:"reply",className:a()("".concat(f,"-actions-action"),"".concat(f,"-actions-action-reply-btn")),onClick:function(){return z(!0)}},u.ZP.v("回复"))),t}),[null==e?void 0:e.renderActions,F,K]),B=(0,l.useCallback)((function(){var t,c;return l.createElement("ul",{className:"".concat(f,"-children")},null==(c=null===(t=S[n.list]||[])?void 0:t.map)?void 0:c.call(t,(function(t){return l.createElement("li",{className:"".concat(f,"-children-item"),key:t[y]},l.createElement(o.Z,{conditional:!v,noMatch:function(){return null==v?void 0:v(t)}},(function(){return l.createElement(s.Z,{isReply:!0,data:t,dataKeys:n,limit:r,keyProp:y,isMoreProp:h,fetchData:null==e?void 0:e.fetchData,fetchReply:null==e?void 0:e.fetchReply,renderActions:null==e?void 0:e.renderActions,renderAuthor:E,renderAvatar:g,renderContent:C,renderDateTime:Z,renderLoading:R,showReplyText:P,hideReplyText:k,loadMoreReplyText:b,showReplyTextIcon:N,hideReplyTextIcon:w,loadMoreCollapseTextIcon:x,local:M,emojiPickerProps:L})})))})),l.createElement(o.Z,{conditional:!V&&Y()},(function(){return l.createElement("li",{className:a()("".concat(f,"-children-item"),"more")},l.createElement("a",{onClick:$},l.createElement("span",null,l.createElement(o.Z,{conditional:i.Z.isFunction(x),noMatch:function(){return x}},(function(){return x instanceof Function?x():x}))),l.createElement("span",null,l.createElement(o.Z,{conditional:i.Z.isFunction(b),noMatch:function(){return b}},(function(){return b instanceof Function?b():b})))))})))}),[S,n.list,y,h,q,E,g,C,Z,R,P,k,b,N,w,x,V]),H=(0,l.useCallback)((function(){return l.createElement(o.Z,{conditional:!j,noMatch:function(){return l.createElement("a",{className:"".concat(f,"-collapse"),onClick:function(){return D(!1)}},l.createElement("span",null,l.createElement(o.Z,{conditional:i.Z.isFunction(w),noMatch:function(){return w}},(function(){return w instanceof Function?w():w}))),l.createElement("span",null,l.createElement(o.Z,{conditional:i.Z.isFunction(k),noMatch:function(){return k}},(function(){return k instanceof Function?k():k}))))}},(function(){return l.createElement("a",{className:"".concat(f,"-collapse"),onClick:function(){var e;S[n.list].length?D(!0):null!=(e=G())&&e.then((function(){return D(!0)}))}},l.createElement("span",null,l.createElement(o.Z,{conditional:i.Z.isFunction(N),noMatch:function(){return N}},(function(){return N instanceof Function?N():N}))),l.createElement("span",null,l.createElement(o.Z,{conditional:i.Z.isFunction(P),noMatch:function(){return P}},(function(){return P instanceof Function?P():P}))))}))}),[j,S,n.list,k,w,P,N]),Y=(0,l.useCallback)((function(){return S[n.list].length<=S[n.totalCount]}),[S,n.list,n.totalCount]),_=(0,l.useCallback)((function(){var t;return null==(t=null==(t=null==(t=null==e?void 0:e.fetchData)?void 0:t.call(e,m(m({},W.current),{record:m({},F)})))?void 0:t.then((function(e){return I(!1),e})))?void 0:t.catch((function(e){return I(!1),e}))}),[null==e?void 0:e.fetchData,W.current.page,W.current.limit,F]);function G(){var e;return I(!0),W.current={page:1,limit:r},null==(e=_())?void 0:e.then((function(e){A(e)}))}function $(){I(!0),W.current.page=W.current.page+1;var e,t=n.list;return null==(e=_())?void 0:e.then((function(e){A((function(r){var a;return m(m({},e),((a={})[n.list]=p(p([],r[t],!0),e[t],!0),a))}))}))}return(0,l.useEffect)((function(){O(e.data)}),[null==e?void 0:e.data]),l.createElement(c.Z,{direction:"horizontal",className:a()(f,t?"".concat(f,"-reply"):null)},l.createElement(c.Z.Fixed,{className:"".concat(f,"-avatar-wrap")},null==g?void 0:g(m({},F))),l.createElement(c.Z.Auto,{autoFixed:!0,fit:!0},l.createElement(c.Z,{direction:"vertical"},l.createElement(c.Z.Fixed,{className:"".concat(f,"-title-row"),fit:!1},l.createElement("div",{className:"".concat(f,"-title-row-author")},null==E?void 0:E(m({},F))),l.createElement("div",{className:"".concat(f,"-title-row-date-time")},null==Z?void 0:Z(m({},F)))),l.createElement(c.Z.Auto,{className:"".concat(f,"-content-wrap")},null==C?void 0:C(m({},F))),l.createElement(c.Z.Fixed,null,l.createElement("ul",{className:"".concat(f,"-actions")},q())),l.createElement(o.Z,{conditional:K},(function(){return l.createElement(c.Z.Fixed,{style:{marginTop:15}},l.createElement(d.Z,{onCancel:function(){return z(!1)},onResult:function(e){null!=(e=null==T?void 0:T({id:null==F?void 0:F[y],record:m({},F),reply:e}))&&e.then((function(){z(!1),G()}))},local:M,emojiPickerProps:L}))})),l.createElement(o.Z,{conditional:null==F?void 0:F[h]},(function(){return l.createElement(l.Fragment,null,l.createElement(o.Z,{conditional:!V},(function(){return H()})),l.createElement(o.Z.Show,{conditional:j},B()),l.createElement(o.Z,{conditional:V},(function(){return null==R?void 0:R()})))})))))};t.Z=(0,l.memo)(y)},603262:function(e,t,n){var r=n(690171),a=n(310143),l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},o=function(e){return r.createElement(a.Z,l({},e,{isReply:!0}))};t.Z=(0,r.memo)(o)},804899:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(690171),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function l(e){return r.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"1em",height:"1em",viewBox:"0 0 20 20"},e),r.createElement("path",{fill:"#888888",d:"M6.494 8.075c.045-.295.339-.575.754-.575s.709.28.754.575a.5.5 0 1 0 .988-.15C8.863 7.09 8.104 6.5 7.248 6.5s-1.615.59-1.742 1.425a.5.5 0 1 0 .988.15Zm6.254-.575c-.415 0-.708.28-.754.575a.5.5 0 0 1-.988-.15c.127-.835.886-1.425 1.742-1.425s1.615.59 1.742 1.425a.5.5 0 0 1-.988.15c-.046-.295-.339-.575-.754-.575ZM5.495 10a.5.5 0 0 0-.497.549C5.236 12.992 7.154 15 9.995 15c2.841 0 4.76-2.008 4.998-4.451a.5.5 0 0 0-.498-.549h-9Zm4.5 4c-2.081 0-3.516-1.303-3.912-3h7.825c-.397 1.697-1.831 3-3.913 3ZM10 2a8 8 0 1 0 0 16a8 8 0 0 0 0-16Zm-7 8a7 7 0 1 1 14 0a7 7 0 0 1-14 0Z"}))}},431786:function(e,t,n){var r=n(5254),a=n(143037),l=n(82607),o=n(690171),c=n(324859),i=n(355360),u=n(713582),s=n(221701),d=n(199727),m=n(333423),p=n(231795),f=n(503909),y=n(443460),v=n(361636),h=n(838182),E=n(651986),g=n(686091),C=n(459270),Z=n(245117),R=n(662280),P=n(287389),k=n(158623),b=n(804899),N=function(){return(N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},x=l.default.TextArea,w=c.Z.useSetState,T="adhere-ui-comment-reply",L=new Map([["ar",s],["de",d],["en",m],["es",p],["fa",f],["fr",y],["it",v],["ja",h],["nl",E],["pl",g],["pt",C],["ru",Z],["uk",R],["zh",P]]),M=function(e){var t=void 0===(f=e.local)?"zh":f,n=void 0===(f=e.emojiPickerProps)?{}:f,l=e.onResult,c=e.onCancel,s=(f=w(""))[0],d=f[1],m=(0,o.useRef)(null),p=(0,o.useRef)(null),f=(e=(0,o.useState)(!1))[0],y=e[1],v=(0,o.useCallback)((function(e){var t=e.native,n=null==(e=null==m?void 0:m.current)?void 0:e.querySelector("textarea"),r=n.selectionStart;d("".concat(s.substring(0,r)).concat(t).concat(s.substring(r)),(function(){n.focus(),n.setSelectionRange(r+t.length,r+t.length)}))}),[s]);e=(0,o.useMemo)((function(){return o.createElement(k.Z,N({data:u,i18n:L.get(t||"zh"),onEmojiSelect:v},null!=n?n:{}))}),[u,t,n]);return(0,o.useLayoutEffect)((function(){var e,t;function n(e){e=e.target,[(null==m?void 0:m.current).querySelector("textarea")].includes(e)||y(!1)}function r(e){e.stopPropagation()}return document.body.addEventListener("click",n),null!=(t=null==(e=null==p?void 0:p.current)?void 0:e.addEventListener)&&t.call(e,"click",r),function(){var e,t;document.body.removeEventListener("click",n),null!=(t=null==(e=null==p?void 0:p.current)?void 0:e.removeEventListener)&&t.call(e,"click",r)}})),o.createElement("div",{className:"".concat(T)},o.createElement("div",{className:"".concat(T,"-textarea-wrap"),ref:m},o.createElement(x,{className:"".concat(T,"-textarea"),placeholder:i.ZP.v("请输入回复内容"),autoFocus:!0,value:s,onChange:function(e){return d(e.target.value)},showCount:!0,maxLength:100})),o.createElement("div",{ref:p,className:"".concat(T,"-toolbar-emoji-wrap")}),o.createElement("div",{className:"".concat(T,"-toolbar")},o.createElement(a.Z,{placement:"bottomLeft",getPopupContainer:function(){return p.current},content:e,open:f},o.createElement("div",{onClick:function(e){e.stopPropagation(),y((function(e){return!e}))}},o.createElement(b.Z,{className:"".concat(T,"-toolbar-item-emoji")}))),o.createElement("div",{className:"".concat(T,"-toolbar-inner")},o.createElement(r.ZP,{type:"primary",className:"".concat(T,"-toolbar-item"),disabled:!s,onClick:function(){return null==l?void 0:l(s.trim())}},i.ZP.v("添加")),o.createElement(r.ZP,{className:"".concat(T,"-toolbar-item"),onClick:function(){return null==c?void 0:c()}},i.ZP.v("取消")))))};t.Z=(0,o.memo)(M)},975945:function(e,t,n){var r=n(110107);t.Z=r.Z},413719:function(e,t,n){var r=n(30811),a=n(458860),l="adhere-ui-globalindicator",o=a.Z.Dict.value.ResourceNormalMaxZIndex.value,c=new Set;t.Z={show:function(e,t,n,a){void 0===e&&(e=document.body),void 0===t&&(t=""),void 0===n&&(n=o),void 0===a&&(a="default");var i=(t=((i=document.createElement("div")).innerHTML='\n      <div class="'.concat(l,'" style="z-index: ').concat(n||o,'">\n       <span class="').concat(l,'-dot"></span>\n       ').concat(t&&'<div class="'.concat(l,'-text">').concat(t,"</div>"),"\n      </div>"),i.firstElementChild)).querySelector(".".concat(l,"-dot")),u=(a=new Map([["small",.1],["default",.2],["large",.3]]).get(a),document.documentElement.style.getPropertyValue("--adhere-color-primary"));return new r.$({lines:4,length:0,width:52,radius:29,scale:a,corners:1,speed:2.1,rotate:19,animation:"spinner-line-fade-quick",direction:1,color:u,fadeColor:"transparent",top:"46%",left:"50%",shadow:"0 0 1px transparent",zIndex:n,className:"".concat(l,"-spinner"),position:"absolute"}).spin(i),e===document.body&&(t.style.position="fixed"),e.appendChild(t),c.add(t),t},hide:function(e){var t,n;if(e)try{null!=(n=null==(t=null==e?void 0:e.parentElement)?void 0:t.removeChild)&&n.call(t,e),c.delete(e)}catch(e){}},hideAll:function(){Array.from(c.values()).forEach((function(e){var t,n;try{null!=(n=null==(t=null==e?void 0:e.parentElement)?void 0:t.removeChild)&&n.call(t,e)}catch(e){}})),c.clear()}}},757956:function(e,t,n){var r=n(413719);t.Z=r.Z},648316:function(e,t,n){var r=n(896254);t.Z=r.Z},896254:function(e,t,n){var r=n(801821),a=n.n(r),l=n(690171),o=n(355360),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},u="adhere-ui-scrollload",s=function(e,t){var n=void 0===(n=e.className)?"":n,r=void 0===(r=e.style)?{}:r,s=e.children,d=e.getScrollContainer,m=void 0===(b=e.distance)?50:b,p=e.onScrollBottom,f=e.onEmptyClick,y=e.onErrorClick,v=e.renderLoading,h=void 0===(b=e.loadClassName)?"":b,E=void 0===(b=e.loadStyle)?{}:b,g=e.renderEmpty,C=void 0===(b=e.emptyClassName)?"":b,Z=void 0===(b=e.emptyStyle)?{}:b,R=e.renderError,P=void 0===(b=e.errorClassName)?"":b,k=void 0===(b=e.errorStyle)?{}:b,b=i(e,["className","style","children","getScrollContainer","distance","onScrollBottom","onEmptyClick","onErrorClick","renderLoading","loadClassName","loadStyle","renderEmpty","emptyClassName","emptyStyle","renderError","errorClassName","errorStyle"]),N=(0,l.useRef)(!1),x=(0,l.useRef)(null),w=(0,l.useRef)(null),T=(0,l.useRef)(null),L=(0,l.useRef)(null);function M(){return d?d():x.current}function S(){var e=(t=M()).scrollHeight-t.offsetHeight,t=t.scrollTop;p&&Math.abs(t-e)<=m&&(N.current||(N.current=!0,w.current.style.display="flex",p((function(e){w.current.style.display="none","empty"===e?T.current.style.display="block":"error"===e&&(L.current.style.display="block"),N.current=!1}))))}function A(){f&&f()}function F(){y&&y()}function O(){w.current.style.display="none",L.current.style.display="none",T.current.style.display="none"}e=(0,l.useCallback)((function(){return v?l.createElement("div",{className:a()("".concat(u,"-load"),h),style:null!=E?E:{},ref:w},v()):l.createElement("div",{className:a()("".concat(u,"-load"),"standard",h),style:null!=E?E:{},ref:w},o.ZP.v("数据加载中"))}),[v,h,E]);var j=(0,l.useCallback)((function(){return g?l.createElement("div",{className:a()("".concat(u,"-empty"),C),style:null!=Z?Z:{},ref:T},g()):l.createElement("div",{className:a()("".concat(u,"-empty"),C),style:null!=Z?Z:{},ref:T},"~",o.ZP.v("没有更多"))}),[g,C,Z]),D=(0,l.useCallback)((function(){return R?l.createElement("div",{className:a()("".concat(u,"-error"),P),style:null!=k?k:{},ref:L},R()):l.createElement("div",{className:a()("".concat(u,"-error"),P),style:null!=k?k:{},ref:L},o.ZP.v("出现错误"))}),[R,P,k]);return(0,l.useImperativeHandle)(t,(function(){return{hideAll:O}})),(0,l.useLayoutEffect)((function(){var e;return null!=(e=M())&&e.addEventListener("scroll",S),null!=(e=T.current)&&e.addEventListener("click",A),null!=(e=L.current)&&e.addEventListener("click",F),function(){var e;null!=(e=M())&&e.removeEventListener("scroll",S),null!=(e=T.current)&&e.removeEventListener("click",A),null!=(e=L.current)&&e.removeEventListener("click",F)}})),l.createElement("div",c({},b,{className:a()(u,n),style:c(c({},null!=r?r:{}),{overflowY:M()===x.current?"auto":"initial"}),ref:x}),s,e(),j(),D())},d=(0,l.memo)((0,l.forwardRef)(s));d.EMPTY="empty",d.ERROR="error",d.NORMAL="normal",t.Z=d},713649:function(e,t,n){n.r(t);var r=n(370635),a=n(689002),l=n(390242),o=n(66449),c=n(594062),i=n.n(c),u=n(690171),s=n(416716),d=n(649913),m=n(296032),p=n(50841);const f=Array.from({length:300}).map(((e,t)=>({id:t+1,name:i().internet.userName(),time:i().date.past(),icon:"https://joeschmoe.io/api/v1/random",info:i().hacker.phrase(),isMore:t%2==0,like:i().random.number(),dislike:i().random.number()}))),y=Array.from({length:300}).map(((e,t)=>({id:t+1,name:i().internet.userName(),time:i().date.past(),icon:"https://joeschmoe.io/api/v1/random",info:i().hacker.phrase(),isMore:t%2==0,like:i().random.number(),dislike:i().random.number()})));t.default=()=>{const e=(0,u.useRef)();function t(e){let{page:t,limit:n}=e;return console.log("fetchCommentData",t,n,f.slice((t-1)*n,t*n)),new Promise((e=>{setTimeout((()=>{e({current:t,totalPage:f.length/n+(f.length%n!=0?1:0),list:f.slice((t-1)*n,t*n),totalCount:f.length})}),1500)}))}function n(e){return null==e?void 0:e.name}function c(e){return u.createElement("img",{src:null==e?void 0:e.icon,alt:""})}function v(e,t){return[u.createElement(o.Z,{key:"comment-basic-like",title:"Like"},u.createElement("span",{onClick:()=>{setTimeout((()=>{e.like=i().random.number(),t({...e})}),1e3)}},u.createElement(s.Z,null),u.createElement("span",{style:{marginLeft:5}},e.like))),u.createElement(o.Z,{key:"comment-basic-dislike",title:"Dislike"},u.createElement("span",{onClick:()=>{setTimeout((()=>{e.dislike=i().random.number(),t({...e})}),1e3)}},u.createElement(d.Z,null),u.createElement("span",{style:{marginLeft:5}},e.dislike)))]}function h(e){return null==e?void 0:e.info}function E(e){return u.createElement(l.Z.DateDisplayFromNow,{value:null==e?void 0:e.time})}function g(e){let{page:t,limit:n,record:r}=e;return new Promise((e=>{setTimeout((()=>{e({current:t,totalPage:y.length/n+(y.length%n!=0?1:0),list:y.slice((t-1)*n,t*n),totalCount:y.length})}),1500)}))}function C(e){return null==e?void 0:e.name}function Z(e){return u.createElement("img",{src:null==e?void 0:e.icon,alt:""})}function R(e,t){return[u.createElement(o.Z,{key:"comment-basic-like",title:"Like"},u.createElement("span",{onClick:()=>{setTimeout((()=>{e.like=i().random.number(),t({...e})}),1e3)}},u.createElement(s.Z,null),u.createElement("span",{style:{marginLeft:5}},e.like))),u.createElement(o.Z,{key:"comment-basic-dislike",title:"Dislike"},u.createElement("span",{onClick:()=>{setTimeout((()=>{e.dislike=i().random.number(),t({...e})}),1e3)}},u.createElement(d.Z,null),u.createElement("span",{style:{marginLeft:5}},e.dislike)))]}function P(e){return null==e?void 0:e.info}function k(e){return u.createElement(l.Z.DateDisplayFromNow,{value:null==e?void 0:e.time})}function b(e){let{id:t,record:n,reply:r}=e;const l=a.Z.show(document.body,"");return new Promise((e=>{setTimeout((()=>{e(),a.Z.hide(l)}),1e3)}))}return u.createElement(m.ZP,null,u.createElement(m.$0,{title:"Comment"},u.createElement("p",null,"评论")),u.createElement(m.e0,{title:"代码演示",config:[{id:"p1",name:"基本使用",mode:"code",scope:{React:u},cardProps:{description:{title:"基本使用",info:"基本使用"}},codeText:"",type:"PlayGround",renderChildren:()=>u.createElement(u.Fragment,null,u.createElement("div",{className:p.Z.ScrollWrap,ref:e},u.createElement("div",{className:p.Z.Scroll},u.createElement(r.Z,{getScrollWrapContainer:()=>e.current,fetchCommentData:t,renderCommentActions:v,renderCommentAuthor:n,renderCommentAvatar:c,renderCommentContent:h,renderCommentDateTime:E,fetchReplyData:g,renderReplyActions:R,renderReplyAuthor:C,renderReplyAvatar:Z,renderReplyContent:P,renderReplyDateTime:k,fetchReply:b}))))}]}),u.createElement(m.sB,{title:"Props",config:[{border:!0,title:"属性",data:[{params:"getScrollWrapContainer",desc:"获取滚动的目标元素",type:"HTMLElement",defaultVal:"document.body"},{params:"fetchCommentData",desc:"获取评论数据",type:"(params?: any) => Promise<any>",defaultVal:""},{params:"commentDataKeys",desc:"评论返回值结构",type:"\n                  {\n                    current: string;\n                    totalPage: string;\n                    list: string;\n                    totalCount: string;\n                  }\n                ",defaultVal:"{\n                  current: 'current',\n                  totalPage: 'totalPage',\n                  list: 'list',\n                  totalCount: 'totalCount',\n                }"},{params:"commentLimit",desc:"评论一页数据数",type:"number",defaultVal:"10"},{params:"commentKeyProp",desc:"评论数据的唯一主键属性",type:"string",defaultVal:"id"},{params:"renderCommentActions",desc:"渲染评论的操作区",type:"(params?: any) => ReactNode[] | null",defaultVal:""},{params:"renderCommentAuthor",desc:"渲染评论作者",type:"(params?: any) => ReactNode[] | null",defaultVal:""},{params:"renderCommentAvatar",desc:"渲染评论头像",type:"(params?: any) => ReactNode | null",defaultVal:""},{params:"renderCommentContent",desc:"渲染评论内容",type:"(params?: any) => ReactNode | null",defaultVal:""},{params:"renderCommentDateTime",desc:"渲染评论时间",type:"(params?: any) => ReactNode | null",defaultVal:""},{params:"renderCommentLoading",desc:"渲染评论的loading",type:"(params?: any) => ReactNode | null",defaultVal:""},{params:"fetchReplyData",desc:"加载回复数据",type:"(params?: any) => Promise<any>",defaultVal:""},{params:"replyDataKeys",desc:"回复数据结构",type:"{\n                  current: string;\n                  totalPage: string;\n                  list: string;\n                  totalCount: string;\n                }",defaultVal:"{\n                  current: 'current',\n                  totalPage: 'totalPage',\n                  list: 'list',\n                  totalCount: 'totalCount',\n                }"},{params:"replyLimit",desc:"回复数据的分页数",type:"number",defaultVal:"10"},{params:"replyKeyProp",desc:"回复数据唯一主键属性",type:"string",defaultVal:"id"},{params:"renderReplyActions",desc:"渲染回复的工具",type:"(params?: any) => ReactNode[] | null",defaultVal:""},{params:"renderReplyAuthor",desc:"渲染回复的作者",type:"(params?: any) => ReactNode | null",defaultVal:""},{params:"renderReplyAvatar",desc:"渲染回复的头像renderReplyAvatar",type:"(params?: any) => ReactNode | null",defaultVal:""},{params:"renderReplyContent",desc:"渲染回复内容",type:"(params?: any) => ReactNode | null",defaultVal:""},{params:"renderReplyDateTime",desc:"渲染回复的时间",type:"(params?: any) => ReactNode | null",defaultVal:""},{params:"renderReplyLoading",desc:"渲染回复loading",type:"(params?: any) => ReactNode | null",defaultVal:""},{params:"fetchReply",desc:"进行回复",type:"(params?: any) => Promise<any>",defaultVal:""},{params:"listProps",desc:"ScrollList的props",type:"any",defaultVal:"{}"},{params:"isMoreProp",desc:"是否有更多的属性",type:"string",defaultVal:"isMore"},{params:"flexLayoutProps",desc:"flexLayout的props",type:"FlexLayoutProps",defaultVal:"{}"},{params:"renderEmpty",desc:"无数据的渲染",type:"() => ReactElement | null",defaultVal:""},{params:"renderFirstLoading",desc:"第一次的渲染",type:"() => ReactNode",defaultVal:""},{params:"showReplyText",desc:"回复的文本",type:"string | Function",defaultVal:""},{params:"hideReplyText",desc:"隐藏回复的文本",type:"string | Function",defaultVal:""},{params:"loadMoreReplyText",desc:"加载更多数据的文本",type:"string | Function",defaultVal:""},{params:"showReplyTextIcon",desc:"滚动",type:"回复文本的图标",defaultVal:"ReactNode | Function"},{params:"hideReplyTextIcon",desc:"隐藏回复的图标",type:"ReactNode | Function",defaultVal:""},{params:"loadMoreCollapseTextIcon",desc:"加载更多数据的图标",type:"ReactNode | Function",defaultVal:""},{params:"local",desc:"国际化",type:"Local",defaultVal:"zh"},{params:"emojiPickerProps",desc:"表情组件的Props",type:"any",defaultVal:"{}"}]}]}))}},296032:function(e,t,n){n.d(t,{$0:function(){return i},ae:function(){return d},e0:function(){return u},sB:function(){return s}});var r=n(570517),a=n(153757),l=n(690171);const{PlayGroundPageContext:o,PlayGroundPage:c}=a.default,{Section:i,CodeBoxSection:u,PropsSection:s,FunctionPropsSection:d}=c;t.ZP=function(e){let{children:t,...n}=e;const[a,i]=(0,l.useState)(),u=(0,l.useRef)();return(0,l.useEffect)((()=>{i(u.current.parentElement.parentElement)}),[]),l.createElement(o.Provider,{value:{scrollEl:a}},l.createElement(c,(0,r.Z)({ref:u},n),t))}},370635:function(e,t,n){var r=n(975945);t.Z=r.Z},689002:function(e,t,n){var r=n(757956);t.Z=r.Z}}]);