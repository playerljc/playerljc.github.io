"use strict";(self.webpackChunk_ctsj_build=self.webpackChunk_ctsj_build||[]).push([[5203],{32248:function(e,n,t){t.r(n),t.d(n,{default:function(){return v}});var r=t(34149),i=t(66891),a=t.n(i),s=t(90171),o=t(4134),l=[],c=function(){return JSON.parse(JSON.stringify(l))},u=function(e,n){return!((e=(e=void 0===e?c():e)||c())&&Array.isArray(e)&&n)||(Array.isArray(n)?n.every((function(n){return-1!==e.indexOf(n)})):-1!==e.indexOf(n))},m=function(e){var n=void 0===(n=e.allPermission)?c():n,t=e.permissions,r=e.children;e=e.noMatch;return s.createElement(o.Z,{conditional:u(n,t),noMatch:e},r)};m.defaultProps={allPermission:void 0,permissions:"",noMatch:null,children:null},m.propTypes={allPermission:a().array,permissions:a().oneOfType([a().array,a().string]),noMatch:a().node,children:a().node};var d={Permission:m,setPermission:function(e){l=e},checkPermission:u,getPermission:c,PermissionFun:function(e){var n=void 0===(n=e.allPermission)?c():n,t=e.permissions,r=e.match;return e=e.noMatch,o.Z.conditionalRender({conditional:u(n,t),match:r,noMatch:e})}},p=t(29),f=t(17464),P=t(27288),y=t(96032);const{Permission:g,setPermission:h,getPermission:E}=d;h(["1"]);var v=()=>{const[e,n]=(0,s.useState)(E()),[t,i]=(0,s.useState)(["2"]),a=(0,s.useRef)(),o=(0,s.useRef)();return s.createElement(y.ZP,null,s.createElement(y.$0,{title:"Permission"},s.createElement("p",null,"权限的组件"),s.createElement("ul",null,s.createElement("li",null,"- 设置所有权限"),s.createElement("li",null,"- 传入权限(支持多个)"),s.createElement("li",null,"- 可以自定义无权限的 UI"))),s.createElement(y.e0,{title:"代码演示",columnCount:1,config:[{id:"p1",name:"基本使用",mode:"code",scope:{React:s},cardProps:{description:{title:"基本使用",info:"基本使用"}},codeText:"\n  import React, { useState, useRef } from 'react';\n  import { Card, Empty, Button } from 'antd';\n  import { Permission, MessageDialog } from '@baifendian/adhere';\n\n  const { Permission: PermissionWrap, setPermission, getPermission } = Permission;\n\n  setPermission(['1']);\n\n  <Card\n  actions={[\n    <Button\n      type=\"primary\"\n      onClick={() => {\n        const {close} = MessageDialog.Modal({\n          config: {\n            title: '权限所有设置',\n            width: 300,\n            footer: [\n              <Button\n                type=\"primary\"\n                onClick={() => {\n                  const val = ref1.current.value.trim();\n                  if (val) {\n                    setPermission(val.split(','));\n                    setAllPermission(getPermission());\n                  }\n                  // MessageDialog.close(el);\n                  close();\n                }}\n              >\n                确定\n              </Button>,\n            ],\n          },\n          children: (\n            <div>\n              <input autoFocus={true} ref={ref1} defaultValue={getPermission()} />\n            </div>\n          ),\n        });\n      }}\n    >\n      设置所有权限\n    </Button>,\n\n    <Button\n      onClick={() => {\n        const {close} = MessageDialog.Modal({\n          config: {\n            title: '权限当前设置',\n            width: 300,\n            footer: [\n              <Button\n                type=\"primary\"\n                onClick={() => {\n                  const val = ref2.current.value.trim();\n                  if (val) {\n                    setCurPermission(val.split(','));\n                  }\n                  // MessageDialog.close(el);\n                  close();\n                }}\n              >\n                确定\n              </Button>,\n            ],\n          },\n          children: (\n            <div>\n              <input autoFocus={true} ref={ref2} defaultValue={curPermission} />\n            </div>\n          ),\n        });\n      }}\n    >\n      设置当前权限\n    </Button>,\n  ]}\n  >\n    <PermissionWrap permissions={curPermission} noMatch={<Empty />}>\n      <Button>有权限才能看到这个按钮</Button>\n    </PermissionWrap>\n  </Card>\n      ",type:"PlayGround",renderChildren:()=>s.createElement(p.Z,{actions:[s.createElement(f.ZP,{type:"primary",onClick:()=>{const{close:e}=r.Z.Modal({config:{title:"权限所有设置",width:300,footer:[s.createElement(f.ZP,{type:"primary",onClick:()=>{const t=a.current.value.trim();t&&(h(t.split(",")),n(E())),e()}},"确定")]},children:s.createElement("div",null,s.createElement("input",{autoFocus:!0,ref:a,defaultValue:E()}))})}},"设置所有权限"),s.createElement(f.ZP,{onClick:()=>{const{close:e}=r.Z.Modal({config:{title:"权限当前设置",width:300,footer:[s.createElement(f.ZP,{type:"primary",onClick:()=>{const n=o.current.value.trim();n&&i(n.split(",")),e()}},"确定")]},children:s.createElement("div",null,s.createElement("input",{autoFocus:!0,ref:o,defaultValue:t}))})}},"设置当前权限")]},s.createElement(g,{permissions:t,noMatch:()=>s.createElement(P.Z,null)},(()=>s.createElement(f.ZP,null,"有权限才能看到这个按钮"))))}]}),s.createElement(y.sB,{title:"Props",config:[{border:!0,title:"Permission",data:[{params:"allPermission",desc:"所有的权限",type:"Array<String>",defaultVal:"undefined"},{params:"permissions",desc:"校验的权限",type:"Array<String>",defaultVal:""},{params:"children",desc:"有权限时显示的内容",type:"React.ReactElement | null",defaultVal:""},{params:"noMatch",desc:"没有权限时显示的内容",type:"React.ReactElement",defaultVal:"null"}]}]}),s.createElement(y.ae,{title:"Api",config:[{border:!0,title:"Api",data:[{name:"setPermission",desc:"设置所有的权限",modifier:"static",params:[{name:"permission",desc:"所有的权限",type:"Array<String>",defaultVal:"",required:""}],returnType:"void",returnDesc:""},{name:"getPermission",desc:"获取所有的权限",modifier:"static",params:[],returnType:"Array<String>",returnDesc:"返回所有权限的数组"},{name:"checkPermission",desc:"监测是否有指定的权限",modifier:"static",params:[{name:"allPermission",desc:"所有的权限",type:"Array<String>",defaultVal:"",required:""},{name:"currentPermissions",desc:"监测的权限",type:"Array<String>",defaultVal:"",required:""}],returnType:"boolean",returnDesc:"是否存在指定的权限"},{name:"checkPermission",desc:"监测是否有指定的权限",modifier:"static",params:[{name:"allPermission",desc:"所有的权限",type:"Array<String>",defaultVal:"",required:""},{name:"currentPermissions",desc:"监测的权限",type:"Array<String>",defaultVal:"",required:""}],returnType:"boolean",returnDesc:"是否存在指定的权限"},{name:"PermissionFun",desc:"函数方式实现",modifier:"static",params:[{name:"allPermission",desc:"所有的权限",type:"Array<String>",defaultVal:"",required:""},{name:"permissions",desc:"监测的权限",type:"Array<String>",defaultVal:"",required:""},{name:"match",desc:"符合条件",type:"any",defaultVal:"",required:""},{name:"noMatch",desc:"不符合条件",type:"any",defaultVal:"",required:""}],returnType:"React.Element | null",returnDesc:""}]}]}))}},96032:function(e,n,t){t.d(n,{$0:function(){return l},ae:function(){return m},e0:function(){return c},sB:function(){return u}});var r=t(70517),i=t(6692),a=t(90171);const{PlayGroundPageContext:s,PlayGroundPage:o}=i.default,{Section:l,CodeBoxSection:c,PropsSection:u,FunctionPropsSection:m}=o;n.ZP=function(e){let{children:n,...t}=e;const[i,l]=(0,a.useState)(),c=(0,a.useRef)();return(0,a.useEffect)((()=>{l(c.current.parentElement.parentElement)}),[]),a.createElement(s.Provider,{value:{scrollEl:i}},a.createElement(o,(0,r.Z)({ref:c},t),n))}}}]);