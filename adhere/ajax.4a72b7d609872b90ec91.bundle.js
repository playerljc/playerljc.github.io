"use strict";(self.webpackChunk_ctsj_build=self.webpackChunk_ctsj_build||[]).push([[2249],{54763:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(75745),a=n(85820),o="adhere-ui-global-indicator",i=a.A.Dict.value.ResourceNormalMaxZIndex.value,s=new Set;const d={show:function(e,t,n,a){void 0===e&&(e=document.body),void 0===t&&(t=""),void 0===n&&(n=i),void 0===a&&(a="default");var d=(t=((d=document.createElement("div")).innerHTML='\n      <div class="'.concat(o,'" style="z-index: ').concat(n||i,'">\n       <span class="').concat(o,'-dot"></span>\n       ').concat(t&&'<div class="'.concat(o,'-text">').concat(t,"</div>"),"\n      </div>"),d.firstElementChild)).querySelector(".".concat(o,"-dot")),c=(a=new Map([["small",.1],["default",.2],["large",.3]]).get(a),document.documentElement.style.getPropertyValue("--adhere-color-primary"));return new r.y({lines:4,length:0,width:52,radius:29,scale:a,corners:1,speed:2.1,rotate:19,animation:"spinner-line-fade-quick",direction:1,color:c,fadeColor:"transparent",top:"46%",left:"50%",shadow:"0 0 1px transparent",zIndex:n,className:"".concat(o,"-spinner"),position:"absolute"}).spin(d),e===document.body&&(t.style.position="fixed"),e.appendChild(t),s.add(t),t},hide:function(e){var t,n;if(e)try{null!=(n=null==(t=null==e?void 0:e.parentElement)?void 0:t.removeChild)&&n.call(t,e),s.delete(e)}catch(e){}},hideAll:function(){Array.from(s.values()).forEach((function(e){var t,n;try{null!=(n=null==(t=null==e?void 0:e.parentElement)?void 0:t.removeChild)&&n.call(t,e)}catch(e){}})),s.clear()}}},3970:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var r=n(26322),a=n(19994),o=n(7847),i=n(80711);const s=new o.A("http://k007-pe.baifendian.com"),d=()=>r.createElement(i.Ay,{type:"primary",onClick:()=>{s.get({path:"/api/securitypolice/frontend/config/namespace?kw=k007.service_address@@resource@@gis@@application",loading:{show:!0}}).promise.then((e=>{e&&(200===e.data.code&&alert(JSON.stringify(e.data.data)),e.hideIndicator())}))}},"call"),c=new o.A("http://k007-pe.baifendian.com"),l=()=>r.createElement(i.Ay,{type:"primary",onClick:()=>{c.post({path:"/api/controlledObject/facade/fq/queryList",data:[{resource:"12345678",type:"101",uuid:"7419d8b2-76f8-11eb-ada5-b76f62efdb0c"},{resource:"",type:"103",uuid:"562096255732281344"}],loading:{show:!0}}).promise.then((e=>{e&&(200===e.data.code&&alert(JSON.stringify(e.data.data)),e.hideIndicator())}))}},"call");var p=n(32517),u=n(1025),f=n(94413);const m=new o.A("http://k007-pe.baifendian.com"),y=()=>{const e=(0,r.useRef)(),t=(0,r.useRef)(),[n,a]=(0,r.useState)(null),[o,i]=(0,r.useState)(0);return r.createElement("form",{encType:"multipart/form-data",method:"post",ref:e},r.createElement("div",null,r.createElement(u.A,{shape:"square",size:"large",icon:n?r.createElement("img",{src:n,alt:""}):null}),r.createElement(p.A,{direction:"vertical"}),r.createElement("input",{type:"file",ref:t,onChange:()=>{const n=t.current.files[0],{size:r}=n,o=new FileReader;o.onload=e=>{a(e.target.result)},o.readAsDataURL(n),m.post({path:"/api/personControl/monitorPerson/image/upload",data:{form:e.current,data:{file:n}},loading:{show:!0},onProgress:e=>{i(e.loaded/r*100)},onLoadend:()=>{i(100)}}).promise.then((e=>{i(100),e&&(200===e.data.code&&alert(JSON.stringify(e.data.data)),e.hideIndicator())}))}}),r.createElement(p.A,{direction:"vertical"}),r.createElement(f.A,{percent:o})))};var h=n(18647);const g=new o.A("http://k007-pe.baifendian.com"),T=()=>r.createElement(i.Ay,{type:"primary",onClick:()=>{const e=h.A.show();Promise.all([g.get({path:"/api/securitypolice/frontend/config/namespace?kw=k007.service_address@@resource@@gis@@application"}).promise,g.get({path:"/api/SystemManager/system/role/login/list?state=&kw=&pageNum=1&pageSize=10"}).promise,g.post({path:"/api/controlledObject/facade/fq/queryList",data:[{resource:"12345678",type:"101",uuid:"7419d8b2-76f8-11eb-ada5-b76f62efdb0c"},{resource:"",type:"103",uuid:"562096255732281344"}]}).promise]).then((t=>{h.A.hide(e),alert(JSON.stringify(t))})).catch((()=>{h.A.hide(e)}))}},"call"),A=()=>r.createElement(a.Ay,null,r.createElement(a.wn,{title:"Ajax"}),r.createElement(a.Wc,{title:"代码演示",columnCount:1,config:[{id:"p1",name:"get",mode:"code",scope:{React:r},cardProps:{description:{title:"get",info:"get"}},type:"PlayGround",codeText:"import { Button } from 'antd';\r\nimport React from 'react';\r\n\r\nimport { Ajax } from '@baifendian/adhere';\r\n\r\nconst k007Ajax = new Ajax('http://k007-pe.baifendian.com');\r\n\r\nexport default () => {\r\n  return (\r\n    <Button\r\n      type=\"primary\"\r\n      onClick={() => {\r\n        k007Ajax\r\n          .get({\r\n            path: '/api/securitypolice/frontend/config/namespace?kw=k007.service_address@@resource@@gis@@application',\r\n            loading: {\r\n              show: true,\r\n            },\r\n          })\r\n          .promise.then((res) => {\r\n            if (res) {\r\n              if (res.data.code === 200) {\r\n                alert(JSON.stringify(res.data.data));\r\n              }\r\n\r\n              res.hideIndicator();\r\n            }\r\n          });\r\n      }}\r\n    >\r\n      call\r\n    </Button>\r\n  );\r\n};\r\n",renderChildren:()=>r.createElement(d,null)},{id:"p2",name:"post",mode:"code",scope:{React:r},cardProps:{description:{title:"post",info:"post"}},type:"PlayGround",codeText:"import { Button } from 'antd';\r\nimport React from 'react';\r\n\r\nimport { Ajax } from '@baifendian/adhere';\r\n\r\nconst k007Ajax = new Ajax('http://k007-pe.baifendian.com');\r\n\r\nexport default () => {\r\n  return (\r\n    <Button\r\n      type=\"primary\"\r\n      onClick={() => {\r\n        k007Ajax\r\n          .post({\r\n            path: '/api/controlledObject/facade/fq/queryList',\r\n            data: [\r\n              {\r\n                resource: '12345678',\r\n                type: '101',\r\n                uuid: '7419d8b2-76f8-11eb-ada5-b76f62efdb0c',\r\n              },\r\n              { resource: '', type: '103', uuid: '562096255732281344' },\r\n            ],\r\n            loading: {\r\n              show: true,\r\n            },\r\n            // customSendJSONStringify: (self, key, value) => {\r\n            //   return value;\r\n            // },\r\n          })\r\n          .promise.then((res) => {\r\n            if (res) {\r\n              if (res.data.code === 200) {\r\n                alert(JSON.stringify(res.data.data));\r\n              }\r\n\r\n              res.hideIndicator();\r\n            }\r\n          });\r\n      }}\r\n    >\r\n      call\r\n    </Button>\r\n  );\r\n};\r\n",renderChildren:()=>r.createElement(l,null)},{id:"p3",name:"upload",mode:"code",scope:{React:r},cardProps:{description:{title:"upload",info:"upload"}},type:"PlayGround",codeText:'import { Avatar, Progress } from \'antd\';\r\nimport React, { useRef, useState } from \'react\';\r\n\r\nimport { Ajax } from \'@baifendian/adhere\';\r\nimport { Space } from \'@baifendian/adhere\';\r\n\r\nconst k007Ajax = new Ajax(\'http://k007-pe.baifendian.com\');\r\n\r\nexport default () => {\r\n  const uploadFormFef = useRef();\r\n  const uploadRef = useRef();\r\n  const [img, setImg] = useState(null);\r\n  const [percent, setPercent] = useState(0);\r\n\r\n  return (\r\n    <form encType="multipart/form-data" method="post" ref={uploadFormFef}>\r\n      <div>\r\n        <Avatar shape="square" size="large" icon={img ? <img src={img} alt="" /> : null} />\r\n\r\n        <Space direction="vertical" />\r\n\r\n        <input\r\n          type="file"\r\n          ref={uploadRef}\r\n          onChange={() => {\r\n            const file = uploadRef.current.files[0];\r\n\r\n            const { size } = file;\r\n\r\n            const reader = new FileReader();\r\n            reader.onload = (e) => {\r\n              setImg(e.target.result);\r\n            };\r\n\r\n            reader.readAsDataURL(file);\r\n\r\n            k007Ajax\r\n              .post({\r\n                path: \'/api/personControl/monitorPerson/image/upload\',\r\n                data: {\r\n                  form: uploadFormFef.current,\r\n                  data: {\r\n                    file,\r\n                  },\r\n                },\r\n                loading: {\r\n                  show: true,\r\n                },\r\n                onProgress: (e) => {\r\n                  setPercent((e.loaded / size) * 100);\r\n                },\r\n                onLoadend: () => {\r\n                  setPercent(100);\r\n                },\r\n              })\r\n              .promise.then((res) => {\r\n                setPercent(100);\r\n\r\n                if (res) {\r\n                  if (res.data.code === 200) {\r\n                    alert(JSON.stringify(res.data.data));\r\n                  }\r\n\r\n                  res.hideIndicator();\r\n                }\r\n              });\r\n          }}\r\n        />\r\n\r\n        <Space direction="vertical" />\r\n\r\n        <Progress percent={percent} />\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n',renderChildren:()=>r.createElement(y,null)},{id:"p4",name:"PromiseAll",mode:"code",scope:{React:r},cardProps:{description:{title:"PromiseAll",info:"PromiseAll"}},type:"PlayGround",codeText:"import { Button } from 'antd';\r\nimport React from 'react';\r\n\r\nimport { Ajax, GlobalIndicator } from '@baifendian/adhere';\r\n\r\nconst k007Ajax = new Ajax('http://k007-pe.baifendian.com');\r\n\r\nexport default () => {\r\n  return (\r\n    <Button\r\n      type=\"primary\"\r\n      onClick={() => {\r\n        const globalIndicator = GlobalIndicator.show();\r\n\r\n        Promise.all([\r\n          k007Ajax.get({\r\n            path: '/api/securitypolice/frontend/config/namespace?kw=k007.service_address@@resource@@gis@@application',\r\n          }).promise,\r\n          k007Ajax.get({\r\n            path: '/api/SystemManager/system/role/login/list?state=&kw=&pageNum=1&pageSize=10',\r\n          }).promise,\r\n          k007Ajax.post({\r\n            path: '/api/controlledObject/facade/fq/queryList',\r\n            data: [\r\n              {\r\n                resource: '12345678',\r\n                type: '101',\r\n                uuid: '7419d8b2-76f8-11eb-ada5-b76f62efdb0c',\r\n              },\r\n              { resource: '', type: '103', uuid: '562096255732281344' },\r\n            ],\r\n          }).promise,\r\n        ])\r\n          .then((res) => {\r\n            GlobalIndicator.hide(globalIndicator);\r\n            alert(JSON.stringify(res));\r\n          })\r\n          .catch(() => {\r\n            GlobalIndicator.hide(globalIndicator);\r\n          });\r\n      }}\r\n    >\r\n      call\r\n    </Button>\r\n  );\r\n};\r\n",renderChildren:()=>r.createElement(T,null)}]}),r.createElement(a.e6,{title:"Props",config:[{border:!0,title:"ISendArg",data:[{params:"path",desc:"请求的地址(相对的地址)",type:"string",defaultVal:""},{params:"headers",desc:"请求的头",type:"Object<key,value>",defaultVal:""},{params:"data",desc:"请求的数据",type:"{form?: HTMLFormElement;data: object;} | object",defaultVal:""},{params:"mock",desc:"是否支持mock数据",type:"boolean",defaultVal:"false"},{params:"loading",desc:"loading的配置",type:"{show:boolean;text:string;el:HtmlElement}",defaultVal:""},{params:"onBeforeResponse",desc:"和后端定义的三大业务key",type:"() => {}",defaultVal:""},{params:"dataKey",desc:"数据属性",type:"string",defaultVal:""},{params:"messageKey",desc:"消息属性",type:"string",defaultVal:""},{params:"codeKey",desc:"业务code属性",type:"number | string",defaultVal:""},{params:"codeSuccess",desc:"业务code成功属性",type:"number",defaultVal:""},{params:"showWarn",desc:"在code不等于200的时候是否使出message的warn",type:"boolean",defaultVal:""},{params:"onTimeout",desc:"超时函数",type:"Function",defaultVal:""},{params:"onLoadsStart",desc:"加载开始",type:"Function",defaultVal:""},{params:"onProgress",desc:"加载进度",type:"Function",defaultVal:""},{params:"onAbort",desc:"请求取消",type:"Function",defaultVal:""},{params:"onError",desc:"发生错误",type:"Function",defaultVal:""},{params:"onLoad",desc:"开始加载",type:"Function",defaultVal:""},{params:"onLoadend",desc:"加载完成",type:"Function",defaultVal:""},{params:"timeout",desc:"超时时间",type:"number",defaultVal:""},{params:"withCredentials",desc:"是否携带客户端信息",type:"boolean",defaultVal:"true"},{params:"interceptor",desc:"拦截器",type:"Function({status,statusText,response,responseText})",defaultVal:""}]},{border:!0,title:"IConfig",data:[{params:"onTimeout",desc:"在预设时间内没有接收到响应时触发",type:"Function",defaultVal:""},{params:"onLoadsStart",desc:"接收到响应数据时触发",type:"Function",defaultVal:""},{params:"onProgress",desc:"当请求接收到更多数据时，周期性地触发",type:"Function",defaultVal:""},{params:"onAbort",desc:"当 request 被停止时触发，例如当程序调用 XMLHttpRequest.abort() 时",type:"Function",defaultVal:""},{params:"onError",desc:"当 request 遭遇错误时触发",type:"Function",defaultVal:""},{params:"onLoad",desc:"XMLHttpRequest请求成功完成时触发",type:"Function",defaultVal:""},{params:"onLoadend",desc:"请求结束时触发, 无论请求成功 ( load) 还是失败 (abort 或 error)",type:"Function",defaultVal:""},{params:"timeout",desc:"超时时间",type:"number",defaultVal:""},{params:"withCredentials",desc:"是否携带客户端数据",type:"boolean",defaultVal:"true"},{params:"interceptor",desc:"拦截器接口定义",type:"Function({status,statusText,response,responseText})",defaultVal:""}]}]}),r.createElement(a.I7,{title:"Api",config:[{border:!0,title:"方法",data:[{name:"constructor",desc:"构造方法",modifier:"public",params:[{name:"baseURL",desc:"基础路径",type:"string",defaultVal:"",required:""},{name:"systemManagerBaseURL",desc:"系统管理BaseURL",type:"string",defaultVal:"",required:""},{name:"config",desc:"配置",type:"IConfig",defaultVal:"",required:""}],returnType:"Ajax",returnDesc:""},{name:"get",desc:"get请求",modifier:"public",params:[{name:"params",desc:"",type:"ISendArg",defaultVal:"",required:""}],returnType:"Promise",returnDesc:""},{name:"post",desc:"post请求",modifier:"public",params:[{name:"params",desc:"",type:"ISendArg",defaultVal:"",required:""}],returnType:"Promise",returnDesc:""},{name:"path",desc:"path请求",modifier:"public",params:[{name:"params",desc:"",type:"ISendArg",defaultVal:"",required:""}],returnType:"Promise",returnDesc:""},{name:"put",desc:"put请求",modifier:"public",params:[{name:"params",desc:"",type:"ISendArg",defaultVal:"",required:""}],returnType:"Promise",returnDesc:""},{name:"delete",desc:"delete请求",modifier:"public",params:[{name:"params",desc:"",type:"ISendArg",defaultVal:"",required:""}],returnType:"Promise",returnDesc:""}]}]}))},19994:(e,t,n)=>{n.d(t,{Ay:()=>u,I7:()=>p,Wc:()=>c,e6:()=>l,wn:()=>d});var r=n(71860),a=n(24370),o=n(26322);const{PlayGroundPageContext:i,PlayGroundPage:s}=a.A,{Section:d,CodeBoxSection:c,PropsSection:l,FunctionPropsSection:p}=s;const u=function(e){let{children:t,onScrollBottom:n,distance:a=50,...d}=e;const[c,l]=(0,o.useState)(),p=(0,o.useRef)(),u=(0,o.useRef)(!1);return(0,o.useEffect)((()=>{function e(){const e=t.scrollHeight-t.offsetHeight,r=t.scrollTop;if(n&&Math.abs(r-e)<=a){if(u.current)return;u.current=!0,null==n||n().then((()=>{u.current=!1}))}}const t=p.current.parentElement.parentElement;return t.addEventListener("scroll",e),l(t),()=>{t.removeEventListener("scroll",e)}}),[]),o.createElement(i.Provider,{value:{scrollEl:c}},o.createElement(s,(0,r.A)({ref:p},d),t))}},7847:(e,t,n)=>{n.d(t,{A:()=>N});var r=n(2897),a=n(65410);const o={show:function(e,t){return void 0===e&&(e=document.body),a.A.show({content:t=void 0===t?"":t,maskClickable:!1,icon:"loading",getContainer:null!=e?e:document.body,duration:0})},hide:function(e){e.close()},hideAll:function(){a.A.clear()}};var i,s,d=n(54763),c=n(88724),l=n(59418),p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},u=function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},f=!1,m=300,y=function(){function e(e,t,n){this.baseURL=e||"",this.systemManagerBaseURL=t||"",this.config=null!=n?n:{}}return e.prototype.get=function(e){var t=this,n=(e.data,u(e,["data"])),r={};e=new Promise((function(e,a){(e=(r=w.call(t,p(p(p(p({},T.call(t)),t.config),{method:"get"}),n),{resolve:e,reject:a})).xhr)&&e.send(null)}));return p(p({},r),{promise:e})},e.prototype.post=function(e){return O.call(this,"post",e)},e.prototype.path=function(e){return O.call(this,"path",e)},e.prototype.put=function(e){return O.call(this,"put",e)},e.prototype.delete=function(e){return O.call(this,"delete",e)},e.TIMEOUT=1e6,e.STATUS_SUCCESS_CODES=[200,201,202,203,204,205,206,207,208,226],e.STATUS_REDIRECT_CODES=[300,301,302,303,304,305,306,307,308],e.READY_STATE_UNSENT=0,e.READY_STATE_OPENED=1,e.READY_STATE_HEADERS_RECEIVED=2,e.READY_STATE_LOADING=3,e.READY_STATE_DONE=4,e.CONTENT_TYPE_APPLICATION_JSON="application/json",e.CONTENT_TYPE_MULTIPART_FORM_DATA="multipart/form-data",e.CONTENT_TYPE_APPLICATION_X_WWW_FORM_URLENCODED="application/x-www-form-urlencoded",e.CONTENT_TYPE_TEXT_XML="text/xml",e.CONTENT_TYPE_APPLICATION_XML="application/xml",e.CONTENT_TYPE_TEXT_PLAIN="text/plain",e}();function h(e,t){i&&(clearTimeout(i),i=null),i=setTimeout((function(){r.Ay.error({message:e,description:t})}),m)}function g(e,t){s&&(clearTimeout(s),s=null),s=setTimeout((function(){r.Ay.warning({message:e,description:t})}),m)}function T(){var e=this;return{timeout:y.TIMEOUT,withCredentials:!0,onLoad:function(){},onLoadsStart:function(){},onLoadend:function(){},onProgress:function(){},onTimeout:function(){g(l.Ay.v("提示"),l.Ay.v("请求超时"))},onAbort:function(){g(l.Ay.v("提示"),l.Ay.v("请求终止"))},onError:function(){h(l.Ay.v("提示"),l.Ay.v("请求发生错误"))},interceptor:function(t){switch(t.status){case 401:P.call(e);break;case 402:_.call(e);break;default:h(l.Ay.v("提示"),l.Ay.v("已提出请求，但未收到任何回复"))}},mock:!1,loading:{show:!1,text:"",el:document.body,zIndex:19999,size:"default"},onBeforeResponse:function(){},dataKey:"data",messageKey:"message",codeKey:"code",codeSuccess:200,showWarn:!0,responseType:""}}function A(e){var t=e.show,n=e.terminal,r=e.data,a=e.indicator,o=(e=e.xhr,b(n));return p({xhr:e,data:r},t?{hideIndicator:function(){return o.hide(a)}}:{})}function E(e){var t,n,r=e.xhr,a=e.interceptor,o=(s=e.loading).show,i=s.indicator,s=s.terminal,d=(u=e.business).messageKey,c=u.codeKey,p=u.codeSuccess,u=u.showWarn,f=e.resolve,m=(e=e.reject,b(s));r.readyState===y.READY_STATE_DONE&&(200<=r.status&&r.status<300||304===r.status?-1!==(t=r.getResponseHeader("Content-type")).indexOf(y.CONTENT_TYPE_APPLICATION_JSON)?(n=JSON.parse(r.responseText),u&&c in n&&n[c]!==p&&g(l.Ay.v("提示"),n[d]),f(A({show:o,terminal:s,data:n,indicator:i,xhr:r}))):[y.CONTENT_TYPE_TEXT_XML,y.CONTENT_TYPE_TEXT_XML].includes(t)?f(A({show:o,terminal:s,data:r.responseXML,indicator:i,xhr:r})):f(A({show:o,terminal:s,data:r.response,indicator:i,xhr:r})):(a({status:r.status,statusText:r.statusText,response:r.response,responseText:r.responseText}),e({status:r.status,statusText:r.statusText,response:r.response,responseText:r.responseText}),o&&i&&m.hide(i)))}function v(e){return e&&"form"in e&&"data"in e&&!c.A.isEmpty(e.form)&&!c.A.isEmpty(e.data)&&e.form instanceof HTMLFormElement}function b(e){return"pc"===e?d.A:o}function w(e,t){var n,r=e.method,a=e.path,o=e.headers,i=e.data,s=e.mock,d=e.loading,p=void 0===(p=(e.onBeforeResponse,e.dataKey))?"data":p,f=void 0===(f=e.messageKey)?"message":f,m=void 0===(m=e.codeKey)?"code":m,h=void 0===(h=e.codeSuccess)?200:h,g=void 0===(g=e.showWarn)||g,A=(e=u(e,["method","path","headers","data","mock","loading","onBeforeResponse","dataKey","messageKey","codeKey","codeSuccess","showWarn"]),t.resolve),w=(t=t.reject,"".concat(l.Ay.v("加载中"),"...")),S=void 0!==(O=d.show)&&O,O=void 0===(O=d.text)?w:O,P=void 0===(P=d.el)?document.body:P,_=void 0===(_=d.zIndex)?19999:_,N=void 0===(N=d.size)?"default":N,x=b(d=void 0===(d=d.terminal)?"pc":d);if(S&&(n=x.show(P||document.body,O||w,_,N)),s)return setTimeout((function(){A(S?{data:a,hideIndicator:function(){x.hide(n)}}:a)}),200),{xhr:null,contentType:""};P=this.baseURL,O=this.config,_=(w=Object.assign(T.call(this),O,e)).timeout,N=w.withCredentials,s=w.responseType,O=w.interceptor,e=u(w,["timeout","withCredentials","responseType","interceptor"]);var C=new XMLHttpRequest;C.open(r,"".concat(P,"/").concat(a),!0),C.timeout=_,C.withCredentials=N,C.responseType=s||"",w="";if(!c.A.isEmpty(o)&&c.A.isObject(o))for(var L in"Content-Type"in o||v(i)||(o["Content-Type"]="".concat(y.CONTENT_TYPE_APPLICATION_JSON,";charset=utf-8")),w=null!=(P=o["Content-Type"])?P:"",o)C.setRequestHeader(L,o[L]);else!c.A.isEmpty(i)&&c.A.isRef(i)&&"get"!==r&&(v(i)?w=y.CONTENT_TYPE_MULTIPART_FORM_DATA:(w="".concat(y.CONTENT_TYPE_APPLICATION_JSON,";charset=utf-8"),C.setRequestHeader("Content-Type","".concat(y.CONTENT_TYPE_APPLICATION_JSON,";charset=utf-8"))));return function(e){var t=e.xhr,n=e.events,r=e.reject,a=n.onTimeout,o=(e=n.onLoadsStart,n.onProgress),i=n.onAbort,s=n.onError,d=n.onLoad;n=n.onLoadend,a&&t.addEventListener("timeout",(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a.apply(void 0,null!=e?e:{}),r.apply(void 0,null!=e?e:{})})),i&&t.addEventListener("abort",(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.apply(void 0,null!=e?e:{}),r.apply(void 0,null!=e?e:{})})),s&&t.addEventListener("error",(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];s.apply(void 0,null!=e?e:{}),r.apply(void 0,null!=e?e:{})})),e&&t.addEventListener("loadstart",e),o&&t.addEventListener("progress",o),d&&t.addEventListener("load",d),n&&t.addEventListener("loadend",n)}({xhr:C,events:e,reject:t}),C.onreadystatechange=E.bind(this,{xhr:C,interceptor:O,loading:{show:S,terminal:d,indicator:n},business:{dataKey:p,messageKey:f,codeKey:m,codeSuccess:h,showWarn:g},resolve:A,reject:t}),{xhr:C,contentType:w}}function S(e){var t,n=e.data,r=void 0===(r=e.contentType)?"":r;e=e.customSendJSONStringify;if(r.startsWith(y.CONTENT_TYPE_APPLICATION_JSON)&&c.A.isRef(n))return e?JSON.stringify(n,e):JSON.stringify(n);if(r.startsWith(y.CONTENT_TYPE_APPLICATION_X_WWW_FORM_URLENCODED)&&c.A.isObject(n))return Array.from(Object.keys(n)).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(n[e]))})).join("&");if(c.A.isObject(n)&&v(n))return t=new FormData(n.form),Array.from(Object.keys(n.data)).forEach((function(e){var r=n.data[e];r instanceof Function?t.append(e,r()):Array.isArray(r)?r.forEach((function(n){t.append(e,n)})):t.append(e,r)})),t;if(r.startsWith(y.CONTENT_TYPE_TEXT_PLAIN)){if(c.A.isString(n))return n;if(c.A.isObject(n))return e?JSON.stringify(n,e):JSON.stringify(n)}return null==(r=null==n?void 0:n.toString)?void 0:r.call(n)}function O(e,t){var n=this,r={},a=new Promise((function(a,o){a=(r=w.call(n,p(p(p(p({},T.call(n)),n.config),{method:e}),t),{resolve:a,reject:o})).xhr,o=r.contentType,a&&a.send(S.call(n,{data:t.data,contentType:o,customSendJSONStringify:t.customSendJSONStringify}))}));return p(p({},r),{promise:a})}function P(){if("undefined"!=typeof window){if(window.top&&window.top!==window&&window.top.postMessage("http_status_401","*"),f)return!1;window.location.href=c.A.casUrl({baseUrl:this.systemManagerBaseURL,enterUrl:window.location.href,defaultLocal:"zh_CN"})}}function _(){if(f=!0,"undefined"!=typeof window)return window.parent&&window.parent!==window?(window.parent.postMessage("http_status_402","*"),!1):void(window.location.href=c.A.casLogoutUrl({baseUrl:this.systemManagerBaseURL,enterUrl:window.location.href,params:"&code=402"}))}const N=y},18647:(e,t,n)=>{n.d(t,{A:()=>r});const r=n(54763).A},32517:(e,t,n)=>{n.d(t,{A:()=>r});const r=n(2382).A}}]);