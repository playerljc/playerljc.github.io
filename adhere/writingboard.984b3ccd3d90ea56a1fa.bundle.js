"use strict";(self.webpackChunk_ctsj_build=self.webpackChunk_ctsj_build||[]).push([[1572],{28781:function(e,t,n){n.r(t),n.d(t,{default:function(){return Y}});var r,l,u=n(1821),i=n.n(u),o=n(63107),a=n.n(o),c=n(90171),d=n(33240),s=n(39421),v=n(17464),f=n(41718),p=n(20725),m=n(60135),h=n(28850),y=n(29),g=n(68882),E=n(89934),P=n(8860);(l=r=r||{}).LINE="line",l.RECTANGLE="rectangle",l.CIRCLE="circle",l.TRIANGLE="triangle",l.FREE="free",l.RUBBER="rubber";var S=function(){return(S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},x=function(e,t){var n=e.wrapProps,l=e.toolProps,u=e.areaProps,i=e.defaultWidth,o=e.defaultColor,a=(e=(0,c.useState)(r.FREE))[0],d=e[1],s=(e=(0,c.useState)(null!=o?o:"#000"))[0],f=e[1],x=(e=(0,c.useState)(null!=i?i:2))[0],R=e[1],b=(0,c.useRef)(null),k=(e=(0,c.useMemo)((function(){return{gutter:20,wrapClassName:"".concat("adhere-ui-signature-core","-wrap")}}),[]),(0,c.useMemo)((function(){return{fit:!0}}),[])),C=(0,c.useMemo)((function(){return{autoFixed:!0}}),[]),w=(0,c.useMemo)((function(){return c.createElement(y.Z,null,c.createElement(h.Z,{direction:"vertical",size:20},c.createElement(m.Z,{style:{width:"100%"},value:x,precision:0,max:10,min:1,onChange:function(e){R(e),b.current&&b.current.setLineWidth(e)}}),c.createElement(E.Ie,{color:s,onChangeComplete:function(e){f(e.hex),b.current&&b.current.setStrokeStyle(e.hex)}}),c.createElement(v.ZP,{size:"large",block:!0,type:"primary",onClick:function(){var e;b.current&&(e=a===r.FREE?r.RUBBER:r.FREE,d(e),b.current.setMode(e))}},a===r.FREE?p.ZP.v("橡皮"):p.ZP.v("绘制")),c.createElement(v.ZP,{size:"large",block:!0,type:"primary",onClick:function(){b.current&&b.current.clear()}},p.ZP.v("清除"))))}),[a,x,s,l]),L=(0,c.useMemo)((function(){return c.createElement(y.Z,null,c.createElement(Z,{ref:b,defaultMode:a,defaultLineWidth:x,defaultStrokeStyle:s}))}),[u]);return(0,c.useImperativeHandle)(t,(function(){return{save:function(e,t,n){if(b.current)return b.current.toDataURL(null!=e?e:"#fff",null!=t?t:"image/png",null!=n?n:1)},isEmpty:function(){var e,t;return null==b||!b.current||(null==(t=null==(e=null==b?void 0:b.current)?void 0:e.isEmpty)?void 0:t.call(e))}}})),(0,g.Z)((function(){R(i)}),[i]),(0,g.Z)((function(){f(o)}),[o]),c.createElement(P.Z.TRBLC.LCLayout,S({},e,n,{lProps:S(S(S({},k),l),{children:w}),cProps:S(S(S({},C),u),{children:L})}))},R=(0,c.memo)((0,c.forwardRef)(x)),b=function(){return(b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},k="adhere-ui-signature",C=function(e,t){var n=e.className,r=e.style,l=e.value,u=e.onChange,o=e.modalProps,a=e.coreProps,d=(0,c.useRef)(null),s=(e=(0,c.useCallback)((function(){return c.createElement("div",{className:i()("".concat(k,"-mask")),onClick:function(){var e=f.Z.Modal({config:b({title:p.ZP.v("编辑签名"),width:"60%",maskClosable:!1,footer:[c.createElement(v.ZP,{key:"submit",type:"primary",title:p.ZP.v("保存"),onClick:function(){var t;d.current&&(d.current.isEmpty()?u&&(u(""),e.close()):(t=d.current.save(),u&&(u(t),e.close())))}},p.ZP.v("保存"))]},null!=o?o:{}),children:c.createElement(R,b({ref:d},a))})}},p.ZP.v("编辑签名"))}),[a,l,u]),(0,c.useCallback)((function(){return l?c.createElement("img",{src:l,alt:""}):null}),[l]));return(0,c.useImperativeHandle)(t,(function(){return{isEmpty:function(){return!l}}})),c.createElement("div",{className:i()(k,n),style:null!=r?r:{}},e(),s())},w=(0,c.memo)((0,c.forwardRef)(C));w.SignatureCore=R;var L=w,W=function(){return(W=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},T=function(e,t){var n=void 0===(n=e.defaultMode)?r.FREE:n,l=void 0===(l=e.defaultLineWidth)?2:l,u=void 0===(u=e.defaultStrokeStyle)?"#000":u,o=e.resizeTime,v=void 0===o?300:o,f=(0,c.useRef)(null),p=(0,c.useRef)(null),m=(0,c.useRef)(null),h=(0,c.useRef)(null),y=(0,c.useRef)(null),g=(0,c.useRef)(null),E=(0,c.useRef)(n),P=(0,c.useRef)(l),S=(0,c.useRef)(u),x=(0,c.useRef)([]),R=(0,c.useRef)(0),b=(0,c.useRef)(new Map([[r.FREE,{draw:function(e){var t,n=e.sourcePoint;e=e.targetPoint;null!=(t=null==m?void 0:m.current)&&t.beginPath(),null!=(t=null==m?void 0:m.current)&&t.moveTo(n.x,n.y),null!=(t=null==m?void 0:m.current)&&t.lineTo(e.x,e.y),x.current.push({shape:E.current,sourcePoint:n,targetPoint:e}),k({lineWidth:null==P?void 0:P.current,strokeStyle:null==S?void 0:S.current}),null!=(t=null==m?void 0:m.current)&&t.stroke()},drawStack:function(e){var t;null!=(t=null==m?void 0:m.current)&&t.beginPath(),null!=(t=null==m?void 0:m.current)&&t.moveTo(e.sourcePoint.x,e.sourcePoint.y),null!=(t=null==m?void 0:m.current)&&t.lineTo(e.targetPoint.x,e.targetPoint.y),k({lineWidth:e.lineWidth,strokeStyle:e.strokeStyle}),null!=(t=null==m?void 0:m.current)&&t.stroke()},mouseup:function(e){Z({sourcePoint:g.current,targetPoint:e})}}],[r.LINE,{draw:function(e){var t;e=e.targetPoint;null!=(t=null==m?void 0:m.current)&&t.clearRect(0,0,null==(t=null==p?void 0:p.current)?void 0:t.width,null==(t=null==p?void 0:p.current)?void 0:t.height),T(),null!=(t=null==m?void 0:m.current)&&t.beginPath(),null!=(t=null==m?void 0:m.current)&&t.moveTo(null==(t=null==y?void 0:y.current)?void 0:t.x,null==(t=null==y?void 0:y.current)?void 0:t.y),null!=(t=null==m?void 0:m.current)&&t.lineTo(e.x,e.y),k({lineWidth:null==P?void 0:P.current,strokeStyle:null==S?void 0:S.current}),null!=(t=null==m?void 0:m.current)&&t.stroke()},drawStack:function(e){var t;null!=(t=null==m?void 0:m.current)&&t.beginPath(),null!=(t=null==m?void 0:m.current)&&t.moveTo(e.sourcePoint.x,e.sourcePoint.y),null!=(t=null==m?void 0:m.current)&&t.lineTo(e.targetPoint.x,e.targetPoint.y),k({lineWidth:e.lineWidth,strokeStyle:e.strokeStyle}),null!=(t=null==m?void 0:m.current)&&t.stroke()},mouseup:function(e){var t;x.current.push({shape:E.current,lineWidth:null==(t=null==m?void 0:m.current)?void 0:t.lineWidth,strokeStyle:null==(t=null==m?void 0:m.current)?void 0:t.strokeStyle,sourcePoint:y.current,targetPoint:e})}}],[r.RECTANGLE,{draw:function(e){e=e.targetPoint;var t,n=(null!=(n=null==m?void 0:m.current)&&n.clearRect(0,0,null==(n=null==p?void 0:p.current)?void 0:n.width,null==(n=null==p?void 0:p.current)?void 0:n.height),T(),null!=(n=null==m?void 0:m.current)&&n.beginPath(),B({startPoint:y.current,targetPoint:e}));null!=(t=null==m?void 0:m.current)&&t.rect(n.x,n.y,Math.abs(e.x-(null==(t=null==y?void 0:y.current)?void 0:t.x)),Math.abs(e.y-(null==(n=null==y?void 0:y.current)?void 0:n.y))),k({lineWidth:null==P?void 0:P.current,strokeStyle:null==S?void 0:S.current}),null!=(t=null==m?void 0:m.current)&&t.stroke()},drawStack:function(e){var t;null!=(t=null==m?void 0:m.current)&&t.beginPath(),null!=(t=null==m?void 0:m.current)&&t.rect(e.x,e.y,e.width,e.height),k({lineWidth:e.lineWidth,strokeStyle:e.strokeStyle}),null!=(t=null==m?void 0:m.current)&&t.stroke()},mouseup:function(e){var t,n=B({startPoint:y.current,targetPoint:e});x.current.push({shape:E.current,lineWidth:null==(t=null==m?void 0:m.current)?void 0:t.lineWidth,strokeStyle:null==(t=null==m?void 0:m.current)?void 0:t.strokeStyle,x:n.x,y:n.y,width:Math.abs(e.x-(null==(t=null==y?void 0:y.current)?void 0:t.x)),height:Math.abs(e.y-(null==(n=null==y?void 0:y.current)?void 0:n.y))})}}],[r.CIRCLE,{draw:function(e){e=e.targetPoint;var t,n=(null!=(n=null==m?void 0:m.current)&&n.clearRect(0,0,null==(n=null==p?void 0:p.current)?void 0:n.width,null==(n=null==p?void 0:p.current)?void 0:n.height),T(),null!=(n=null==m?void 0:m.current)&&n.beginPath(),B({startPoint:y.current,targetPoint:e}));e=L({p2:e,p1:y.current});null!=(t=null==m?void 0:m.current)&&t.ellipse(n.x,n.y,e,e,45*Math.PI/180,0,2*Math.PI),k({lineWidth:null==P?void 0:P.current,strokeStyle:null==S?void 0:S.current}),null!=(t=null==m?void 0:m.current)&&t.stroke()},drawStack:function(e){var t;null!=(t=null==m?void 0:m.current)&&t.beginPath(),null!=(t=null==m?void 0:m.current)&&t.ellipse(e.x,e.y,e.radiusX,e.radiusY,e.rotation,e.startAngle,e.endAngle),k({lineWidth:e.lineWidth,strokeStyle:e.strokeStyle}),null!=(t=null==m?void 0:m.current)&&t.stroke()},mouseup:function(e){var t,n=B({startPoint:y.current,targetPoint:e});e=L({p2:e,p1:null==y?void 0:y.current});x.current.push({shape:E.current,lineWidth:null==(t=null==m?void 0:m.current)?void 0:t.lineWidth,strokeStyle:null==(t=null==m?void 0:m.current)?void 0:t.strokeStyle,x:n.x,y:n.y,radiusX:e,radiusY:e,rotation:45*Math.PI/180,startAngle:0,endAngle:2*Math.PI})}}],[r.TRIANGLE,{draw:function(e){e=e.targetPoint;var t=(null!=(t=null==m?void 0:m.current)&&t.clearRect(0,0,null==(t=null==p?void 0:p.current)?void 0:t.width,null==(t=null==p?void 0:p.current)?void 0:t.height),T(),null!=(t=null==m?void 0:m.current)&&t.beginPath(),C({startPoint:y.current,targetPoint:e}));null!=(e=null==m?void 0:m.current)&&e.moveTo(t[0].x,t[0].y),null!=(e=null==m?void 0:m.current)&&e.lineTo(t[1].x,t[1].y),null!=(e=null==m?void 0:m.current)&&e.lineTo(t[2].x,t[2].y),null!=(e=null==m?void 0:m.current)&&e.closePath(),k({lineWidth:null==P?void 0:P.current,strokeStyle:null==S?void 0:S.current}),null!=(t=null==m?void 0:m.current)&&t.stroke()},drawStack:function(e){var t;null!=(t=null==m?void 0:m.current)&&t.beginPath(),null!=(t=null==m?void 0:m.current)&&t.moveTo(e.points[0].x,e.points[0].y),null!=(t=null==m?void 0:m.current)&&t.lineTo(e.points[1].x,e.points[1].y),null!=(t=null==m?void 0:m.current)&&t.lineTo(e.points[2].x,e.points[2].y),null!=(t=null==m?void 0:m.current)&&t.closePath(),k({lineWidth:e.lineWidth,strokeStyle:e.strokeStyle}),null!=(t=null==m?void 0:m.current)&&t.stroke()},mouseup:function(e){var t;e=C({startPoint:y.current,targetPoint:e});x.current.push({shape:E.current,lineWidth:null==(t=null==m?void 0:m.current)?void 0:t.lineWidth,strokeStyle:null==(t=null==m?void 0:m.current)?void 0:t.strokeStyle,points:e})}}],[r.RUBBER,{draw:function(e){var t,n=e.sourcePoint;e=e.targetPoint;null!=(t=null==m?void 0:m.current)&&t.beginPath(),null!=(t=null==m?void 0:m.current)&&t.moveTo(n.x,n.y),null!=(t=null==m?void 0:m.current)&&t.lineTo(e.x,e.y),x.current.push({shape:E.current,sourcePoint:n,targetPoint:e}),m.current.lineWidth=15,m.current.strokeStyle="#fff",m.current.lineCap="round",m.current.lineJoin="round",null!=(t=null==m?void 0:m.current)&&t.stroke()},drawStack:function(e){var t;null!=(t=null==m?void 0:m.current)&&t.beginPath(),null!=(t=null==m?void 0:m.current)&&t.moveTo(e.sourcePoint.x,e.sourcePoint.y),null!=(t=null==m?void 0:m.current)&&t.lineTo(e.targetPoint.x,e.targetPoint.y),m.current.lineWidth=15,m.current.strokeStyle="#fff",m.current.lineCap="round",m.current.lineJoin="round",null!=(t=null==m?void 0:m.current)&&t.stroke()},mouseup:function(e){Z({sourcePoint:g.current,targetPoint:e})}}]]));function k(e){var t=e.lineWidth;e=e.strokeStyle;m.current.lineWidth=t,m.current.strokeStyle=e,m.current.lineCap="round",m.current.lineJoin="round"}function C(e){var t=e.startPoint,n=B({startPoint:t,targetPoint:e=e.targetPoint}),r=Math.abs(e.x-t.x);e=Math.abs(e.y-t.y);return[{x:n.x,y:n.y+e},{x:n.x+r/2,y:n.y},{x:n.x+r,y:n.y+e}]}function w(e){var t=e.clientX,n=(e=e.clientY,null==(n=null==p?void 0:p.current)?void 0:n.getBoundingClientRect());return{x:t-n.x,y:e-n.y}}function L(e){var t=e.p1,n=(e=e.p2,t.x),r=(t=t.y,e.x);e=e.y;return Math.sqrt(Math.pow(r-n,2)+Math.pow(e-t,2))}function T(){for(var e=0;e<x.current.length;e++){var t=x.current[e];b.current.get(t.shape).drawStack(t)}}function B(e){var t=e.startPoint;return(e=e.targetPoint).x<=t.x&&e.y<=t.y?e:e.x<=t.x&&e.y>=t.y?{x:e.x,y:t.y}:e.x>=t.x&&e.y<=t.y?{x:t.x,y:e.y}:e.x>=t.x&&e.y>=t.y?t:void 0}function Z(e){var t,n=e.sourcePoint;e=e.targetPoint;(null==(t=null==b?void 0:b.current)?void 0:t.get(E.current)).draw({sourcePoint:n,targetPoint:e})}function M(e){F(e)}function V(e){F(W(W({},e),{clientX:e.targetTouches[0].clientX,clientY:e.targetTouches[0].clientY}))}function I(e){O(e)}function N(e){O(W(W({},e),{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}))}function D(e){var t=e.clientX;e=e.clientY;y.current=g.current=w({clientX:t,clientY:e}),null!=(t=null==f?void 0:f.current)&&t.addEventListener("mousemove",M),null!=(e=null==f?void 0:f.current)&&e.addEventListener("mouseup",I),null!=(t=null==f?void 0:f.current)&&t.addEventListener("touchmove",V),null!=(e=null==f?void 0:f.current)&&e.addEventListener("touchend",N)}function F(e){e=w({clientX:e.clientX,clientY:e.clientY}),Z({sourcePoint:g.current,targetPoint:e}),g.current=e}function O(e){var t;e=w({clientX:e.clientX,clientY:e.clientY});null!=(t=null==b?void 0:b.current.get(E.current))&&t.mouseup(e),y.current=null,(g.current=null)!=(t=null==f?void 0:f.current)&&t.removeEventListener("mousemove",M),null!=(e=null==f?void 0:f.current)&&e.removeEventListener("mouseup",I),null!=(t=null==f?void 0:f.current)&&t.removeEventListener("touchmove",V),null!=(e=null==f?void 0:f.current)&&e.removeEventListener("touchend",N)}function A(){var e;null!=(e=null==m?void 0:m.current)&&e.clearRect(0,0,null==(e=null==p?void 0:p.current)?void 0:e.width,null==(e=null==p?void 0:p.current)?void 0:e.height),g.current=y.current=null,x.current=[],R.current=0}function Y(e,t,n){var r,l;if(e){for(var u=(e=d.Z.colorToRgb(e))[0],i=e[1],o=e[2],a=[],c=null==(e=null==m?void 0:m.current)?void 0:e.getImageData(0,0,null==(e=null==p?void 0:p.current)?void 0:e.width,null==(e=null==p?void 0:p.current)?void 0:e.height),s=0;s<(null==(r=null==c?void 0:c.data)?void 0:r.length);s+=4)0===c.data[s+3]&&(c.data[s]=u,c.data[s+1]=i,c.data[s+2]=o,c.data[s+3]=255,a.push(s),a.push(s+1),a.push(s+2),a.push(s+3));return null!=(e=null==m?void 0:m.current)&&e.putImageData(c,0,0),e=null==(e=null==p?void 0:p.current)?void 0:e.toDataURL(t||"image/png",n),c=null==(l=null==m?void 0:m.current)?void 0:l.getImageData(0,0,null==(l=null==p?void 0:p.current)?void 0:l.width,null==(l=null==p?void 0:p.current)?void 0:l.height),a.forEach((function(e){c.data[e]=0})),null!=(l=null==m?void 0:m.current)&&l.putImageData(c,0,0),e}return null==(l=null==p?void 0:p.current)?void 0:l.toDataURL(t||"image/png",n)}function G(){var e,t=null==(e=null==m?void 0:m.current)?void 0:e.getImageData(0,0,null==(e=null==p?void 0:p.current)?void 0:e.width,null==(e=null==p?void 0:p.current)?void 0:e.height);return!t.data.length||!t.data.some((function(e){return e!==t.data[0]}))}return(0,c.useImperativeHandle)(t,(function(){return{setMode:function(e){E.current=e},setStrokeStyle:function(e){S.current=e},setLineWidth:function(e){P.current=e},clear:A,toDataURL:Y,isEmpty:G}})),(0,c.useLayoutEffect)((function(){m.current=null==(t=null==p?void 0:p.current)?void 0:t.getContext("2d");var e,t=a()((function(){var e;p.current.width=null==(e=null==f?void 0:f.current)?void 0:e.offsetWidth,p.current.height=null==(e=null==f?void 0:f.current)?void 0:e.offsetHeight,null!=(e=null==m?void 0:m.current)&&e.clearRect(0,0,null==(e=null==p?void 0:p.current)?void 0:e.width,null==(e=null==p?void 0:p.current)?void 0:e.height),T()}),v);return h.current=new s.do(t),null!=(e=null==(t=null==h?void 0:h.current)?void 0:t.observe)&&e.call(t,document.body),function(){var e;return null==(e=null==h?void 0:h.current)?void 0:e.disconnect()}}),[]),(0,c.useLayoutEffect)((function(){var e;function t(e){D(e)}function n(e){D(W(W({},e),{clientX:e.targetTouches[0].clientX,clientY:e.targetTouches[0].clientY}))}return null!=(e=null==f?void 0:f.current)&&e.addEventListener("mousedown",t),null!=(e=null==f?void 0:f.current)&&e.addEventListener("touchstart",n),function(){var e;null!=(e=null==f?void 0:f.current)&&e.removeEventListener("mousedown",t),null!=(e=null==f?void 0:f.current)&&e.removeEventListener("touchstart",n)}}),[]),c.createElement("div",{ref:f,className:i()("adhere-ui-writingboard",null!=(o=e.className)?o:""),style:null!=(n=e.style)?n:{}},c.createElement("canvas",{ref:p}))},B=(0,c.memo)((0,c.forwardRef)(T));B.Signature=L;var Z=B,M=Z,V=n(96032),I=n(70951),N=n(22613),D=n(29529),F="ApTDwNCkWNLfTsJxSmwU";const{Option:O}=N.default;var A=()=>{const e=(0,c.useRef)(),[t,n]=(0,c.useState)("line"),[r,l]=(0,c.useState)("#000"),[u,i]=(0,c.useState)(2);return c.createElement(I.default,{direction:"horizontal",className:F},c.createElement(I.default.Fixed,{style:{width:300}},c.createElement(h.Z,{direction:"vertical"},c.createElement(y.Z,{title:"绘制模式"},c.createElement(D.ZP.Group,{defaultValue:"line",value:t,onChange:t=>{n(t.target.value),e.current.setMode(t.target.value)},buttonStyle:"solid"},c.createElement(h.Z,{direction:"horizontal",wrap:!0},c.createElement(D.ZP.Button,{value:"line"},"直线"),c.createElement(D.ZP.Button,{value:"rectangle"},"矩形"),c.createElement(D.ZP.Button,{value:"circle"},"圆形"),c.createElement(D.ZP.Button,{value:"triangle"},"三角形"),c.createElement(D.ZP.Button,{value:"free"},"自由绘制"),c.createElement(D.ZP.Button,{value:"rubber"},"橡皮")))),c.createElement(y.Z,{title:"线条颜色"},c.createElement(E.xS,{color:r,onChangeComplete:t=>{l(t.hex),e.current.setStrokeStyle(t.hex)}})),c.createElement(y.Z,{title:"线条宽度"},c.createElement(N.default,{value:u,onChange:t=>{i(t),e.current.setLineWidth(t)}},c.createElement(O,{value:2},"2"),c.createElement(O,{value:3},"3"),c.createElement(O,{value:4},"4"),c.createElement(O,{value:5},"5"),c.createElement(O,{value:6},"6"))),c.createElement(y.Z,{title:"操作"},c.createElement(h.Z,{direction:"horizontal",wrap:!0},c.createElement(v.ZP,{type:"primary",onClick:()=>{e.current.clear()}},"清空"),c.createElement(v.ZP,{type:"primary",onClick:()=>{const t=e.current.toDataURL("#fff","image/png",1),n=document.createElement("a");n.href=t,n.download="img";const r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)}},"保存图片"))))),c.createElement(I.default.Auto,{fit:!0,style:{border:"1px solid #ccc"}},c.createElement(M,{ref:e,defaultMode:t,defaultLineWidth:u,defaultStrokeStyle:r})))},Y=()=>{const e=c.createRef(),[t,n]=(0,c.useState)("");return c.createElement(V.ZP,null,c.createElement(V.$0,{title:"WritingBoard"},c.createElement("p",null,"写字板")),c.createElement(V.e0,{title:"代码演示",config:[{id:"p1",name:"基本使用",mode:"code",scope:{React:c},cardProps:{description:{title:"基本使用",info:"基本使用"}},codeText:"\n  import React from 'react';\n  import { WritingBoard } from '@baifendian/adhere';\n\n  export default () => (\n    <div\n      style={{\n        position: 'relative',\n        height: 300,\n        overflowY: 'hidden',\n        border: '1px solid #ccc',\n      }}\n    >\n      <div style={{ height: '100%' }} ref={ref1}>\n        <WritingBoard />\n      </div>\n    </div>\n  )\n            ",type:"PlayGround",renderChildren:()=>c.createElement("div",{style:{position:"relative",height:300,overflowY:"hidden",border:"1px solid #ccc"}},c.createElement("div",{style:{height:"100%"},ref:e},c.createElement(M,null)))},{id:"p2",name:"简易写字板",cardProps:{description:{title:"简易写字板",info:"切换类型、颜色和粗细"}},type:"PlayGroundMulit",config:[{title:"index.jsx",mode:"code",scope:{React:c},codeText:"\n  import React from 'react';\n  import Simple from './simple';\n\n  export default () => <Simple />\n                "},{title:"simple.jsx",mode:"code",scope:{React:c},codeText:'\n  import React, { useState, useRef } from \'react\';\n  import { Button, Card, Radio, Select, Space } from \'antd\';\n  import { SketchPicker } from \'react-color\';\n  import { FlexLayout, WritingBoard } from \'@baifendian/adhere\';\n\n  import styles from \'./index.less\';\n\n  const { Option } = Select;\n\n  export default () => {\n    const ref = useRef();\n    const [mode, setMode] = useState(\'line\');\n    const [color, setColor] = useState(\'#000\');\n    const [width, setWidth] = useState(2);\n\n    return (\n      <FlexLayout direction="horizontal" className={styles.Wrap}>\n        <FlexLayout.Fixed style={{ width: 300 }}>\n          <Space direction="vertical">\n            <Card title="绘制模式">\n              <Radio.Group\n                defaultValue="line"\n                value={mode}\n                onChange={(e) => {\n                  setMode(e.target.value);\n                  ref.current.setMode(e.target.value);\n                }}\n                buttonStyle="solid"\n              >\n                <Space direction="horizontal" wrap>\n                  <Radio.Button value="line">直线</Radio.Button>\n                  <Radio.Button value="rectangle">矩形</Radio.Button>\n                  <Radio.Button value="circle">圆形</Radio.Button>\n                  <Radio.Button value="triangle">三角形</Radio.Button>\n                  <Radio.Button value="free">自由绘制</Radio.Button>\n                  <Radio.Button value="rubber">橡皮</Radio.Button>\n                </Space>\n              </Radio.Group>\n            </Card>\n\n            <Card title="线条颜色">\n              <SketchPicker\n                color={color}\n                onChangeComplete={(c) => {\n                  setColor(c.hex);\n                  ref.current.setStrokeStyle(c.hex);\n                }}\n              />\n            </Card>\n\n            <Card title="线条宽度">\n              <Select\n                value={width}\n                onChange={(v) => {\n                  setWidth(v);\n                  ref.current.setLineWidth(v);\n                }}\n              >\n                <Option value={2}>2</Option>\n                <Option value={3}>3</Option>\n                <Option value={4}>4</Option>\n                <Option value={5}>5</Option>\n                <Option value={6}>6</Option>\n              </Select>\n            </Card>\n\n            <Card title="操作">\n              <Space direction="horizontal" wrap>\n                <Button\n                  type="primary"\n                  onClick={() => {\n                    ref.current.clear();\n                  }}\n                >\n                  清空\n                </Button>\n\n                <Button\n                  type="primary"\n                  onClick={() => {\n                    const base64 = ref.current.toDataURL();\n\n                    debugger;\n\n                    const save_link = document.createElement(\'a\');\n                    save_link.href = base64;\n                    save_link.download = \'img\';\n\n                    const event = document.createEvent(\'MouseEvents\');\n                    event.initMouseEvent(\n                      \'click\',\n                      true,\n                      false,\n                      window,\n                      0,\n                      0,\n                      0,\n                      0,\n                      0,\n                      false,\n                      false,\n                      false,\n                      false,\n                      0,\n                      null,\n                    );\n                    save_link.dispatchEvent(event);\n                  }}\n                >\n                  保存图片\n                </Button>\n              </Space>\n            </Card>\n          </Space>\n        </FlexLayout.Fixed>\n\n        <FlexLayout.Auto fit style={{ border: \'1px solid #ccc\' }}>\n          <WritingBoard\n            ref={ref}\n            defaultMode={mode}\n            defaultLineWidth={width}\n            defaultStrokeStyle={color}\n          />\n        </FlexLayout.Auto>\n      </FlexLayout>\n    );\n  };\n                '}],renderChildren:()=>c.createElement(A,null)},{id:"p3",name:"签名",mode:"code",scope:{React:c},cardProps:{description:{title:"签名",info:"签名"}},codeText:"\n  import React, { useState } from 'react';\n  import { WritingBoard } from '@baifendian/adhere';\n\n  export default () => {\n    const [value, setValue] = useState('');\n\n    return (\n      <div>\n        <p>签名</p>\n        <div style={{ width: 200, height: 300, border: '1px solid #ccc' }}>\n          <WritingBoard.Signature value={value} onChange={(v) => setValue(v)} />\n        </div>\n      </div>\n    )\n  };\n            ",type:"PlayGround",renderChildren:()=>c.createElement("div",null,c.createElement("p",null,"签名"),c.createElement("div",{style:{width:200,height:300,border:"1px solid #ccc"}},c.createElement(M.Signature,{value:t,onChange:e=>n(e)})))}]}),c.createElement(V.sB,{title:"WritingBoard",config:[{border:!0,title:"属性",data:[{params:"className",desc:"附加的样式表",type:"string",defaultVal:""},{params:"style",desc:"附加的样式",type:"React.CSSProperties",defaultVal:""},{params:"defaultMode",desc:"绘制模式",type:"\n                  {\n                    // 直线\n                    LINE = 'line',\n                    // 矩形\n                    RECTANGLE = 'rectangle',\n                    // 圆形\n                    CIRCLE = 'circle',\n                    // 三角形\n                    TRIANGLE = 'triangle',\n                    // 自由绘制\n                    FREE = 'free',\n                    // 橡皮\n                    RUBBER = 'rubber',\n                  }\n                ",defaultVal:"line"},{params:"defaultStrokeStyle",desc:"线条颜色",type:"string",defaultVal:"#000"},{params:"defaultLineWidth",desc:"线条宽度",type:"number",defaultVal:"1"},{params:"resizeTime",desc:"防抖的事件",type:"number",defaultVal:"300"}]}]}),c.createElement(V.sB,{title:"Signature",config:[{border:!0,title:"属性",data:[{params:"className",desc:"附加的样式表",type:"string",defaultVal:""},{params:"style",desc:"附加的样式",type:"React.CSSProperties",defaultVal:""},{params:"modalProps",desc:"弹出窗口设置",type:"ModalProps",defaultVal:""},{params:"coreProps",desc:"SignatureCore设置",type:"SignatureCoreProps",defaultVal:""},{params:"value",desc:"base64",type:"string",defaultVal:""},{params:"onChange",desc:"获取base64",type:"(base64?: string) => void",defaultVal:""}]}]}),c.createElement(V.sB,{title:"SignatureCore",config:[{border:!0,title:"属性",data:[{params:"defaultWidth",desc:"线条默认宽度",type:"number",defaultVal:"2"},{params:"defaultColor",desc:"默认颜色",type:"string",defaultVal:"#000"},{params:"wrapProps",desc:"最外层配置",type:"SignatureCoreWrapProps",defaultVal:""},{params:"toolProps",desc:"工具栏设置",type:"SignatureCoreToolProps",defaultVal:""},{params:"areaProps",desc:"编辑区设置",type:"SignatureCoreAreaProps",defaultVal:""}]}]}),c.createElement(V.ae,{title:"WritingBoard",config:[{border:!0,title:"WritingBoard",data:[{name:"setMode",desc:"设置模式",modifier:"public",params:[{name:"mode",desc:"模式",type:"\n                      {\n                        // 直线\n                        LINE = 'line',\n                        // 矩形\n                        RECTANGLE = 'rectangle',\n                        // 圆形\n                        CIRCLE = 'circle',\n                        // 三角形\n                        TRIANGLE = 'triangle',\n                        // 自由绘制\n                        FREE = 'free',\n                        // 橡皮\n                        RUBBER = 'rubber',\n                      }\n                    ",defaultVal:"",required:""}],returnType:"",returnDesc:""},{name:"setStrokeStyle",desc:"设置描边样式",modifier:"public",params:[{name:"style",desc:"样式",type:"style",defaultVal:"",required:""}],returnType:"",returnDesc:""},{name:"setLineWidth",desc:"设置线条样式",modifier:"public",params:[{name:"width",desc:"样式",type:"number",defaultVal:"",required:""}],returnType:"",returnDesc:""},{name:"clear",desc:"清空画布",modifier:"public",params:[],returnType:"",returnDesc:""},{name:"isEmpty",desc:"判断是否为空",modifier:"public",params:[],returnType:"boolean",returnDesc:""},{name:"toDataURL",desc:"获取画布数据",modifier:"public",params:[{name:"backgroundColor",desc:"背景颜色",type:"string",defaultVal:"#fff",required:""},{name:"type",desc:"mimeType",type:"string",defaultVal:"image/png",required:""},{name:"quality",desc:"图片质量",type:"number",defaultVal:"1.0",required:""}],returnType:"",returnDesc:""}]}]}),c.createElement(V.ae,{title:"SignatureCore",config:[{border:!0,title:"SignatureCore",data:[{name:"save",desc:"保存",modifier:"public",params:[{name:"backgroundColor",desc:"背景颜色",type:"string",defaultVal:"#fff",required:""},{name:"type",desc:"mimeType",type:"string",defaultVal:"image/png",required:""},{name:"quality",desc:"图片质量",type:"number",defaultVal:"1.0",required:""}],returnType:"",returnDesc:""},{name:"isEmpty",desc:"判断是否为空",modifier:"public",params:[],returnType:"boolean",returnDesc:""}]}]}),c.createElement(V.ae,{title:"Signature",config:[{border:!0,title:"Signature",data:[{name:"isEmpty",desc:"判断是否为空",modifier:"public",params:[],returnType:"boolean",returnDesc:""}]}]}))}},96032:function(e,t,n){n.d(t,{$0:function(){return a},ae:function(){return s},e0:function(){return c},sB:function(){return d}});var r=n(70517),l=n(6692),u=n(90171);const{PlayGroundPageContext:i,PlayGroundPage:o}=l.default,{Section:a,CodeBoxSection:c,PropsSection:d,FunctionPropsSection:s}=o;t.ZP=function(e){let{children:t,...n}=e;const[l,a]=(0,u.useState)(),c=(0,u.useRef)();return(0,u.useEffect)((()=>{a(c.current.parentElement.parentElement)}),[]),u.createElement(i.Provider,{value:{scrollEl:l}},u.createElement(o,(0,r.Z)({ref:c},n),t))}},70951:function(e,t,n){var r=n(8860);t.default=r.Z}}]);