"use strict";(self.webpackChunk_ctsj_build=self.webpackChunk_ctsj_build||[]).push([[4570],{97048:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(1821),a=n.n(r),l=n(90171),o=n(67712),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i="adhere-ui-backtopanimation",u=function(e){var t,n=e.className,r=e.style,u=void 0===(t=e.zIndex)?o.Z.Dict.value.ResourceNormalMaxZIndex.value:t,s=e.getContainer,d=e.onScrollTop,m=void 0===(t=e.duration)?300:t,p=(0,l.useRef)(null),f=(0,l.useRef)(null),y=(0,l.useRef)(!1);function v(){return"updateInterval"in screen?screen.updateInterval:16.7}return(0,l.useLayoutEffect)((function(){f.current=document.body.querySelector(".".concat(i,"-mask")),f.current||(f.current=document.createElement("div"),f.current.className="".concat(i,"-mask"),f.current.style.zIndex="".concat(u),document.body.appendChild(f.current))}),[]),(0,l.useLayoutEffect)((function(){var e=s();function t(){0!==e.scrollTop?p.current.style.display="block":p.current.style.display="none"}return e.addEventListener("scroll",t),function(){return e.removeEventListener("scroll",t)}})),l.createElement("div",{ref:p,className:a()(i,null!=n?n:""),style:c({zIndex:u},null!=r?r:{}),onClick:function(){y.current||e.onTrigger&&e.onTrigger().then((function(){y.current=!0,f.current.style.display="block";var e=s(),t=e.scrollTop,n=t,r=e.scrollHeight/(m/v()+(m%v()!=0?1:0));"undefined"!=typeof window&&window.requestAnimationFrame((function a(){function l(){f.current.style.display="none",y.current=!1}t<0?0<n+r?n=0:n+=r:n-r<0?n=0:n-=r,e.scrollTop=n,d&&d(n),t<0?0<=n?l():"undefined"!=typeof window&&window.requestAnimationFrame(a):n<=0?l():"undefined"!=typeof window&&window.requestAnimationFrame(a)}))}))}})},s=(0,l.memo)(u)},57123:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(30811),a=n(67712),l="adhere-ui-globalindicator",o=a.Z.Dict.value.ResourceNormalMaxZIndex.value,c=new Set,i={show:function(e,t,n,a){void 0===e&&(e=document.body),void 0===t&&(t=""),void 0===n&&(n=o),void 0===a&&(a="default");var i=(t=((i=document.createElement("div")).innerHTML='\n      <div class="'.concat(l,'" style="z-index: ').concat(n||o,'">\n       <span class="').concat(l,'-dot"></span>\n       ').concat(t&&'<div class="'.concat(l,'-text">').concat(t,"</div>"),"\n      </div>"),i.firstElementChild)).querySelector(".".concat(l,"-dot")),u=(a=new Map([["small",.1],["default",.2],["large",.3]]).get(a),document.documentElement.style.getPropertyValue("--adhere-color-primary"));return new r.$({lines:4,length:0,width:52,radius:29,scale:a,corners:1,speed:2.1,rotate:19,animation:"spinner-line-fade-quick",direction:1,color:u,fadeColor:"transparent",top:"46%",left:"50%",shadow:"0 0 1px transparent",zIndex:n,className:"".concat(l,"-spinner"),position:"absolute"}).spin(i),e===document.body&&(t.style.position="fixed"),e.appendChild(t),c.add(t),t},hide:function(e){var t,n;if(e)try{null!=(n=null==(t=null==e?void 0:e.parentElement)?void 0:t.removeChild)&&n.call(t,e),c.delete(e)}catch(e){}},hideAll:function(){Array.from(c.values()).forEach((function(e){var t,n;try{null!=(n=null==(t=null==e?void 0:e.parentElement)?void 0:t.removeChild)&&n.call(t,e)}catch(e){}})),c.clear()}}},11353:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(1821),a=n.n(r),l=n(90171),o=n(20725),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},u="adhere-ui-scrollload",s=function(e,t){var n=void 0===(n=e.className)?"":n,r=void 0===(r=e.style)?{}:r,s=e.children,d=e.getScrollContainer,m=void 0===(b=e.distance)?50:b,p=e.onScrollBottom,f=e.onEmptyClick,y=e.onErrorClick,v=e.renderLoading,h=void 0===(b=e.loadClassName)?"":b,E=void 0===(b=e.loadStyle)?{}:b,g=e.renderEmpty,C=void 0===(b=e.emptyClassName)?"":b,R=void 0===(b=e.emptyStyle)?{}:b,P=e.renderError,k=void 0===(b=e.errorClassName)?"":b,Z=void 0===(b=e.errorStyle)?{}:b,b=i(e,["className","style","children","getScrollContainer","distance","onScrollBottom","onEmptyClick","onErrorClick","renderLoading","loadClassName","loadStyle","renderEmpty","emptyClassName","emptyStyle","renderError","errorClassName","errorStyle"]),N=(0,l.useRef)(!1),x=(0,l.useRef)(null),w=(0,l.useRef)(null),T=(0,l.useRef)(null),L=(0,l.useRef)(null);function M(){return d?d():x.current}function A(){var e=(t=M()).scrollHeight-t.offsetHeight,t=t.scrollTop;p&&Math.abs(t-e)<=m&&(N.current||(N.current=!0,w.current.style.display="flex",p((function(e){w.current.style.display="none","empty"===e?T.current.style.display="block":"error"===e&&(L.current.style.display="block"),N.current=!1}))))}function S(){f&&f()}function F(){y&&y()}function O(){w.current.style.display="none",L.current.style.display="none",T.current.style.display="none"}e=(0,l.useCallback)((function(){return v?l.createElement("div",{className:a()("".concat(u,"-load"),h),style:null!=E?E:{},ref:w},v()):l.createElement("div",{className:a()("".concat(u,"-load"),"standard",h),style:null!=E?E:{},ref:w},o.ZP.v("数据加载中"))}),[v,h,E]);var j=(0,l.useCallback)((function(){return g?l.createElement("div",{className:a()("".concat(u,"-empty"),C),style:null!=R?R:{},ref:T},g()):l.createElement("div",{className:a()("".concat(u,"-empty"),C),style:null!=R?R:{},ref:T},"~",o.ZP.v("没有更多"))}),[g,C,R]),D=(0,l.useCallback)((function(){return P?l.createElement("div",{className:a()("".concat(u,"-error"),k),style:null!=Z?Z:{},ref:L},P()):l.createElement("div",{className:a()("".concat(u,"-error"),k),style:null!=Z?Z:{},ref:L},o.ZP.v("出现错误"))}),[P,k,Z]);return(0,l.useImperativeHandle)(t,(function(){return{hideAll:O}})),(0,l.useLayoutEffect)((function(){var e;return null!=(e=M())&&e.addEventListener("scroll",A),null!=(e=T.current)&&e.addEventListener("click",S),null!=(e=L.current)&&e.addEventListener("click",F),function(){var e;null!=(e=M())&&e.removeEventListener("scroll",A),null!=(e=T.current)&&e.removeEventListener("click",S),null!=(e=L.current)&&e.removeEventListener("click",F)}})),l.createElement("div",c({},b,{className:a()(u,n),style:c(c({},null!=r?r:{}),{overflowY:M()===x.current?"auto":"initial"}),ref:x}),s,e(),j(),D())},d=(0,l.memo)((0,l.forwardRef)(s));d.EMPTY="empty",d.ERROR="error",d.NORMAL="normal";var m=d},68506:function(e,t,n){n.r(t),n.d(t,{default:function(){return Me}});var r=n(39204),a=n(82671),l=n(83482),o=n(29581),c=n(20816),i=n(90171),u=n(20725),s=n(1821),d=n.n(s),m=n(4134),p=n(8860),f=n(33240),y=n(17464),v=n(17071),h=n(1891),E=n(62984),g=n(13582),C=n(21701),R=n(99727),P=n(33423),k=n(31795),Z=n(3909),b=n(43460),N=n(61636),x=n(38182),w=n(51986),T=n(86091),L=n(59270),M=n(45117),A=n(62280),S=n(87389),F=n(37921),O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function j(e){return i.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"1em",height:"1em",viewBox:"0 0 20 20"},e),i.createElement("path",{fill:"#888888",d:"M6.494 8.075c.045-.295.339-.575.754-.575s.709.28.754.575a.5.5 0 1 0 .988-.15C8.863 7.09 8.104 6.5 7.248 6.5s-1.615.59-1.742 1.425a.5.5 0 1 0 .988.15Zm6.254-.575c-.415 0-.708.28-.754.575a.5.5 0 0 1-.988-.15c.127-.835.886-1.425 1.742-1.425s1.615.59 1.742 1.425a.5.5 0 0 1-.988.15c-.046-.295-.339-.575-.754-.575ZM5.495 10a.5.5 0 0 0-.497.549C5.236 12.992 7.154 15 9.995 15c2.841 0 4.76-2.008 4.998-4.451a.5.5 0 0 0-.498-.549h-9Zm4.5 4c-2.081 0-3.516-1.303-3.912-3h7.825c-.397 1.697-1.831 3-3.913 3ZM10 2a8 8 0 1 0 0 16a8 8 0 0 0 0-16Zm-7 8a7 7 0 1 1 14 0a7 7 0 0 1-14 0Z"}))}var D=function(){return(D=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},V=h.default.TextArea,I=E.Z.useSetState,K="adhere-ui-comment-reply",z=new Map([["ar",C],["de",R],["en",P],["es",k],["fa",Z],["fr",b],["it",N],["ja",x],["nl",w],["pl",T],["pt",L],["ru",M],["uk",A],["zh",S]]),q=function(e){var t=void 0===(d=e.local)?"zh":d,n=void 0===(d=e.emojiPickerProps)?{}:d,r=e.onResult,a=e.onCancel,l=(d=I(""))[0],o=d[1],c=(0,i.useRef)(null),s=(0,i.useRef)(null),d=(e=(0,i.useState)(!1))[0],m=e[1],p=(0,i.useCallback)((function(e){var t=e.native,n=null==(e=null==c?void 0:c.current)?void 0:e.querySelector("textarea"),r=n.selectionStart;o("".concat(l.substring(0,r)).concat(t).concat(l.substring(r)),(function(){n.focus(),n.setSelectionRange(r+t.length,r+t.length)}))}),[l]);e=(0,i.useMemo)((function(){return i.createElement(F.Z,D({data:g,i18n:z.get(t||"zh"),onEmojiSelect:p},null!=n?n:{}))}),[g,t,n]);return(0,i.useLayoutEffect)((function(){var e,t;function n(e){e=e.target,[(null==c?void 0:c.current).querySelector("textarea")].includes(e)||m(!1)}function r(e){e.stopPropagation()}return document.body.addEventListener("click",n),null!=(t=null==(e=null==s?void 0:s.current)?void 0:e.addEventListener)&&t.call(e,"click",r),function(){var e,t;document.body.removeEventListener("click",n),null!=(t=null==(e=null==s?void 0:s.current)?void 0:e.removeEventListener)&&t.call(e,"click",r)}})),i.createElement("div",{className:"".concat(K)},i.createElement("div",{className:"".concat(K,"-textarea-wrap"),ref:c},i.createElement(V,{className:"".concat(K,"-textarea"),placeholder:u.ZP.v("请输入回复内容"),autoFocus:!0,value:l,onChange:function(e){return o(e.target.value)},showCount:!0,maxLength:100})),i.createElement("div",{ref:s,className:"".concat(K,"-toolbar-emoji-wrap")}),i.createElement("div",{className:"".concat(K,"-toolbar")},i.createElement(v.Z,{placement:"bottomLeft",getPopupContainer:function(){return s.current},content:e,open:d},i.createElement("div",{onClick:function(e){e.stopPropagation(),m((function(e){return!e}))}},i.createElement(j,{className:"".concat(K,"-toolbar-item-emoji")}))),i.createElement("div",{className:"".concat(K,"-toolbar-inner")},i.createElement(y.ZP,{type:"primary",className:"".concat(K,"-toolbar-item"),disabled:!l,onClick:function(){return null==r?void 0:r(l.trim())}},u.ZP.v("添加")),i.createElement(y.ZP,{className:"".concat(K,"-toolbar-item"),onClick:function(){return null==a?void 0:a()}},u.ZP.v("取消")))))},W=(0,i.memo)(q),B=function(){return(B=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},H=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,l=t.length;a<l;a++)!r&&a in t||((r=r||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},Y="adhere-ui-comment-node",_=function(e){var t=void 0!==(t=e.isReply)&&t,n=void 0===(V=e.dataKeys)?{current:"current",totalPage:"totalPage",list:"list",totalCount:"totalCount"}:V,r=void 0===(V=e.limit)?10:V,a=e.keyProp,l=e.children,o=e.isMoreProp,c=e.renderAuthor,s=e.renderAvatar,y=e.renderContent,v=e.renderDateTime,h=e.renderLoading,E=e.showReplyText,g=e.hideReplyText,C=e.loadMoreReplyText,R=e.showReplyTextIcon,P=e.loadMoreCollapseTextIcon,k=e.hideReplyTextIcon,Z=e.fetchReply,b=e.emojiPickerProps,N=void 0===(V=e.local)?"zh":V,x=(V=(0,i.useState)(((V={})[n.current]=1,V[n.list]=[],V[n.totalCount]=0,V[n.totalPage]=0,V)))[0],w=V[1],T=(V=(0,i.useState)(null==e?void 0:e.data))[0],L=V[1],M=(V=(0,i.useState)(!1))[0],A=V[1],S=(V=(0,i.useState)(!1))[0],F=V[1],O=(V=(0,i.useState)(!1))[0],j=V[1],D=(0,i.useRef)({page:1,limit:r}),V=(0,i.useCallback)((function(){var t=H([],((null==(t=null==e?void 0:e.renderActions)?void 0:t.call(e,B({},T),(function(e){return L(e)})))||[]).map((function(e,t){var n;return m.Z.conditionalRender({conditional:!(null!=(n=null==(n=null==e?void 0:e.props)?void 0:n.className)&&n.endsWith("-actions-action")),noMatch:e,match:i.createElement("li",{key:t,className:"".concat(Y,"-actions-action")},e)})})),!0);return t.find((function(e){return"reply"===(null==(e=null==(e=null==e?void 0:e.props)?void 0:e.children)?void 0:e.key)}))||t.push(i.createElement("li",{key:"reply",className:d()("".concat(Y,"-actions-action"),"".concat(Y,"-actions-action-reply-btn")),onClick:function(){return j(!0)}},u.ZP.v("回复"))),t}),[null==e?void 0:e.renderActions,T,O]),I=(0,i.useCallback)((function(){var t,u;return i.createElement("ul",{className:"".concat(Y,"-children")},null==(u=null===(t=x[n.list]||[])?void 0:t.map)?void 0:u.call(t,(function(t){return i.createElement("li",{className:"".concat(Y,"-children-item"),key:t[a]},i.createElement(m.Z,{conditional:!l,noMatch:function(){return null==l?void 0:l(t)}},(function(){return i.createElement(Q,{isReply:!0,data:t,dataKeys:n,limit:r,keyProp:a,isMoreProp:o,fetchData:null==e?void 0:e.fetchData,fetchReply:null==e?void 0:e.fetchReply,renderActions:null==e?void 0:e.renderActions,renderAuthor:c,renderAvatar:s,renderContent:y,renderDateTime:v,renderLoading:h,showReplyText:E,hideReplyText:g,loadMoreReplyText:C,showReplyTextIcon:R,hideReplyTextIcon:k,loadMoreCollapseTextIcon:P,local:N,emojiPickerProps:b})})))})),i.createElement(m.Z,{conditional:!S&&z()},(function(){return i.createElement("li",{className:d()("".concat(Y,"-children-item"),"more")},i.createElement("a",{onClick:G},i.createElement("span",null,i.createElement(m.Z,{conditional:f.Z.isFunction(P),noMatch:function(){return P}},(function(){return P instanceof Function?P():P}))),i.createElement("span",null,i.createElement(m.Z,{conditional:f.Z.isFunction(C),noMatch:function(){return C}},(function(){return C instanceof Function?C():C})))))})))}),[x,n.list,a,o,V,c,s,y,v,h,E,g,C,R,k,P,S]),K=(0,i.useCallback)((function(){return i.createElement(m.Z,{conditional:!M,noMatch:function(){return i.createElement("a",{className:"".concat(Y,"-collapse"),onClick:function(){return A(!1)}},i.createElement("span",null,i.createElement(m.Z,{conditional:f.Z.isFunction(k),noMatch:function(){return k}},(function(){return k instanceof Function?k():k}))),i.createElement("span",null,i.createElement(m.Z,{conditional:f.Z.isFunction(g),noMatch:function(){return g}},(function(){return g instanceof Function?g():g}))))}},(function(){return i.createElement("a",{className:"".concat(Y,"-collapse"),onClick:function(){var e;x[n.list].length?A(!0):null!=(e=_())&&e.then((function(){return A(!0)}))}},i.createElement("span",null,i.createElement(m.Z,{conditional:f.Z.isFunction(R),noMatch:function(){return R}},(function(){return R instanceof Function?R():R}))),i.createElement("span",null,i.createElement(m.Z,{conditional:f.Z.isFunction(E),noMatch:function(){return E}},(function(){return E instanceof Function?E():E}))))}))}),[M,x,n.list,g,k,E,R]),z=(0,i.useCallback)((function(){return x[n.list].length<=x[n.totalCount]}),[x,n.list,n.totalCount]),q=(0,i.useCallback)((function(){var t;return null==(t=null==(t=null==(t=null==e?void 0:e.fetchData)?void 0:t.call(e,B(B({},D.current),{record:B({},T)})))?void 0:t.then((function(e){return F(!1),e})))?void 0:t.catch((function(e){return F(!1),e}))}),[null==e?void 0:e.fetchData,D.current.page,D.current.limit,T]);function _(){var e;return F(!0),D.current={page:1,limit:r},null==(e=q())?void 0:e.then((function(e){w(e)}))}function G(){F(!0),D.current.page=D.current.page+1;var e,t=n.list;return null==(e=q())?void 0:e.then((function(e){w((function(r){var a;return B(B({},e),((a={})[n.list]=H(H([],r[t],!0),e[t],!0),a))}))}))}return(0,i.useEffect)((function(){L(e.data)}),[null==e?void 0:e.data]),i.createElement(p.Z,{direction:"horizontal",className:d()(Y,t?"".concat(Y,"-reply"):null)},i.createElement(p.Z.Fixed,{className:"".concat(Y,"-avatar-wrap")},null==s?void 0:s(B({},T))),i.createElement(p.Z.Auto,{autoFixed:!0,fit:!0},i.createElement(p.Z,{direction:"vertical"},i.createElement(p.Z.Fixed,{className:"".concat(Y,"-title-row"),fit:!1},i.createElement("div",{className:"".concat(Y,"-title-row-author")},null==c?void 0:c(B({},T))),i.createElement("div",{className:"".concat(Y,"-title-row-date-time")},null==v?void 0:v(B({},T)))),i.createElement(p.Z.Auto,{className:"".concat(Y,"-content-wrap")},null==y?void 0:y(B({},T))),i.createElement(p.Z.Fixed,null,i.createElement("ul",{className:"".concat(Y,"-actions")},V())),i.createElement(m.Z,{conditional:O},(function(){return i.createElement(p.Z.Fixed,{style:{marginTop:15}},i.createElement(W,{onCancel:function(){return j(!1)},onResult:function(e){null!=(e=null==Z?void 0:Z({id:null==T?void 0:T[a],record:B({},T),reply:e}))&&e.then((function(){j(!1),_()}))},local:N,emojiPickerProps:b}))})),i.createElement(m.Z,{conditional:null==T?void 0:T[o]},(function(){return i.createElement(i.Fragment,null,i.createElement(m.Z,{conditional:!S},(function(){return K()})),i.createElement(m.Z.Show,{conditional:M},I()),i.createElement(m.Z,{conditional:S},(function(){return null==h?void 0:h()})))})))))},G=(0,i.memo)(_),$=function(){return($=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},U=function(e){return i.createElement(G,$({},e,{isReply:!0}))},Q=(0,i.memo)(U),X=function(){return(X=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},J=function(e){return i.createElement(G,X({},e,{isReply:!1}),(function(t){var n;return null==(n=null==e?void 0:e.children)?void 0:n.call(e,t)}))},ee=(0,i.memo)(J),te=n(27288),ne=n(11353),re=n(9579),ae=n(47850),le=n(97048),oe=function(){return(oe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},ce="adhere-ui-comment-inner-list",ie=function(e){var t,n=void 0===(n=e.className)?"":n,r=void 0===(r=e.style)?{}:r,a=void 0!==(t=e.isLoading)&&t,l=void 0!==(t=e.hasMore)&&t,o=e.onLoadMore,c=void 0===(t=e.scrollLoadProps)?{}:t,u=e.renderFirstLoading,s=e.getScrollWrapContainer,p=e.children,f=(0,i.useRef)(!0),y=(0,i.useRef)(!1),v=(0,i.useRef)(null);return i.createElement("div",{className:d()(ce,null!=n?n:""),style:null!=r?r:{},ref:v},function(){var e,t=a;if(f.current&&!y.current&&t&&(y.current=!0),f.current&&y.current&&!t&&(f.current=!1,y.current=!1),f.current){if(u)return u();for(var n=[],r=0;r<7;r++)n.push(i.createElement(re.Z,{key:r+1,loading:!0,avatar:!0}));return i.createElement("div",{className:"".concat(ce,"-first-loading-wrap")},n)}return e={getScrollContainer:function(){var e;return null==(e=null==s?void 0:s())?void 0:e.firstElementChild},onScrollBottom:o},i.createElement(m.Z,{conditional:l},(function(){return i.createElement("div",{className:"".concat(ce,"-normal-wrap")},i.createElement(ne.Z,oe({},e,null!=c?c:{},{distance:(null==c?void 0:c.distance)||50}),p),i.createElement(m.Z,{conditional:!(!s||!s()),noMatch:function(){return i.createElement(le.Z,{getContainer:function(){var e,t;return null==(t=null==(e=null==v?void 0:v.current)?void 0:e.querySelector)?void 0:t.call(e,".adhere-ui-scrollload")},onTrigger:function(){return Promise.resolve()}})}},(function(){return ae.createPortal(i.createElement(le.Z,{getContainer:function(){var e;return null==(e=null==s?void 0:s())?void 0:e.firstElementChild},onTrigger:function(){return Promise.resolve()}}),null==s?void 0:s())})))}))}())},ue=(0,i.memo)(ie),se=function(){return(se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},de=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,l=t.length;a<l;a++)!r&&a in t||((r=r||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},me=p.Z.VerticalFlexLayout,pe="adhere-ui-comment-list-standard",fe=function(e){var t=void 0===(a=e.limit)?10:a,n=void 0===(a=e.dataKeys)?{current:"current",totalPage:"totalPage",list:"list",totalCount:"totalCount"}:a,r=void 0===(a=e.listProps)?{}:a,a=void 0===(a=e.flexLayoutProps)?{}:a,l=e.renderFirstLoading,o=void 0===(f=e.renderEmpty)?function(){return i.createElement(te.Z,null)}:f,c=e.renderList,u=e.getScrollWrapContainer,s=(0,i.useRef)({page:1,limit:t}),d=(0,i.useRef)(),p=(0,i.useRef)(ne.Z.NORMAL),f=(0,i.useRef)(null),y=(P=(0,i.useState)(((P={})[n.current]=1,P[n.totalPage]=0,P[n.list]=[],P[n.totalCount]=0,P)))[0],v=P[1],h=(P=(0,i.useState)(!0))[0],E=P[1];function g(t){var n;return null==(n=null==e?void 0:e.fetchData)?void 0:n.call(e,null==s?void 0:s.current).then((function(e){return t(e),E(!1),e})).catch((function(e){var t;return E(!1),d.current&&(p.current=ne.Z.ERROR,null!=(t=null==d?void 0:d.current))&&t.call(d,p.current),e}))}var C=(0,i.useCallback)((function(e){p.current===ne.Z.EMPTY?(p.current=ne.Z.EMPTY,e(ne.Z.EMPTY)):(d.current=e,setTimeout((function(){return E(!0),s.current.page=s.current.page+1,e=n.list,g((function(t){v((function(r){var a;return se(se({},t),((a={})[n.list]=de(de([],r[e],!0),t[e],!0),a))}))}));var e}),100))}),[]),R=(0,i.useCallback)((function(){return 1===s.current.page&&0===y[n.list].length}),[y,n,s.current.page]),P=(0,i.useMemo)((function(){return i.createElement(ue,se({getScrollWrapContainer:u,isLoading:h,hasMore:y[n.list].length<=y[n.totalCount],onLoadMore:C,renderFirstLoading:l},null!=r?r:{}),i.createElement(m.Z,{conditional:!R(),noMatch:function(){return o()}},(function(){return null==c?void 0:c(y)})))}),[u,h,y,n.totalCount,n.list,l,r,o]);return(0,i.useEffect)((function(){E(!0),s.current={page:1,limit:t},g((function(e){v(e)}))}),[]),(0,i.useLayoutEffect)((function(){d.current&&(p.current=s.current.page<y[n.totalPage]?ne.Z.NORMAL:ne.Z.EMPTY,null!=d)&&d.current(p.current)}),[y]),i.createElement(me,se({},null!=a?a:{},{className:"".concat(pe),renderMain:i.createElement("div",{className:"".concat(pe,"-auto"),ref:f},P)}))},ye=(0,i.memo)(fe),ve="adhere-ui-comment",he=function(e){var t=e.listProps,n=void 0===(n=e.commentDataKeys)?{current:"current",totalPage:"totalPage",list:"list",totalCount:"totalCount"}:n,s=void 0===(s=e.commentLimit)?10:s,d=e.flexLayoutProps,m=e.getScrollWrapContainer,p=void 0===(E=e.commentKeyProp)?"id":E,f=void 0===(E=e.replyDataKeys)?{current:"current",totalPage:"totalPage",list:"list",totalCount:"totalCount"}:E,y=void 0===(E=e.replyLimit)?10:E,v=void 0===(E=e.replyKeyProp)?"id":E,h=void 0===(E=e.isMoreProp)?"isMore":E,E=e.fetchCommentData,g=e.fetchReplyData,C=e.fetchReply,R=e.renderEmpty,P=e.renderFirstLoading,k=e.renderCommentActions,Z=e.renderCommentAuthor,b=e.renderCommentAvatar,N=e.renderCommentContent,x=e.renderCommentDateTime,w=e.renderCommentLoading,T=e.renderReplyActions,L=e.renderReplyAuthor,M=e.renderReplyAvatar,A=e.renderReplyContent,S=e.renderReplyDateTime,F=e.renderReplyLoading,O=void 0===(W=e.showReplyText)?u.ZP.v("显示回复内容"):W,j=void 0===(W=e.hideReplyText)?u.ZP.v("收起回复"):W,D=void 0===(W=e.loadMoreReplyText)?u.ZP.v("加载更多回复"):W,V=void 0===(W=e.showReplyTextIcon)?i.createElement(c.Z,null):W,I=void 0===(W=e.hideReplyTextIcon)?i.createElement(o.Z,null):W,K=void 0===(W=e.loadMoreCollapseTextIcon)?i.createElement(l.Z,{className:"reply-icon"}):W,z=void 0===(W=e.local)?"zh":W,q=e.emojiPickerProps,W=(0,i.useCallback)((function(e){var t;return i.createElement("ul",{className:"".concat(ve,"-list")},null==(t=null==(e=null==e?void 0:e.list)?void 0:e.map)?void 0:t.call(e,(function(e){return i.createElement("li",{className:"".concat(ve,"-list-item"),key:e[p]},i.createElement(ee,{data:e,dataKeys:f,limit:y,keyProp:v,isMoreProp:h,fetchData:g,fetchReply:C,renderActions:k,renderAuthor:Z,renderAvatar:b,renderContent:N,renderDateTime:x,renderLoading:w||B,showReplyText:O,hideReplyText:j,loadMoreReplyText:D,showReplyTextIcon:V,hideReplyTextIcon:I,loadMoreCollapseTextIcon:K,local:z,emojiPickerProps:q},(function(e){return i.createElement(Q,{data:e,dataKeys:f,limit:y,keyProp:v,isMoreProp:h,fetchData:g,fetchReply:C,renderActions:T,renderAuthor:L,renderAvatar:M,renderContent:A,renderDateTime:S,renderLoading:F||B,showReplyText:O,hideReplyText:j,loadMoreReplyText:D,showReplyTextIcon:V,hideReplyTextIcon:I,loadMoreCollapseTextIcon:K,local:z,emojiPickerProps:q})})))})))}),[f,y,v,h,g,C,k,Z,b,N,S,w,O,j,D,V,I,K,z,q,A,M,L,T]),B=(0,i.useCallback)((function(){return i.createElement("div",{className:"".concat(ve,"-loading")},i.createElement(a.Z,{indicator:i.createElement(r.Z,{style:{fontSize:24}})}))}),[]);return i.createElement(ye,{getScrollWrapContainer:m,listProps:t,dataKeys:n,limit:s,renderList:W,renderLoading:B,fetchData:E,renderEmpty:R,renderFirstLoading:P,flexLayoutProps:d})},Ee=(0,i.memo)(he),ge=n(89002),Ce=n(90242),Re=n(20374),Pe=n(94062),ke=n.n(Pe),Ze=n(23240),be=n(3627),Ne=n(96032),xe="YQCLST4ChPnECAvcp9Z6",we="gHKU4PFDvuKn7sdNEUlw";const Te=Array.from({length:300}).map(((e,t)=>({id:t+1,name:ke().internet.userName(),time:ke().date.past(),icon:"https://joeschmoe.io/api/v1/random",info:ke().hacker.phrase(),isMore:t%2==0,like:ke().random.number(),dislike:ke().random.number()}))),Le=Array.from({length:300}).map(((e,t)=>({id:t+1,name:ke().internet.userName(),time:ke().date.past(),icon:"https://joeschmoe.io/api/v1/random",info:ke().hacker.phrase(),isMore:t%2==0,like:ke().random.number(),dislike:ke().random.number()})));var Me=()=>{const e=(0,i.useRef)();function t(e){let{page:t,limit:n}=e;return console.log("fetchCommentData",t,n,Te.slice((t-1)*n,t*n)),new Promise((e=>{setTimeout((()=>{e({current:t,totalPage:Te.length/n+(Te.length%n!=0?1:0),list:Te.slice((t-1)*n,t*n),totalCount:Te.length})}),1500)}))}function n(e){return null==e?void 0:e.name}function r(e){return i.createElement("img",{src:null==e?void 0:e.icon,alt:""})}function a(e,t){return[i.createElement(Re.Z,{key:"comment-basic-like",title:"Like"},i.createElement("span",{onClick:()=>{setTimeout((()=>{e.like=ke().random.number(),t({...e})}),1e3)}},i.createElement(Ze.Z,null),i.createElement("span",{style:{marginLeft:5}},e.like))),i.createElement(Re.Z,{key:"comment-basic-dislike",title:"Dislike"},i.createElement("span",{onClick:()=>{setTimeout((()=>{e.dislike=ke().random.number(),t({...e})}),1e3)}},i.createElement(be.Z,null),i.createElement("span",{style:{marginLeft:5}},e.dislike)))]}function l(e){return null==e?void 0:e.info}function o(e){return i.createElement(Ce.Z.DateDisplayFromNow,{value:null==e?void 0:e.time})}function c(e){let{page:t,limit:n,record:r}=e;return new Promise((e=>{setTimeout((()=>{e({current:t,totalPage:Le.length/n+(Le.length%n!=0?1:0),list:Le.slice((t-1)*n,t*n),totalCount:Le.length})}),1500)}))}function u(e){return null==e?void 0:e.name}function s(e){return i.createElement("img",{src:null==e?void 0:e.icon,alt:""})}function d(e,t){return[i.createElement(Re.Z,{key:"comment-basic-like",title:"Like"},i.createElement("span",{onClick:()=>{setTimeout((()=>{e.like=ke().random.number(),t({...e})}),1e3)}},i.createElement(Ze.Z,null),i.createElement("span",{style:{marginLeft:5}},e.like))),i.createElement(Re.Z,{key:"comment-basic-dislike",title:"Dislike"},i.createElement("span",{onClick:()=>{setTimeout((()=>{e.dislike=ke().random.number(),t({...e})}),1e3)}},i.createElement(be.Z,null),i.createElement("span",{style:{marginLeft:5}},e.dislike)))]}function m(e){return null==e?void 0:e.info}function p(e){return i.createElement(Ce.Z.DateDisplayFromNow,{value:null==e?void 0:e.time})}function f(e){let{id:t,record:n,reply:r}=e;const a=ge.Z.show(document.body,"");return new Promise((e=>{setTimeout((()=>{e(),ge.Z.hide(a)}),1e3)}))}return i.createElement(Ne.ZP,null,i.createElement(Ne.$0,{title:"Comment"},i.createElement("p",null,"评论")),i.createElement(Ne.e0,{title:"代码演示",config:[{id:"p1",name:"基本使用",mode:"code",scope:{React:i},cardProps:{description:{title:"基本使用",info:"基本使用"}},codeText:"",type:"PlayGround",renderChildren:()=>i.createElement(i.Fragment,null,i.createElement("div",{className:xe,ref:e},i.createElement("div",{className:we},i.createElement(Ee,{getScrollWrapContainer:()=>e.current,fetchCommentData:t,renderCommentActions:a,renderCommentAuthor:n,renderCommentAvatar:r,renderCommentContent:l,renderCommentDateTime:o,fetchReplyData:c,renderReplyActions:d,renderReplyAuthor:u,renderReplyAvatar:s,renderReplyContent:m,renderReplyDateTime:p,fetchReply:f}))))}]}),i.createElement(Ne.sB,{title:"Props",config:[{border:!0,title:"属性",data:[{params:"getScrollWrapContainer",desc:"获取滚动的目标元素",type:"HTMLElement",defaultVal:"document.body"},{params:"fetchCommentData",desc:"获取评论数据",type:"(params?: any) => Promise<any>",defaultVal:""},{params:"commentDataKeys",desc:"评论返回值结构",type:"\n                  {\n                    current: string;\n                    totalPage: string;\n                    list: string;\n                    totalCount: string;\n                  }\n                ",defaultVal:"{\n                  current: 'current',\n                  totalPage: 'totalPage',\n                  list: 'list',\n                  totalCount: 'totalCount',\n                }"},{params:"commentLimit",desc:"评论一页数据数",type:"number",defaultVal:"10"},{params:"commentKeyProp",desc:"评论数据的唯一主键属性",type:"string",defaultVal:"id"},{params:"renderCommentActions",desc:"渲染评论的操作区",type:"(params?: any) => ReactNode[] | null",defaultVal:""},{params:"renderCommentAuthor",desc:"渲染评论作者",type:"(params?: any) => ReactNode[] | null",defaultVal:""},{params:"renderCommentAvatar",desc:"渲染评论头像",type:"(params?: any) => ReactNode | null",defaultVal:""},{params:"renderCommentContent",desc:"渲染评论内容",type:"(params?: any) => ReactNode | null",defaultVal:""},{params:"renderCommentDateTime",desc:"渲染评论时间",type:"(params?: any) => ReactNode | null",defaultVal:""},{params:"renderCommentLoading",desc:"渲染评论的loading",type:"(params?: any) => ReactNode | null",defaultVal:""},{params:"fetchReplyData",desc:"加载回复数据",type:"(params?: any) => Promise<any>",defaultVal:""},{params:"replyDataKeys",desc:"回复数据结构",type:"{\n                  current: string;\n                  totalPage: string;\n                  list: string;\n                  totalCount: string;\n                }",defaultVal:"{\n                  current: 'current',\n                  totalPage: 'totalPage',\n                  list: 'list',\n                  totalCount: 'totalCount',\n                }"},{params:"replyLimit",desc:"回复数据的分页数",type:"number",defaultVal:"10"},{params:"replyKeyProp",desc:"回复数据唯一主键属性",type:"string",defaultVal:"id"},{params:"renderReplyActions",desc:"渲染回复的工具",type:"(params?: any) => ReactNode[] | null",defaultVal:""},{params:"renderReplyAuthor",desc:"渲染回复的作者",type:"(params?: any) => ReactNode | null",defaultVal:""},{params:"renderReplyAvatar",desc:"渲染回复的头像renderReplyAvatar",type:"(params?: any) => ReactNode | null",defaultVal:""},{params:"renderReplyContent",desc:"渲染回复内容",type:"(params?: any) => ReactNode | null",defaultVal:""},{params:"renderReplyDateTime",desc:"渲染回复的时间",type:"(params?: any) => ReactNode | null",defaultVal:""},{params:"renderReplyLoading",desc:"渲染回复loading",type:"(params?: any) => ReactNode | null",defaultVal:""},{params:"fetchReply",desc:"进行回复",type:"(params?: any) => Promise<any>",defaultVal:""},{params:"listProps",desc:"ScrollList的props",type:"any",defaultVal:"{}"},{params:"isMoreProp",desc:"是否有更多的属性",type:"string",defaultVal:"isMore"},{params:"flexLayoutProps",desc:"flexLayout的props",type:"FlexLayoutProps",defaultVal:"{}"},{params:"renderEmpty",desc:"无数据的渲染",type:"() => ReactElement | null",defaultVal:""},{params:"renderFirstLoading",desc:"第一次的渲染",type:"() => ReactNode",defaultVal:""},{params:"showReplyText",desc:"回复的文本",type:"string | Function",defaultVal:""},{params:"hideReplyText",desc:"隐藏回复的文本",type:"string | Function",defaultVal:""},{params:"loadMoreReplyText",desc:"加载更多数据的文本",type:"string | Function",defaultVal:""},{params:"showReplyTextIcon",desc:"滚动",type:"回复文本的图标",defaultVal:"ReactNode | Function"},{params:"hideReplyTextIcon",desc:"隐藏回复的图标",type:"ReactNode | Function",defaultVal:""},{params:"loadMoreCollapseTextIcon",desc:"加载更多数据的图标",type:"ReactNode | Function",defaultVal:""},{params:"local",desc:"国际化",type:"Local",defaultVal:"zh"},{params:"emojiPickerProps",desc:"表情组件的Props",type:"any",defaultVal:"{}"}]}]}))}},96032:function(e,t,n){n.d(t,{$0:function(){return i},ae:function(){return d},e0:function(){return u},sB:function(){return s}});var r=n(70517),a=n(6692),l=n(90171);const{PlayGroundPageContext:o,PlayGroundPage:c}=a.default,{Section:i,CodeBoxSection:u,PropsSection:s,FunctionPropsSection:d}=c;t.ZP=function(e){let{children:t,...n}=e;const[a,i]=(0,l.useState)(),u=(0,l.useRef)();return(0,l.useEffect)((()=>{i(u.current.parentElement.parentElement)}),[]),l.createElement(o.Provider,{value:{scrollEl:a}},l.createElement(c,(0,r.Z)({ref:u},n),t))}},89002:function(e,t,n){var r=n(57123);t.Z=r.Z}}]);