"use strict";(self.webpackChunk_ctsj_build=self.webpackChunk_ctsj_build||[]).push([[3494],{64997:(e,n,r)=>{r.d(n,{A:()=>s});var t=r(26322),o=r(39407),c=r(45240),a=function(){return(a=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},l=c.A.useSetState,i=(0,t.forwardRef)((function(e,n){e=e.children;var r=l((0,o.A)()),c=r[0],i=r[1];return(0,t.useImperativeHandle)(n,(function(){return{reMount:function(){return new Promise((function(e){return i((0,o.A)(),(function(){return e()}))}))}}})),(0,t.cloneElement)(e,a({key:c},null!=(r=e.props)?r:{}))}));i.displayName="ForceUpdate";const s=i},28517:(e,n,r)=>{r.r(n),r.d(n,{default:()=>i});var t=r(26322),o=r(19994),c=r(58278);const a=()=>t.createElement(c.A,{success:()=>new Promise((e=>{alert("点击了确认"),e()}))},t.createElement("a",null,"删除")),l=()=>t.createElement("a",{onClick:()=>{c.A.open({success:()=>new Promise((e=>{alert("点击了确认"),e()}))})}},"删除"),i=()=>t.createElement(o.Ay,null,t.createElement(o.wn,{title:"DelConfirm"},t.createElement("p",null,"删除确认提示(使用的是antd的Modal)"),t.createElement("p",null,"删除的时候弹出提示，确认后在执行操作")),t.createElement(o.Wc,{title:"代码演示",columnCount:1,config:[{id:"p1",name:"基本使用",mode:"code",scope:{React:t},cardProps:{description:{title:"基本使用",info:"基本使用"}},codeText:"import React from 'react';\r\n\r\nimport { DelConfirm } from '@baifendian/adhere';\r\n\r\nexport default () => (\r\n  <DelConfirm\r\n    success={() => {\r\n      return new Promise((resolve) => {\r\n        alert('点击了确认');\r\n\r\n        resolve();\r\n      });\r\n    }}\r\n  >\r\n    <a>删除</a>\r\n  </DelConfirm>\r\n);\r\n",type:"PlayGround",renderChildren:()=>t.createElement(a,null)},{id:"p2",name:"Confirm.open",mode:"code",scope:{React:t},cardProps:{description:{title:"Confirm.open",info:"Confirm.open"}},codeText:"import React from 'react';\r\n\r\nimport { DelConfirm } from '@baifendian/adhere';\r\n\r\nexport default () => (\r\n  <a\r\n    onClick={() => {\r\n      DelConfirm.open({\r\n        success: () =>\r\n          new Promise((resolve) => {\r\n            alert('点击了确认');\r\n\r\n            resolve();\r\n          }),\r\n      });\r\n    }}\r\n  >\r\n    删除\r\n  </a>\r\n);\r\n",type:"PlayGround",renderChildren:()=>t.createElement(l,null)}]}),t.createElement(o.e6,{title:"Props",config:[{border:!0,title:"属性",data:[{params:"zIndex",desc:"显示的层级",type:"number",defaultVal:"19999"},{params:"className",desc:"附加的样式",type:"string",defaultVal:""},{params:"success",desc:"确认后的回调，此方法需要返回Promise对象",type:"Function",defaultVal:"() => {}"},{name:"title",desc:"标题",type:"string",defaultVal:""},{name:"text",desc:"文本",type:"string",defaultVal:""},{params:"children",desc:"子组件",type:"React.ReactElement",defaultVal:"null"}]}]}),t.createElement(o.I7,{title:"Api",config:[{border:!0,title:"方法",data:[{name:"open",desc:"打开确认对话框",modifier:"static",params:[{name:"success",desc:"成功的回调，此方法需要返回Promise对象",type:"Function",defaultVal:"() => {}",required:"true"},{name:"title",desc:"标题",type:"string",defaultVal:"",required:"false"},{name:"text",desc:"文本",type:"string",defaultVal:"",required:"false"},{name:"zIndex",desc:"显示层级",type:"number",defaultVal:"19999",required:"false"}],returnType:"void",returnDesc:""}]}]}))},27585:(e,n,r)=>{r.r(n),r.d(n,{default:()=>f});var t=r(26322),o=r(19994),c=r(46439),a=r(32517),l=r(61444),i=r(80711);const s=e=>((0,t.useEffect)((()=>{console.log("子组件挂载")}),[]),(0,t.useEffect)((()=>{console.log("子组件更新")})),t.createElement("div",null,"子组件:",e.count)),{useSetState:u}=l.A,d=()=>{const e=(0,t.useRef)(),[n,r]=u(0);return t.createElement(c.A,{ref:e},t.createElement("div",null,t.createElement(a.A.Group,{direction:"horizontal"},t.createElement(i.Ay,{type:"primary",onClick:()=>r((e=>e+1))},"递增"),t.createElement(i.Ay,{type:"primary",onClick:()=>{r(0,(()=>e.current.reMount()))}},"重置")),t.createElement(s,{count:n})))},p=()=>t.createElement(d,null),f=()=>t.createElement(o.Ay,null,t.createElement(o.wn,{title:"ForceUpdate"},t.createElement("p",null,"强制刷新组件及其子组件")),t.createElement(o.Wc,{title:"代码演示",columnCount:1,config:[{id:"p1",name:"强制刷新组件及其子组件",type:"PlayGroundTab",active:"p1.jsx",config:[{key:"p1.jsx",title:"p1.jsx",codeText:"import React from 'react';\r\n\r\nimport Parent from '../parent';\r\n\r\nexport default () => <Parent />;\r\n"},{key:"parent.jsx",title:"parent.jsx",codeText:"import { Button } from 'antd';\r\nimport React, { useRef } from 'react';\r\n\r\nimport { ForceUpdate, Hooks, Space } from '@baifendian/adhere';\r\n\r\nimport Sub from './sub';\r\n\r\nconst { useSetState } = Hooks;\r\n\r\nexport default () => {\r\n  const ref = useRef();\r\n  const [count, setCount] = useSetState(0);\r\n\r\n  return (\r\n    <ForceUpdate ref={ref}>\r\n      <div>\r\n        <Space.Group direction=\"horizontal\">\r\n          <Button type=\"primary\" onClick={() => setCount((_count) => _count + 1)}>\r\n            递增\r\n          </Button>\r\n          <Button\r\n            type=\"primary\"\r\n            onClick={() => {\r\n              setCount(0, () => ref.current.reMount());\r\n            }}\r\n          >\r\n            重置\r\n          </Button>\r\n        </Space.Group>\r\n        <Sub count={count} />\r\n      </div>\r\n    </ForceUpdate>\r\n  );\r\n};\r\n"},{key:"sub.jsx",title:"sub.jsx",codeText:"import React, { useEffect } from 'react';\r\n\r\nexport default (props) => {\r\n  useEffect(() => {\r\n    console.log('子组件挂载');\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log('子组件更新');\r\n  });\r\n  return <div>子组件:{props.count}</div>;\r\n};\r\n"}],renderChildren:()=>t.createElement(p,null)}]}))},19994:(e,n,r)=>{r.d(n,{Ay:()=>p,I7:()=>d,Wc:()=>s,e6:()=>u,wn:()=>i});var t=r(71860),o=r(24370),c=r(26322);const{PlayGroundPageContext:a,PlayGroundPage:l}=o.A,{Section:i,CodeBoxSection:s,PropsSection:u,FunctionPropsSection:d}=l;const p=function(e){let{children:n,onScrollBottom:r,distance:o=50,...i}=e;const[s,u]=(0,c.useState)(),d=(0,c.useRef)(),p=(0,c.useRef)(!1);return(0,c.useEffect)((()=>{function e(){const e=n.scrollHeight-n.offsetHeight,t=n.scrollTop;if(r&&Math.abs(t-e)<=o){if(p.current)return;p.current=!0,null==r||r().then((()=>{p.current=!1}))}}const n=d.current.parentElement.parentElement;return n.addEventListener("scroll",e),u(n),()=>{n.removeEventListener("scroll",e)}}),[]),c.createElement(a.Provider,{value:{scrollEl:s}},c.createElement(l,(0,t.A)({ref:d},i),n))}},58278:(e,n,r)=>{r.d(n,{A:()=>u});var t=r(26322),o=r(81703),c=r(59418),a=r(85820),l=function(){return(l=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},i=function(e,n){var r={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var t=0,o=Object.getOwnPropertySymbols(e);t<o.length;t++)n.indexOf(o[t])<0&&Object.prototype.propertyIsEnumerable.call(e,o[t])&&(r[o[t]]=e[o[t]]);return r},s=(0,t.memo)((function(e){var n=e.className,r=e.style,o=e.children;return t.createElement("div",{className:"".concat("adhere-ui-del-confirm"," ").concat(null!=n?n:""),style:null!=r?r:{},onClick:function(n){n.stopPropagation(),e.children,n=i(e,["children"]),s.open(l({},n))}},o)}));s.displayName="DelConform",s.open=function(e){var n=e.success;e=i(e,["success"]);o.A.Confirm(l(l({},e),{title:e.title||c.Ay.v("提示"),text:e.text||"".concat(c.Ay.v("确定删除吗"),"?"),zIndex:"zIndex"in e?e.zIndex:a.A.Dict.value.ResourceNormalMaxZIndex.value,onSuccess:function(){return new Promise((function(e,r){n?n().then((function(){return e()})).catch((function(){return r()})):e()}))}}))};const u=s},46439:(e,n,r)=>{r.d(n,{A:()=>t});const t=r(64997).A},61444:(e,n,r)=>{r.d(n,{A:()=>t});const t=r(45240).A},32517:(e,n,r)=>{r.d(n,{A:()=>t});const t=r(2382).A}}]);