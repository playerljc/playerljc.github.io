"use strict";(self.webpackChunk_ctsj_build=self.webpackChunk_ctsj_build||[]).push([[2297],{16937:(t,e,n)=>{n.d(e,{A:()=>v});var o=n(31934),a=n.n(o),i=n(26322),r=n(72667),s=n(89921),l=function(){return(l=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},c=function(t,e){var n={};for(a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(t);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(t,a[o])&&(n[a[o]]=t[a[o]]);return n},u=function(t){var e=t.children,n=c(t,["children"]),o=(0,i.useMemo)((function(){return Array.isArray(e)?(e||[]).filter((function(t){return!!t})):e}),[e]);t=(0,i.useMemo)((function(){var t=[];return function e(n){i.Children.map(n,(function(n){var o;s.isFragment(n)?e(((null==(o=null==n?void 0:n.props)?void 0:o.children)||[]).filter((function(t){return!!t}))):t.push(n)}))}(o),t}),[o]);return i.Children.count(o)<=1?o:t.map((function(t,e){return 0===e?t:i.createElement(i.Fragment,{key:e},i.createElement(f,l({},n)),t)}))};u.displayName="SplitGroup";const d=u;var y=n(88724);var p=function(){return(p=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},h=(0,i.memo)((function(t){var e,n=void 0===(n=t.className)?"":n,o=t.style,s=void 0===(e=t.direction)?"vertical":e,l=void 0===(e=t.size)?10:e,c=void 0!==(e=t.horizontalFit)&&e,u=(0,i.useContext)(r.A.Context).media,d=(0,i.useMemo)((function(){return function(t,e){return y.A.isNumber(e)?null!=t&&t.isUseMedia?y.A.pxToRem(e,null==t?void 0:t.designWidth):"".concat(e,"px"):e}(u,l)}),[u,l]);t=(0,i.useMemo)((function(){var t;return"horizontal"===s?(t={display:"inline-block",width:1,margin:"0 ".concat(d)},c&&(t.height="100%"),t):{width:"100%",height:1,margin:"".concat(d," 0")}}),[s,l]);return i.createElement("div",{className:a()("adhere-ui-split",null!=n?n:""),style:p(p({},t),null!=o?o:{})})}));h.displayName="Split",h.Group=d;const f=h,v=h},95375:(t,e,n)=>{n.r(e),n.d(e,{default:()=>qe});var o={};n.r(o),n.d(o,{ActionEvents:()=>i,ActionStatus:()=>a,ActionType:()=>l,PolygonSelectionActions:()=>r,SelectType:()=>s});var a,i,r,s,l,c,u=n(26322),d=n(19994),y=n(53304),p=n(61846),h=n(40370),f=n(88724),v=n(54043),m=n(80711),g=n(31934),x=n.n(g),D=n(81703),C=n(59418),w=n(53516),M=n(66003),P=n(88681),T=n(24902);(c=a=a||{})[c.UnStart=0]="UnStart",c[c.Running=1]="Running",c[c.End=2]="End",c[c.Destroy=3]="Destroy",function(t){t.DrawBeforeStart="DrawBeforeStart",t.DrawStart="DrawStart",t.Drawing="Drawing",t.DrawEnd="DrawEnd",t.MoveBeforeStart="MoveBeforeStart",t.MoveStart="MoveStart",t.Moving="Moving",t.MoveEnd="MoveEnd",t.ModifyBeforeStart="ModifyBeforeStart",t.ModifyStart="ModifyStart",t.Modifying="Modifying",t.ModifyEnd="ModifyEnd",t.Destroy="Destroy"}(i=i||{}),function(t){t.CanvasMount="CanvasMount",t.CanvasClickEmpty="CanvasClickEmpty",t.CanvasClickGeometry="CanvasClickGeometry"}(r=r||{}),function(t){t.Polygon="Polygon",t.Circle="Circle",t.Rectangle="Rectangle",t.Triangle="Triangle",t.Diamond="Diamond",t.Start="Start",t.Free="Free"}(s=s||{}),function(t){t.Draw="Draw",t.Modify="Modify",t.Move="Move"}(l=l||{});const b={fillStyle:"#ddd",strokeStyle:"#fff",lineWidth:2,lineCap:"round",lineJoin:"round",lineDash:[5,4,3],lineDashOffset:-1,globalAlpha:1},E={fillStyle:"#eee",strokeStyle:"#ccc",lineWidth:2,lineDash:[5,4,3],lineDashOffset:-1,lineCap:"round",lineJoin:"round",globalAlpha:.6},S={fillStyle:"#eee",strokeStyle:"#ccc",lineWidth:2,lineCap:"round",lineJoin:"round",lineDash:[],lineDashOffset:-1,globalAlpha:1};var A,I=(A=function(t,e){return(A=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}A(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),R=function(){return(R=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.context=null,e.status=a.UnStart,e.style=R({},S),e.anchorStyle=R({},b),e.moveGemStyle=R({},E),e}return I(e,t),e.prototype.getAnchorStyle=function(){return R({},this.anchorStyle)},e.prototype.getStyle=function(){return R({},this.style)},e.prototype.getMoveGemStyle=function(){return R({},this.moveGemStyle)},e.prototype.setAnchorStyle=function(t){this.anchorStyle=R(R({},b),null!=t?t:{})},e.prototype.setStyle=function(t){this.style=R(R({},S),null!=t?t:{})},e.prototype.setMoveGemStyle=function(t){this.moveGemStyle=R(R({},E),null!=t?t:{})},e.prototype.destroy=function(){var t,e,n;this.context&&![a.Running,a.Destroy].includes(this.status)&&(e=null==(e=null==(t=this.context)?void 0:t.getCanvasEl)?void 0:e.call(t),n=null==(n=null==t?void 0:t.getAssistCanvasEl)?void 0:n.call(t),e)&&n&&(e.style.cursor=n.style.cursor="default")},e.prototype.end=function(t){var e,n;this.context&&![a.Running,a.Destroy].includes(this.status)&&(e=null==(n=this.context)?void 0:n.getCanvasEl(),n=null==n?void 0:n.getAssistCanvasEl(),e)&&n&&(e.style.cursor=n.style.cursor="default")},e.prototype.start=function(t){var e;this.context&&![a.Running,a.Destroy].includes(this.status)&&(e=this.context.getCanvasEl())&&(e.style.cursor="url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjI3OTEzNjM1NDc3IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjQzMDgiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTUxMi4wMDIgODg3QzMwNC44OTIgODg3IDEzNyA3MTkuMTA4IDEzNyA1MTIuMDAyIDEzNyAzMDQuODkyIDMwNC44OTIgMTM3IDUxMi4wMDIgMTM3IDcxOS4xMDggMTM3IDg4NyAzMDQuODkyIDg4NyA1MTIuMDAyIDg4NyA3MTkuMTA4IDcxOS4xMDggODg3IDUxMi4wMDIgODg3ek01MTIgNzg3YzE1MS44NzggMCAyNzUtMTIzLjEyMiAyNzUtMjc1UzY2My44NzggMjM3IDUxMiAyMzcgMjM3IDM2MC4xMjIgMjM3IDUxMnMxMjMuMTIyIDI3NSAyNzUgMjc1eiIgZmlsbD0iIzFBQTVGRiIgcC1pZD0iNDMwOSI+PC9wYXRoPjxwYXRoIGQ9Ik01MTIgNTEybS0yMjUgMGEyMjUgMjI1IDAgMSAwIDQ1MCAwIDIyNSAyMjUgMCAxIDAtNDUwIDBaIiBmaWxsPSIjMUFBNUZGIiBwLWlkPSI0MzEwIj48L3BhdGg+PC9zdmc+), auto")},e.prototype.setContext=function(t){this.context=t},e.prototype.getStatus=function(){return this.status},e}(v.A.Events);const O=B;var k,L=(k=function(t,e){return(k=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}k(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),V=function(t){function e(){var e=t.call(this)||this;return e.centerPoint=null,e.isMove=!1,e.radius=0,e.onCanvasMouseDown=e.onCanvasMouseDown.bind(e),e.onCanvasMouseMove=e.onCanvasMouseMove.bind(e),e.onCanvasMouseUp=e.onCanvasMouseUp.bind(e),e}return L(e,t),e.booleanPointInData=function(t,e){return f.A.isPointInCircle(t,e.data)},e.prototype.draw=function(t){var e,n=(a=this).context,o=a.centerPoint,a=a.style,i=null==n?void 0:n.getCtx();n&&i&&o&&(e=null==n?void 0:n.getCanvasEl())&&(t=f.A.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}))&&(null!=n&&n.clearDraw(),null!=n&&n.drawHistoryData(),i.beginPath(),this.radius=f.A.getDistanceByBetweenPoint({p1:o,p2:t}),i.lineWidth=a.lineWidth,i.lineJoin=a.lineJoin,i.lineCap=a.lineCap,a.lineDash&&i.setLineDash(a.lineDash),i.lineDashOffset=a.lineDashOffset,i.strokeStyle=a.strokeStyle,i.fillStyle=a.fillStyle,i.globalAlpha=a.globalAlpha,i.ellipse((null==o?void 0:o.x)||0,(null==o?void 0:o.y)||0,this.radius,this.radius,45*Math.PI/180,0,2*Math.PI),i.closePath(),i.stroke(),i.fill())},e.prototype.onCanvasMouseDown=function(t){var e;this.context&&(e=this.context.getCanvasEl())&&(this.centerPoint=f.A.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),null!=e&&e.addEventListener("mousemove",this.onCanvasMouseMove),null!=e)&&e.addEventListener("mouseup",this.onCanvasMouseUp)},e.prototype.onCanvasMouseMove=function(t){var e=this.context;e&&e.getCtx()&&(this.isMove=!0,this.draw(t),this.trigger(i.Drawing,{selectType:s.Circle,actionType:l.Draw,data:{id:f.A.uuid(),type:s.Circle,data:{center:this.centerPoint,radius:this.radius},style:this.style}}))},e.prototype.onCanvasMouseUp=function(t){this.isMove&&(this.end(t),t.stopPropagation())},e.draw=function(t,e){t&&e&&this.drawHistoryPath(t,e)},e.drawHistoryPath=function(t,e){var n;t.beginPath(),e.style&&(t.lineWidth=e.style.lineWidth,t.lineJoin=e.style.lineJoin,t.lineCap=e.style.lineCap,e.style.lineDash&&t.setLineDash(e.style.lineDash),t.lineDashOffset=e.style.lineDashOffset,t.strokeStyle=e.style.strokeStyle,t.fillStyle=e.style.fillStyle,t.globalAlpha=null!=(n=e.style.globalAlpha)?n:1),t.ellipse(e.data.center.x,e.data.center.y,e.data.radius,e.data.radius,45*Math.PI/180,0,2*Math.PI),t.closePath(),t.stroke(),t.fill()},e.prototype.start=function(e){var n,o;this.context&&![a.Running,a.Destroy].includes(this.status)&&(o=null==(o=null==(n=this.context)?void 0:n.getCanvasEl)?void 0:o.call(n))&&(t.prototype.start.call(this,e),e&&(this.style=e),this.trigger(i.DrawBeforeStart,{selectType:s.Circle,actionType:l.Draw}),null!=o&&o.addEventListener("mousedown",this.onCanvasMouseDown),this.status=a.Running,this.trigger(i.DrawStart,{selectType:s.Circle,actionType:l.Draw}))},e.prototype.end=function(e){var n,o=this.context;o&&(n=o.getCanvasEl())&&(null!=n&&n.removeEventListener("mousedown",this.onCanvasMouseDown),null!=n&&n.removeEventListener("mousemove",this.onCanvasMouseMove),null!=n&&n.removeEventListener("mouseup",this.onCanvasMouseUp),e&&this.draw(e),this.status=a.End,n={id:f.A.uuid(),type:s.Circle,data:{center:this.centerPoint,radius:this.radius},style:this.style},o.addHistoryData(n),this.centerPoint=null,this.radius=0,this.isMove=!1,this.trigger(i.DrawEnd,{selectType:s.Circle,actionType:l.Draw,data:n})),t.prototype.end.call(this,e)},e.prototype.destroy=function(){var e,n=this.context;n&&(e=n.getCanvasEl())&&(this.status===a.Running&&(n.clearDraw(),n.drawHistoryData()),null!=e&&e.removeEventListener("mousedown",this.onCanvasMouseDown),null!=e&&e.removeEventListener("mousemove",this.onCanvasMouseMove),null!=e&&e.removeEventListener("mouseup",this.onCanvasMouseUp),this.centerPoint=null,this.radius=0,this.isMove=!1,this.status=a.Destroy,this.trigger(i.Destroy,{selectType:s.Circle,actionType:l.Draw})),t.prototype.destroy.call(this)},e}(O);const H=V;var j=n(23172);const _={getRectLeftTopPoint:function(t){var e=t.startPoint;return(t=t.targetPoint).x<=e.x&&t.y<=e.y?t:t.x<=e.x&&t.y>=e.y?{x:t.x,y:e.y}:t.x>=e.x&&t.y<=e.y?{x:e.x,y:t.y}:t.x>=e.x&&t.y>=e.y?e:null},triangle:function(t){var e,n=t.startPoint,o=(t=t.targetPoint,this.getRectLeftTopPoint({startPoint:n,targetPoint:t}));return o?(e=Math.abs(t.x-n.x),t=Math.abs(t.y-n.y),[{x:o.x,y:o.y+t},{x:o.x+e/2,y:o.y},{x:o.x+e,y:o.y+t}]):[]}};var z,q=(z=function(t,e){return(z=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}z(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),N=function(t){function e(){var e=t.call(this)||this;return e.startPoint=null,e.leftTopPoint=null,e.width=0,e.height=0,e.isMove=!1,e.onCanvasMouseDown=e.onCanvasMouseDown.bind(e),e.onCanvasMouseMove=e.onCanvasMouseMove.bind(e),e.onCanvasMouseUp=e.onCanvasMouseUp.bind(e),e}return q(e,t),e.booleanPointInData=function(t,e){var n=(e=e.data).leftTopPoint,o=(i=e.width)/2,a=(e=e.height)/2,i=(t=j.zx7([t.x,t.y]),j.n1([[[n.x,n.y+a],[n.x+o,n.y],[n.x+i,n.y+a],[n.x+o,n.y+e],[n.x,n.y+a]]]));return j.mFO(t,i)},e.prototype.draw=function(t){var e,n=(a=this).context,o=a.startPoint,a=a.style,i=null==n?void 0:n.getCtx();n&&i&&(e=null==n?void 0:n.getCanvasEl())&&(t=f.A.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),null!=n&&n.clearDraw(),null!=n&&n.drawHistoryData(),i.beginPath(),this.leftTopPoint=_.getRectLeftTopPoint({startPoint:o,targetPoint:t}),this.leftTopPoint)&&(this.width=Math.abs(t.x-((null==o?void 0:o.x)||0)),this.height=Math.abs(t.y-((null==o?void 0:o.y)||0)),e=this.width/2,n=this.height/2,i.lineWidth=a.lineWidth,i.lineJoin=a.lineJoin,i.lineCap=a.lineCap,a.lineDash&&i.setLineDash(a.lineDash),i.lineDashOffset=a.lineDashOffset,i.strokeStyle=a.strokeStyle,i.fillStyle=a.fillStyle,i.globalAlpha=a.globalAlpha,i.moveTo(this.leftTopPoint.x,this.leftTopPoint.y+n),i.lineTo(this.leftTopPoint.x+e,this.leftTopPoint.y),i.lineTo(this.leftTopPoint.x+this.width,this.leftTopPoint.y+n),i.lineTo(this.leftTopPoint.x+e,this.leftTopPoint.y+this.height),i.closePath(),i.stroke(),i.fill())},e.prototype.onCanvasMouseDown=function(t){var e;this.context&&(e=this.context.getCanvasEl())&&(this.startPoint=f.A.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),null!=e&&e.addEventListener("mousemove",this.onCanvasMouseMove),null!=e)&&e.addEventListener("mouseup",this.onCanvasMouseUp)},e.prototype.onCanvasMouseMove=function(t){this.context&&(this.isMove=!0,this.draw(t),this.trigger(i.Drawing,{selectType:s.Diamond,actionType:l.Draw,data:{id:f.A.uuid(),type:s.Diamond,data:{leftTopPoint:this.leftTopPoint,width:this.width,height:this.height},style:this.style}}))},e.prototype.onCanvasMouseUp=function(t){this.isMove&&(this.end(t),t.stopPropagation())},e.draw=function(t,e){t&&e&&this.drawHistoryPath(t,e)},e.drawHistoryPath=function(t,e){var n,o;e&&e.data.leftTopPoint&&(t.beginPath(),e.style&&(t.lineWidth=e.style.lineWidth,t.lineJoin=e.style.lineJoin,t.lineCap=e.style.lineCap,e.style.lineDash&&t.setLineDash(e.style.lineDash),t.lineDashOffset=e.style.lineDashOffset,t.strokeStyle=e.style.strokeStyle,t.fillStyle=e.style.fillStyle,t.globalAlpha=null!=(n=e.style.globalAlpha)?n:1),n=e.data.width/2,o=e.data.height/2,t.moveTo(e.data.leftTopPoint.x,e.data.leftTopPoint.y+o),t.lineTo(e.data.leftTopPoint.x+n,e.data.leftTopPoint.y),t.lineTo(e.data.leftTopPoint.x+e.data.width,e.data.leftTopPoint.y+o),t.lineTo(e.data.leftTopPoint.x+n,e.data.leftTopPoint.y+e.data.height),t.closePath(),t.stroke(),t.fill())},e.prototype.start=function(e){var n,o;this.context&&![a.Running,a.Destroy].includes(this.status)&&(o=null==(o=null==(n=this.context)?void 0:n.getCanvasEl)?void 0:o.call(n))&&(t.prototype.start.call(this,e),e&&(this.style=e),this.trigger(i.DrawBeforeStart,{selectType:s.Diamond,actionType:l.Draw}),null!=o&&o.addEventListener("mousedown",this.onCanvasMouseDown),this.status=a.Running,this.trigger(i.DrawStart,{selectType:s.Diamond,actionType:l.Draw}))},e.prototype.end=function(e){var n,o=this.context;o&&(n=o.getCanvasEl())&&(null!=n&&n.removeEventListener("mousedown",this.onCanvasMouseDown),null!=n&&n.removeEventListener("mousemove",this.onCanvasMouseMove),null!=n&&n.removeEventListener("mouseup",this.onCanvasMouseUp),e&&this.draw(e),this.status=a.End,n={id:f.A.uuid(),type:s.Diamond,data:{leftTopPoint:this.leftTopPoint,width:this.width,height:this.height},style:this.style},o.addHistoryData(n),this.startPoint=null,this.leftTopPoint=null,this.width=0,this.height=0,this.isMove=!1,this.trigger(i.DrawEnd,{selectType:s.Diamond,actionType:l.Draw,data:n})),t.prototype.end.call(this,e)},e.prototype.destroy=function(){var e,n=this.context;n&&(e=n.getCanvasEl())&&(this.status===a.Running&&(n.clearDraw(),n.drawHistoryData()),null!=e&&e.removeEventListener("mousedown",this.onCanvasMouseDown),null!=e&&e.removeEventListener("mousemove",this.onCanvasMouseMove),null!=e&&e.removeEventListener("mouseup",this.onCanvasMouseUp),this.startPoint=null,this.leftTopPoint=null,this.width=0,this.height=0,this.isMove=!1,this.status=a.Destroy,this.trigger(i.Destroy,{selectType:s.Diamond,actionType:l.Draw})),t.prototype.destroy.call(this)},e}(O);const G=N;var W=function(){var t=function(e,n){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),J=function(t,e,n){if(n||2===arguments.length)for(var o,a=0,i=e.length;a<i;a++)!o&&a in e||((o=o||Array.prototype.slice.call(e,0,a))[a]=e[a]);return t.concat(o||Array.prototype.slice.call(e))},U=function(t){function e(){var e=t.call(this)||this;return e.startPoint=null,e.pointStack=[],e.isMove=!1,e.onCanvasClick=e.onCanvasClick.bind(e),e.onCanvasMousemove=e.onCanvasMousemove.bind(e),e.onCanvasDbClick=e.onCanvasDbClick.bind(e),e}return W(e,t),e.booleanPointInData=function(t,e){return(e=J([],e.data,!0)).push(e[0]),t=j.zx7([t.x,t.y]),e=j.n1([e.map((function(t){return[t.x,t.y]}))]),j.mFO(t,e)},e.prototype.onCanvasClick=function(t){var e,n;t.stopPropagation(),this.context&&(e=this.context.getCanvasEl())&&(this.startPoint?(n=f.A.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),this.drawLine(this.startPoint,n),this.startPoint=n,this.startPoint&&this.pointStack.push(this.startPoint)):(null!=e&&e.addEventListener("mousemove",this.onCanvasMousemove),null!=e&&e.addEventListener("dblclick",this.onCanvasDbClick),this.startPoint=f.A.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),this.startPoint&&(this.pointStack.push(this.startPoint),this.trigger(i.DrawStart,{selectType:s.Polygon,actionType:l.Draw}))))},e.prototype.onCanvasMousemove=function(t){var e;this.context&&this.startPoint&&(e=this.context.getCanvasEl())&&(this.isMove=!0,this.context.clearDraw(),this.context.drawHistoryData(),this.drawStack(),this.drawLine(this.startPoint,f.A.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()})))},e.prototype.onCanvasDbClick=function(t){this.isMove&&(this.end(),t.stopPropagation())},e.prototype.drawStack=function(){var t=this.pointStack;if(!(t.length<=1))for(var e=0;this.drawLine(t[e],t[e+1]),++e!=t.length-1;);},e.prototype.fill=function(){if(this.context){var t=this.pointStack,e=this.context.getCtx();if(e&&!(t.length<=1)){null!=e&&e.beginPath(),e.lineWidth=this.style.lineWidth,e.lineJoin=this.style.lineJoin,e.lineCap=this.style.lineCap,this.style.lineDash&&e.setLineDash(this.style.lineDash),e.lineDashOffset=this.style.lineDashOffset,e.strokeStyle=this.style.strokeStyle,e.fillStyle=this.style.fillStyle,e.globalAlpha=this.style.globalAlpha;for(var n=0;n<t.length;n++){var o=t[n];0===n?null!=e&&e.moveTo(o.x,o.y):null!=e&&e.lineTo(o.x,o.y)}e.closePath(),e.stroke(),e.fill()}}},e.prototype.drawLine=function(t,e){var n,o;this.context&&(n=this.style,o=this.context.getCtx())&&(o.beginPath(),o.moveTo(t.x,t.y),o.lineTo(e.x,e.y),o.strokeStyle=n.strokeStyle,n.lineDash&&o.setLineDash(n.lineDash),o.lineWidth=n.lineWidth/2,o.lineCap=n.lineCap,o.lineJoin=n.lineJoin,o.lineDashOffset=n.lineDashOffset,o.globalAlpha=1,o.closePath(),o.stroke())},e.draw=function(t,e){t&&e&&this.drawHistoryPath(t,e)},e.drawHistoryPath=function(t,e){var n;t.beginPath(),e.style&&(t.lineWidth=e.style.lineWidth,t.lineJoin=e.style.lineJoin,t.lineCap=e.style.lineCap,e.style.lineDash&&t.setLineDash(e.style.lineDash),t.lineDashOffset=e.style.lineDashOffset,t.strokeStyle=e.style.strokeStyle,t.fillStyle=e.style.fillStyle,t.globalAlpha=null!=(n=e.style.globalAlpha)?n:1),((null==e?void 0:e.data)||[]).forEach((function(e,n){0===n?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)})),t.closePath(),t.stroke(),t.fill()},e.prototype.start=function(e){var n,o;this.context&&![a.Running,a.Destroy].includes(this.status)&&(n=this.context)&&(o=n.getCanvasEl())&&(t.prototype.start.call(this,e),e&&(this.style=e),this.trigger(i.DrawBeforeStart,{selectType:s.Polygon,actionType:l.Draw}),null!=o&&o.addEventListener("mouseup",this.onCanvasClick),this.status=a.Running)},e.prototype.end=function(){var e,n=this.context;n&&(e=n.getCanvasEl())&&(null!=e&&e.removeEventListener("mouseup",this.onCanvasClick),null!=e&&e.removeEventListener("mousemove",this.onCanvasMousemove),null!=e&&e.removeEventListener("dblclick",this.onCanvasDbClick),n.clearDraw(),n.drawHistoryData(),this.fill(),this.status=a.End,e={id:f.A.uuid(),type:s.Polygon,data:J([],this.pointStack,!0),style:this.style},this.startPoint=null,this.pointStack=[],this.isMove=!1,n.addHistoryData(e),this.trigger(i.DrawEnd,{selectType:s.Polygon,actionType:l.Draw,data:e})),t.prototype.end.call(this)},e.prototype.destroy=function(){var e,n=this.context;n&&(e=n.getCanvasEl())&&(this.status===a.Running&&(n.clearDraw(),n.drawHistoryData()),null!=e&&e.removeEventListener("mouseup",this.onCanvasClick),null!=e&&e.removeEventListener("mousemove",this.onCanvasMousemove),null!=e&&e.removeEventListener("dblclick",this.onCanvasDbClick),this.startPoint=null,this.pointStack=[],this.isMove=!1,this.status=a.Destroy,this.trigger(i.Destroy,{selectType:s.Polygon,actionType:l.Draw})),t.prototype.destroy.call(this)},e}(O);const F=U;var X=function(){var t=function(e,n){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Z=function(t){function e(){var e=t.call(this)||this;return e.startPoint=null,e.leftTopPoint=null,e.width=0,e.height=0,e.isMove=!1,e.onCanvasMouseDown=e.onCanvasMouseDown.bind(e),e.onCanvasMouseMove=e.onCanvasMouseMove.bind(e),e.onCanvasMouseUp=e.onCanvasMouseUp.bind(e),e}return X(e,t),e.booleanPointInData=function(t,e){var n=(e=e.data).leftTopPoint,o=e.width;e=e.height,t=j.zx7([t.x,t.y]),o=j.n1([[[n.x,n.y],[n.x+o,n.y],[n.x+o,n.y+e],[n.x,n.y+e],[n.x,n.y]]]);return j.mFO(t,o)},e.prototype.draw=function(t){var e,n=(a=this).context,o=a.startPoint,a=a.style,i=null==n?void 0:n.getCtx();n&&i&&(e=null==(e=null==n?void 0:n.getCanvasEl)?void 0:e.call(n))&&(t=f.A.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),null!=(e=null==n?void 0:n.clearDraw)&&e.call(n),null!=(e=null==n?void 0:n.drawHistoryData)&&e.call(n),i.beginPath(),this.leftTopPoint=_.getRectLeftTopPoint({startPoint:o,targetPoint:t}),this.width=Math.abs(t.x-((null==o?void 0:o.x)||0)),this.height=Math.abs(t.y-((null==o?void 0:o.y)||0)),i.lineWidth=a.lineWidth,i.lineJoin=a.lineJoin,i.lineCap=a.lineCap,a.lineDash&&i.setLineDash(a.lineDash),i.lineDashOffset=a.lineDashOffset,i.strokeStyle=a.strokeStyle,i.fillStyle=a.fillStyle,i.globalAlpha=a.globalAlpha,i.rect((null==(e=this.leftTopPoint)?void 0:e.x)||0,(null==(n=this.leftTopPoint)?void 0:n.y)||0,this.width,this.height),i.closePath(),i.stroke(),i.fill())},e.prototype.onCanvasMouseDown=function(t){var e;this.context&&(e=this.context.getCanvasEl())&&(this.startPoint=f.A.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),null!=e&&e.addEventListener("mousemove",this.onCanvasMouseMove),null!=e)&&e.addEventListener("mouseup",this.onCanvasMouseUp)},e.prototype.onCanvasMouseMove=function(t){this.context&&(this.isMove=!0,this.draw(t),this.trigger(i.Drawing,{selectType:s.Rectangle,actionType:l.Draw,data:{id:f.A.uuid(),type:s.Rectangle,data:{leftTopPoint:this.leftTopPoint,width:this.width,height:this.height},style:this.style}}))},e.prototype.onCanvasMouseUp=function(t){this.isMove&&(this.end(t),t.stopPropagation())},e.draw=function(t,e){t&&e&&this.drawHistoryPath(t,e)},e.drawHistoryPath=function(t,e){var n;t.beginPath(),e.style&&(t.lineWidth=e.style.lineWidth,t.lineJoin=e.style.lineJoin,t.lineCap=e.style.lineCap,e.style.lineDash&&t.setLineDash(e.style.lineDash),t.lineDashOffset=e.style.lineDashOffset,t.strokeStyle=e.style.strokeStyle,t.fillStyle=e.style.fillStyle,t.globalAlpha=null!=(n=e.style.globalAlpha)?n:1),t.rect((null==(n=null==(n=null==e?void 0:e.data)?void 0:n.leftTopPoint)?void 0:n.x)||0,(null==(n=null==(n=null==e?void 0:e.data)?void 0:n.leftTopPoint)?void 0:n.y)||0,null==(n=null==e?void 0:e.data)?void 0:n.width,null==(n=null==e?void 0:e.data)?void 0:n.height),t.closePath(),t.stroke(),t.fill()},e.prototype.start=function(e){var n,o;this.context&&![a.Running,a.Destroy].includes(this.status)&&(o=null==(o=null==(n=this.context)?void 0:n.getCanvasEl)?void 0:o.call(n))&&(t.prototype.start.call(this,e),e&&(this.style=e),this.trigger(i.DrawBeforeStart,{selectType:s.Rectangle,actionType:l.Draw}),null!=o&&o.addEventListener("mousedown",this.onCanvasMouseDown),this.status=a.Running,this.trigger(i.DrawStart,{selectType:s.Rectangle,actionType:l.Draw}))},e.prototype.end=function(e){var n,o=this.context;o&&(n=o.getCanvasEl())&&(null!=n&&n.removeEventListener("mousedown",this.onCanvasMouseDown),null!=n&&n.removeEventListener("mousemove",this.onCanvasMouseMove),null!=n&&n.removeEventListener("mouseup",this.onCanvasMouseUp),e&&this.draw(e),this.status=a.End,n={id:f.A.uuid(),type:s.Rectangle,data:{leftTopPoint:this.leftTopPoint,width:this.width,height:this.height},style:this.style},o.addHistoryData(n),this.startPoint=null,this.leftTopPoint=null,this.width=0,this.height=0,this.isMove=!1,this.trigger(i.DrawEnd,{selectType:s.Rectangle,actionType:l.Draw,data:n})),t.prototype.end.call(this,e)},e.prototype.destroy=function(){var e,n=this.context;n&&(e=n.getCanvasEl())&&(this.status===a.Running&&(n.clearDraw(),n.drawHistoryData()),null!=e&&e.removeEventListener("mousedown",this.onCanvasMouseDown),null!=e&&e.removeEventListener("mousemove",this.onCanvasMouseMove),null!=e&&e.removeEventListener("mouseup",this.onCanvasMouseUp),this.startPoint=null,this.leftTopPoint=null,this.width=0,this.height=0,this.isMove=!1,this.status=a.Destroy,this.trigger(i.Destroy,{selectType:s.Rectangle,actionType:l.Draw})),t.prototype.destroy.call(this)},e}(O);const Q=Z;var Y=function(){var t=function(e,n){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),K=function(t){function e(){var e=t.call(this)||this;return e.centerPoint=null,e.outRadius=0,e.innerRadius=0,e.isMove=!1,e.onCanvasMouseDown=e.onCanvasMouseDown.bind(e),e.onCanvasMouseMove=e.onCanvasMouseMove.bind(e),e.onCanvasMouseUp=e.onCanvasMouseUp.bind(e),e}return Y(e,t),e.booleanPointInData=function(t,e){for(var n=(e=e.data).center,o=e.outRadius,a=e.innerRadius,i=(e=j.zx7([t.x,t.y]),[]),r=0;r<5;r++)i.push({x:Math.cos((18+72*r)/180*Math.PI)*o+n.x,y:-Math.sin((18+72*r)/180*Math.PI)*o+n.y}),i.push({x:Math.cos((54+72*r)/180*Math.PI)*a+n.x,y:-Math.sin((54+72*r)/180*Math.PI)*a+n.y});return(t=i.map((function(t){return[t.x,t.y]}))).push(t[0]),t=j.n1([t]),j.mFO(e,t)},e.drawStart=function(t){var e=t.ctx;if((t=t.data)&&e){for(var n=t.data,o=n.center,a=n.outRadius,i=n.innerRadius,r=t.style,s=(e.beginPath(),t.style&&(e.lineWidth=t.style.lineWidth,e.lineJoin=t.style.lineJoin,e.lineCap=t.style.lineCap,t.style.lineDash&&e.setLineDash(t.style.lineDash),e.lineDashOffset=t.style.lineDashOffset,e.strokeStyle=t.style.strokeStyle,e.fillStyle=t.style.fillStyle,e.globalAlpha=null!=(n=t.style.globalAlpha)?n:1),72),l=0;l<5;l++)r&&(e.lineWidth=r.lineWidth,e.lineJoin=r.lineJoin,e.lineCap=r.lineCap,r.lineDash&&e.setLineDash(r.lineDash),e.lineDashOffset=r.lineDashOffset,e.strokeStyle=r.strokeStyle,e.fillStyle=r.fillStyle,e.globalAlpha=r.globalAlpha),e.lineTo(Math.cos((18+l*s)/180*Math.PI)*a+o.x,-Math.sin((18+l*s)/180*Math.PI)*a+o.y),e.lineTo(Math.cos((54+l*s)/180*Math.PI)*i+o.x,-Math.sin((54+l*s)/180*Math.PI)*i+o.y);e.closePath(),e.stroke(),e.fill()}},e.prototype.draw=function(t){var n,o=this.context,a=this.centerPoint,i=null==o?void 0:o.getCtx();o&&a&&i&&(n=o.getCanvasEl())&&this.centerPoint&&(t=f.A.clientToCtxPoint({event:t,rect:null==n?void 0:n.getBoundingClientRect()}),o.clearDraw(),o.drawHistoryData(),this.outRadius=f.A.getDistanceByBetweenPoint({p1:a,p2:t}),this.innerRadius=this.outRadius/2,e.drawStart({ctx:i,data:{data:{center:this.centerPoint,outRadius:this.outRadius,innerRadius:this.innerRadius},style:this.style}}))},e.prototype.onCanvasMouseDown=function(t){var e;this.context&&(e=this.context.getCanvasEl())&&(this.centerPoint=f.A.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),null!=e&&e.addEventListener("mousemove",this.onCanvasMouseMove),null!=e)&&e.addEventListener("mouseup",this.onCanvasMouseUp)},e.prototype.onCanvasMouseMove=function(t){this.context&&(this.isMove=!0,this.draw(t),this.trigger(i.Drawing,{selectType:s.Start,actionType:l.Draw,data:{id:f.A.uuid(),type:s.Start,data:{center:this.centerPoint,outRadius:this.outRadius,innerRadius:this.innerRadius},style:this.style}}))},e.prototype.onCanvasMouseUp=function(t){this.isMove&&(this.end(t),t.stopPropagation())},e.draw=function(t,e){t&&e&&this.drawHistoryPath(t,e)},e.drawHistoryPath=function(t,n){n&&e.drawStart({ctx:t,data:n})},e.prototype.start=function(e){var n,o;this.context&&![a.Running,a.Destroy].includes(this.status)&&(o=null==(o=null==(n=this.context)?void 0:n.getCanvasEl)?void 0:o.call(n))&&(t.prototype.start.call(this,e),e&&(this.style=e),this.trigger(i.DrawBeforeStart,{selectType:s.Start,actionType:l.Draw}),null!=o&&o.addEventListener("mousedown",this.onCanvasMouseDown),this.status=a.Running,this.trigger(i.DrawStart,{selectType:s.Start,actionType:l.Draw}))},e.prototype.end=function(e){var n,o=this.context;o&&(n=null==(n=null==o?void 0:o.getCanvasEl)?void 0:n.call(o))&&this.centerPoint&&this.outRadius&&this.innerRadius&&(null!=n&&n.removeEventListener("mousedown",this.onCanvasMouseDown),null!=n&&n.removeEventListener("mousemove",this.onCanvasMouseMove),null!=n&&n.removeEventListener("mouseup",this.onCanvasMouseUp),e&&this.draw(e),this.status=a.End,n={id:f.A.uuid(),type:s.Start,data:{center:this.centerPoint,outRadius:this.outRadius,innerRadius:this.innerRadius},style:this.style},o.addHistoryData(n),this.centerPoint=null,this.outRadius=0,this.innerRadius=0,this.isMove=!1,this.trigger(i.DrawEnd,{selectType:s.Start,actionType:l.Draw,data:n})),t.prototype.end.call(this,e)},e.prototype.destroy=function(){var e,n=this.context;n&&(e=n.getCanvasEl())&&(this.status===a.Running&&(n.clearDraw(),n.drawHistoryData()),null!=e&&e.removeEventListener("mousedown",this.onCanvasMouseDown),null!=e&&e.removeEventListener("mousemove",this.onCanvasMouseMove),null!=e&&e.removeEventListener("mouseup",this.onCanvasMouseUp),this.centerPoint=null,this.outRadius=0,this.innerRadius=0,this.isMove=!1,this.status=a.Destroy,this.trigger(i.Destroy,{selectType:s.Start,actionType:l.Draw})),t.prototype.destroy.call(this)},e}(O);const $=K;var tt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),et=function(t,e,n){if(n||2===arguments.length)for(var o,a=0,i=e.length;a<i;a++)!o&&a in e||((o=o||Array.prototype.slice.call(e,0,a))[a]=e[a]);return t.concat(o||Array.prototype.slice.call(e))},nt=function(t){function e(){var e=t.call(this)||this;return e.startPoint=null,e.points=[],e.isMove=!1,e.onCanvasMouseDown=e.onCanvasMouseDown.bind(e),e.onCanvasMouseMove=e.onCanvasMouseMove.bind(e),e.onCanvasMouseUp=e.onCanvasMouseUp.bind(e),e}return tt(e,t),e.booleanPointInData=function(t,e){return(e=et([],e.data.points||[],!0)).push(e[0]),t=j.zx7([t.x,t.y]),e=j.n1([e.map((function(t){return[t.x,t.y]}))]),j.mFO(t,e)},e.prototype.draw=function(t){var e,n=(a=this).context,o=a.startPoint,a=a.style,i=null==n?void 0:n.getCtx();n&&i&&(e=null==n?void 0:n.getCanvasEl())&&(t=f.A.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),null!=n&&n.clearDraw(),null!=n&&n.drawHistoryData(),i.beginPath(),i.lineWidth=a.lineWidth,i.lineJoin=a.lineJoin,i.lineCap=a.lineCap,a.lineDash&&i.setLineDash(a.lineDash),i.lineDashOffset=a.lineDashOffset,i.strokeStyle=a.strokeStyle,i.fillStyle=a.fillStyle,i.globalAlpha=a.globalAlpha,this.points=_.triangle({startPoint:o,targetPoint:t}),i.moveTo(this.points[0].x,this.points[0].y),i.lineTo(this.points[1].x,this.points[1].y),i.lineTo(this.points[2].x,this.points[2].y),i.closePath(),i.stroke(),i.fill())},e.prototype.onCanvasMouseDown=function(t){var e;this.context&&(e=this.context.getCanvasEl())&&(this.startPoint=f.A.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),null!=e&&e.addEventListener("mousemove",this.onCanvasMouseMove),null!=e)&&e.addEventListener("mouseup",this.onCanvasMouseUp)},e.prototype.onCanvasMouseMove=function(t){this.context&&(this.isMove=!0,this.draw(t),this.trigger(i.Drawing,{selectType:s.Triangle,actionType:l.Draw,data:{id:f.A.uuid(),type:s.Triangle,data:{points:JSON.parse(JSON.stringify(this.points))},style:this.style}}))},e.prototype.onCanvasMouseUp=function(t){this.isMove&&(this.end(t),t.stopPropagation())},e.draw=function(t,e){t&&e&&this.drawHistoryPath(t,e)},e.drawHistoryPath=function(t,e){var n;t.beginPath(),e.style&&(t.lineWidth=e.style.lineWidth,t.lineJoin=e.style.lineJoin,t.lineCap=e.style.lineCap,e.style.lineDash&&t.setLineDash(e.style.lineDash),t.lineDashOffset=e.style.lineDashOffset,t.strokeStyle=e.style.strokeStyle,t.fillStyle=e.style.fillStyle,t.globalAlpha=null!=(n=e.style.globalAlpha)?n:1),t.moveTo(e.data.points[0].x,e.data.points[0].y),t.lineTo(e.data.points[1].x,e.data.points[1].y),t.lineTo(e.data.points[2].x,e.data.points[2].y),t.closePath(),t.stroke(),t.fill()},e.prototype.start=function(e){var n,o;this.context&&![a.Running,a.Destroy].includes(this.status)&&(o=null==(o=null==(n=this.context)?void 0:n.getCanvasEl)?void 0:o.call(n))&&(t.prototype.start.call(this,e),e&&(this.style=e),this.trigger(i.DrawBeforeStart,{selectType:s.Triangle,actionType:l.Draw}),null!=o&&o.addEventListener("mousedown",this.onCanvasMouseDown),this.status=a.Running,this.trigger(i.DrawStart,{selectType:s.Triangle,actionType:l.Draw}))},e.prototype.end=function(e){var n,o=this.context;o&&(n=o.getCanvasEl())&&(null!=n&&n.removeEventListener("mousedown",this.onCanvasMouseDown),null!=n&&n.removeEventListener("mousemove",this.onCanvasMouseMove),null!=n&&n.removeEventListener("mouseup",this.onCanvasMouseUp),e&&this.draw(e),this.status=a.End,n={id:f.A.uuid(),type:s.Triangle,data:{points:JSON.parse(JSON.stringify(this.points))},style:this.style},o.addHistoryData(n),this.startPoint=null,this.points=[],this.isMove=!1,this.trigger(i.DrawEnd,{selectType:s.Triangle,actionType:l.Draw,data:n})),t.prototype.end.call(this,e)},e.prototype.destroy=function(){var e,n=this.context;n&&(e=n.getCanvasEl())&&(this.status===a.Running&&(n.clearDraw(),n.drawHistoryData()),null!=e&&e.removeEventListener("mousedown",this.onCanvasMouseDown),null!=e&&e.removeEventListener("mousemove",this.onCanvasMouseMove),null!=e&&e.removeEventListener("mouseup",this.onCanvasMouseUp),this.startPoint=null,this.points=[],this.isMove=!1,this.status=a.Destroy,this.trigger(i.Destroy,{selectType:s.Triangle,actionType:l.Draw})),t.prototype.destroy.call(this)},e}(O);const ot=nt;var at=function(){var t=function(e,n){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),it=function(){return(it=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},rt=function(t){function e(e){var n=t.call(this)||this;return n.context=null,n.startPoint=null,n.startIndex=-1,n.data=null,n.status=a.UnStart,n.EmitActions={CONTEXT:"CONTEXT"},n.anchorRadius=5,n.anchorLineWidth=2,n.moveStartPoint=null,n.canMove=!1,n.isMoved=!1,n.style=it({},S),n.anchorStyle=it({},b),n.moveGemStyle=it({},E),n.data=e,n.onContext=n.onContext.bind(n),n.onCanvasMousedown=n.onCanvasMousedown.bind(n),n.onCanvasMousemove=n.onCanvasMousemove.bind(n),n.onCanvasMouseup=n.onCanvasMouseup.bind(n),n.onCanvasIsModifyMousemove=n.onCanvasIsModifyMousemove.bind(n),n.onMoveMousedown=n.onMoveMousedown.bind(n),n.onMoveMousemove=n.onMoveMousemove.bind(n),n.onMoveMouseup=n.onMoveMouseup.bind(n),n.on(n.EmitActions.CONTEXT,n.onContext),n}return at(e,t),e.prototype.getAnchorStyle=function(){return it({},this.anchorStyle)},e.prototype.getStyle=function(){return it({},this.style)},e.prototype.getMoveGemStyle=function(){return it({},this.moveGemStyle)},e.prototype.setAnchorStyle=function(t){this.anchorStyle=it(it({},b),null!=t?t:{})},e.prototype.setStyle=function(t){this.style=it(it({},S),null!=t?t:{})},e.prototype.setMoveGemStyle=function(t){this.moveGemStyle=it(it({},E),null!=t?t:{})},e.prototype.setAnchorCircleStyle=function(){var t;this.context&&(t=this.context.getCtx())&&(t.strokeStyle=this.anchorStyle.strokeStyle,t.fillStyle=this.anchorStyle.fillStyle,t.lineWidth=this.anchorStyle.lineWidth,t.globalAlpha=this.anchorStyle.globalAlpha)},e.prototype.setAnchorLineStyle=function(){var t;this.context&&(t=this.context.getCtx())&&(t.strokeStyle=this.anchorStyle.strokeStyle,t.lineWidth=this.anchorStyle.lineWidth,t.setLineDash(this.anchorStyle.lineDash),t.lineDashOffset=this.anchorStyle.lineDashOffset)},e.prototype.onContext=function(){this.drawAnchors()},e.prototype.onCanvasMousedown=function(t){var e;this.context&&(e=this.context.getCanvasEl())&&this.context.getCtx()&&(t=f.A.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),t=this.getPointInAnchor(t))&&(this.startPoint=t.point,this.startIndex=t.index,e.addEventListener("mousemove",this.onCanvasMousemove),e.addEventListener("mouseup",this.onCanvasMouseup))},e.prototype.onCanvasMousemove=function(t){var e;t.stopPropagation(),this.context&&(e=this.context.getCanvasEl())&&this.context.getCtx()&&this.startPoint&&(t=f.A.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),this.drawModify(t),this.trigger(i.Modifying,this.data))},e.prototype.onCanvasMouseup=function(t){this.end(t),t.stopPropagation()},e.prototype.onCanvasIsModifyMousemove=function(t){var e,n;this.context&&(e=this.context.getCanvasEl(),n=this.context.getAssistCanvasEl(),e)&&n&&(this.startPoint||this.moveStartPoint||(t=f.A.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),(t=this.getPointInAnchor(t))?this.setResizeCursorByIndex(t.index):e.style.cursor=n.style.cursor="default"))},e.prototype.initMoveEvents=function(){var t,e=this.context;e&&(t=e.getCanvasEl(),e=e.getAssistCanvasEl(),t)&&e&&(t.addEventListener("mousedown",this.onMoveMousedown),t.addEventListener("mousemove",this.onMoveMousemove),e.addEventListener("mousemove",this.onMoveMousemove),e.addEventListener("mouseup",this.onMoveMouseup))},e.prototype.clearMoveEvents=function(){var t,e=this.context;e&&(t=e.getCanvasEl(),e=e.getAssistCanvasEl(),t)&&e&&(t.removeEventListener("mousedown",this.onMoveMousedown),t.removeEventListener("mousemove",this.onMoveMousemove),e.removeEventListener("mousemove",this.onMoveMousemove),e.removeEventListener("mouseup",this.onMoveMouseup))},e.prototype.onMoveMousedown=function(t){var e,n,o;t&&(e=this.context)&&(n=e.getCanvasEl(),o=e.getAssistCanvasEl(),n)&&o&&this.canMove&&(e.setFrontCanvas(o),this.moveStartPoint=f.A.clientToCtxPoint({event:t,rect:n.getBoundingClientRect()}),this.drawMoveGeometry())},e.prototype.onMoveMousemove=function(t){var e,n,o;t&&(o=this.context)&&(e=o.getCanvasEl(),n=o.getAssistCanvasEl(),e)&&n&&(t=f.A.clientToCtxPoint({event:t,rect:e.getBoundingClientRect()}),this.moveStartPoint?(this.isMoved=!0,o.clearAssistDraw(),o=this.drawMoveGeometry(this.moveStartPoint,t),this.trigger(i.Moving,{selectType:this.getSelectType(),actionType:l.Move,data:o})):(this.canMove=this.isCanMove(t),o=n.style.cursor,e.style.cursor=n.style.cursor=this.canMove?"move":o))},e.prototype.onMoveMouseup=function(t){var e,n,o;t&&(e=this.context)&&(o=e.getCanvasEl(),n=e.getAssistCanvasEl(),o)&&n&&(this.canMove&&this.isMoved&&this.moveStartPoint?(e.setBackCanvas(n),o=f.A.clientToCtxPoint({event:t,rect:o.getBoundingClientRect()}),e.clearAssistDraw(),this.drawMove(this.moveStartPoint,o),this.canMove=!1,this.isMoved=!1,this.moveStartPoint=null,t.stopPropagation(),this.trigger(i.MoveEnd,this.data)):(e.setBackCanvas(n),this.canMove=!1,this.isMoved=!1,this.moveStartPoint=null))},e.prototype.start=function(){var t,e,n;this.context&&![a.Running,a.Destroy].includes(this.status)&&(e=null==(e=null==(t=this.context)?void 0:t.getCanvasEl)?void 0:e.call(t),n=null==(n=null==t?void 0:t.getAssistCanvasEl)?void 0:n.call(t),e)&&n&&(e.style.cursor=n.style.cursor="default",this.trigger(i.ModifyBeforeStart,{selectType:this.getSelectType(),actionType:l.Modify}),e.addEventListener("mousedown",this.onCanvasMousedown),e.addEventListener("mousemove",this.onCanvasIsModifyMousemove),this.initMoveEvents(),this.status=a.Running,this.trigger(i.ModifyStart,{selectType:this.getSelectType(),actionType:l.Modify}))},e.prototype.end=function(t){var e,n;t&&(n=this.context)&&(e=n.getCanvasEl(),n=n.getAssistCanvasEl(),e)&&n&&(e.style.cursor=n.style.cursor="default",e.removeEventListener("mousedown",this.onCanvasMousedown),e.removeEventListener("mousemove",this.onCanvasMousemove),e.removeEventListener("mouseup",this.onCanvasMouseup),e.removeEventListener("mousemove",this.onCanvasIsModifyMousemove),this.clearMoveEvents(),t=f.A.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),this.drawModify(t),this.status=a.End,this.startPoint=null,this.trigger(i.ModifyEnd,this.data),e.style.cursor=n.style.cursor="default")},e.prototype.destroy=function(){var t,e,n=this.context;n&&(t=n.getCanvasEl(),e=n.getAssistCanvasEl(),t)&&e&&(t.style.cursor=e.style.cursor="default",this.remove(this.EmitActions.CONTEXT,this.onContext),t.removeEventListener("mousedown",this.onCanvasMousedown),t.removeEventListener("mousemove",this.onCanvasMousemove),t.removeEventListener("mouseup",this.onCanvasMouseup),t.removeEventListener("mousemove",this.onCanvasIsModifyMousemove),this.clearMoveEvents(),n.clearDraw(),n.drawHistoryData(),this.status=a.Destroy,this.startPoint=null,this.trigger(i.Destroy,{selectType:this.getSelectType(),actionType:l.Modify}),t.style.cursor=e.style.cursor="default")},e.prototype.setContext=function(t){this.context=t,this.trigger(this.EmitActions.CONTEXT)},e.prototype.getStatus=function(){return this.status},e}(v.A.Events);const st=rt;var lt,ct=(lt=function(t,e){return(lt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}lt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ut=function(){return(ut=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},dt=function(t){function e(e){return(e=t.call(this,e)||this).ResizeCursorMapping=new Map([[0,"ns-resize"],[1,"ew-resize"],[2,"ns-resize"],[3,"ew-resize"]]),e}return ct(e,t),e.prototype.drawAnchors=function(){if(this.context){var t=this.context.getCtx();if(t)for(var e=(n=null==(n=null==(n=null==this?void 0:this.data)?void 0:n.data)?void 0:n.data).center,n=n.radius,o=[{x:e.x,y:e.y-n},{x:e.x+n,y:e.y},{x:e.x,y:e.y+n},{x:e.x-n,y:e.y}],a=0;a<o.length;a++){var i=o[a];t.beginPath(),this.setAnchorCircleStyle(),t.ellipse(i.x,i.y,this.anchorRadius,this.anchorRadius,45*Math.PI/180,0,2*Math.PI),t.closePath(),t.stroke(),t.fill()}}},e.prototype.getPointInAnchor=function(t){if(!this.data)return null;for(var e=null,n=-1,o=(a=null==(a=null==(a=null==this?void 0:this.data)?void 0:a.data)?void 0:a.data).center,a=a.radius,i=[{x:o.x,y:o.y-a},{x:o.x+a,y:o.y},{x:o.x,y:o.y+a},{x:o.x-a,y:o.y}],r=0;r<i.length;r++){var s=i[r],l=this.anchorRadius+this.anchorLineWidth;if(f.A.isPointInCircle(t,{center:s,radius:l})){e=s,n=r;break}}return e&&-1!==n?{point:e,index:n}:null},e.prototype.setResizeCursorByIndex=function(t){var e,n;this.context&&(e=this.context.getCanvasEl(),n=this.context.getAssistCanvasEl(),e)&&n&&(e.style.cursor=n.style.cursor=this.ResizeCursorMapping.get(t))},e.prototype.drawModify=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();n&&o&&this.data&&this.startPoint&&(o=n.getHistoryDataById(this.data.data.id))&&(e=o.data.center,o.data.radius=f.A.getDistanceByBetweenPoint({p1:e,p2:t}),this.data.data=o,n.clearDraw(),n.drawHistoryData(),this.drawAnchors())},e.prototype.drawMove=function(t,e){var n,o=this.context,a=null==o?void 0:o.getCtx();o&&a&&this.data&&(a=o.getHistoryDataById(this.data.data.id))&&(n=e.x-t.x,e=e.y-t.y,a.data.center.x+=n,a.data.center.y+=e,this.data.data=a,o.clearDraw(),o.drawHistoryData(),this.drawAnchors())},e.prototype.getSelectType=function(){return s.Circle},e.prototype.isCanMove=function(t){var e,n;return!!this.data&&(e=(n=null==(n=null==(n=null==this?void 0:this.data)?void 0:n.data)?void 0:n.data).center,n=n.radius,f.A.isPointInCircle(t,{center:e,radius:n}))&&!this.getPointInAnchor(t)},e.prototype.drawMoveGeometry=function(){this.context&&this.data&&H.draw(this.context.getAssistCtx(),this.data)},e.prototype.drawMoveGeometry=function(t,e){var n,o;return this.context&&this.data&&t&&e?((n=JSON.parse(JSON.stringify(this.data.data))).data=ut(ut({},n.data),{center:ut({},n.data.center)}),o=e.x-t.x,e=e.y-t.y,n.data&&n.data.center&&(n.data.center.x+=o,n.data.center.y+=e,o=ut(ut({},this.moveGemStyle),null!=(t=n.style)?t:{}),n.style.lineWidth=o.lineWidth,n.style.lineJoin=o.lineJoin,n.style.lineCap=o.lineCap,n.lineDash=o.lineDash,n.style.lineDashOffset=o.lineDashOffset,n.style.strokeStyle=o.strokeStyle,n.style.fillStyle=o.fillStyle,n.style.globalAlpha=null!=(e=o.globalAlpha)?e:1,H.draw(this.context.getAssistCtx(),n)),n):null},e}(st);const yt=dt;var pt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ht=function(){return(ht=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},ft=function(t){function e(e){return(e=t.call(this,e)||this).rectangleAnchorPoints=[],e.indexToModifyHandlerMapping=new Map([[0,e.modifyDataByLeftTop],[1,e.modifyDataByCenterTop],[2,e.modifyDataByRightTop],[3,e.modifyDataByRightCenter],[4,e.modifyDataByRightBottom],[5,e.modifyDataByCenterBottom],[6,e.modifyDataByLeftBottom],[7,e.modifyDataByLeftCenter]]),e.ResizeCursorMapping=new Map([[0,"nwse-resize"],[1,"ns-resize"],[2,"nesw-resize"],[3,"ew-resize"],[4,"nwse-resize"],[5,"ns-resize"],[6,"nesw-resize"],[7,"ew-resize"]]),e}return pt(e,t),e.prototype.drawAnchors=function(){if(this.context){var t=this.context.getCtx();if(t){var e,n=(e=null==(e=null==(e=null==this?void 0:this.data)?void 0:e.data)?void 0:e.data).leftTopPoint,o=e.width,a=o/2,i=(e=e.height)/2;this.rectangleAnchorPoints=[ht({},n),{x:n.x+a,y:n.y},{x:n.x+o,y:n.y},{x:n.x+o,y:n.y+i},{x:n.x+o,y:n.y+e},{x:n.x+a,y:n.y+e},{x:n.x,y:n.y+e},{x:n.x,y:n.y+i}];for(var r=0;r<this.rectangleAnchorPoints.length;r++){var s=this.rectangleAnchorPoints[r];t.beginPath(),this.setAnchorCircleStyle(),t.ellipse(s.x,s.y,this.anchorRadius,this.anchorRadius,45*Math.PI/180,0,2*Math.PI),t.closePath(),t.stroke(),t.fill()}t.beginPath(),this.setAnchorLineStyle(),t.moveTo(n.x,n.y),t.lineTo(n.x+o,n.y),t.lineTo(n.x+o,n.y+e),t.lineTo(n.x,n.y+e),t.lineTo(n.x,n.y),t.closePath(),t.stroke()}}},e.prototype.getPointInAnchor=function(t){if(!this.data)return null;for(var e=null,n=-1,o=0;o<this.rectangleAnchorPoints.length;o++){var a=this.rectangleAnchorPoints[o],i=this.anchorRadius+this.anchorLineWidth;if(f.A.isPointInCircle(t,{center:a,radius:i})){e=a,n=o;break}}return e&&-1!==n?{point:e,index:n}:null},e.prototype.setResizeCursorByIndex=function(t){var e,n;this.context&&(e=this.context.getCanvasEl(),n=this.context.getAssistCanvasEl(),e)&&n&&(e.style.cursor=n.style.cursor=this.ResizeCursorMapping.get(t))},e.prototype.drawModify=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();n&&o&&this.data&&this.startPoint&&(o=n.getHistoryDataById(this.data.data.id))&&(e=this.indexToModifyHandlerMapping.get(this.startIndex))&&e.call(this,t)&&(this.data.data=o,n.clearDraw(),n.drawHistoryData(),this.drawAnchors())},e.prototype.drawMove=function(t,e){var n,o=this.context,a=null==o?void 0:o.getCtx();o&&a&&this.data&&(a=o.getHistoryDataById(this.data.data.id))&&(n=e.x-t.x,e=e.y-t.y,a.data.leftTopPoint.x+=n,a.data.leftTopPoint.y+=e,this.data.data=a,o.clearDraw(),o.drawHistoryData(),this.drawAnchors())},e.prototype.getSelectType=function(){return s.Diamond},e.prototype.getBox=function(){var t,e=this.context,n=null==e?void 0:e.getCtx();return e&&n&&this.data&&(n=e.getHistoryDataById(this.data.data.id))?(n=(e=n.data).leftTopPoint,t=e.width,e=e.height,{leftTop:ht({},n),rightTop:{x:n.x+t,y:n.y},rightBottom:{x:n.x+t,y:n.y+e},leftBottom:{x:n.x,y:n.y+e}}):null},e.prototype.modifyDataByLeftTop=function(t){var e=this.context,n=null==e?void 0:e.getCtx();return!(!(e&&n&&this.data&&this.startPoint)||!(n=e.getHistoryDataById(this.data.data.id))||!(e=this.getBox())||t.x>e.rightTop.x||t.y>e.rightBottom.y||(n.data.leftTopPoint=t,n.data.width=e.rightTop.x-t.x,n.data.height=e.rightBottom.y-t.y,0))},e.prototype.modifyDataByCenterTop=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();return!(!(n&&o&&this.data&&this.startPoint)||!(o=n.getHistoryDataById(this.data.data.id))||(n=o.data.width,!(e=this.getBox()))||t.y>e.leftBottom.y||(o.data.leftTopPoint={x:e.leftTop.x,y:t.y},o.data.width=n,o.data.height=e.rightBottom.y-t.y,0))},e.prototype.modifyDataByRightTop=function(t){var e=this.context,n=null==e?void 0:e.getCtx();return!(!(e&&n&&this.data&&this.startPoint)||!(n=e.getHistoryDataById(this.data.data.id))||!(e=this.getBox())||t.x<e.leftTop.x||t.y>e.leftBottom.y||(n.data.leftTopPoint={x:e.leftTop.x,y:t.y},n.data.width=t.x-e.leftTop.x,n.data.height=e.rightBottom.y-t.y,0))},e.prototype.modifyDataByRightCenter=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!(!(o&&a&&this.data&&this.startPoint)||!(a=o.getHistoryDataById(this.data.data.id))||(e=(o=a.data).leftTopPoint,o=o.height,!(n=this.getBox()))||t.x<n.leftTop.x||(a.data.leftTopPoint=ht({},e),a.data.width=t.x-n.leftTop.x,a.data.height=o,0))},e.prototype.modifyDataByRightBottom=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();return!(!(n&&o&&this.data&&this.startPoint)||!(o=n.getHistoryDataById(this.data.data.id))||(n=o.data.leftTopPoint,!(e=this.getBox()))||t.x<e.leftTop.x||t.y<e.leftTop.y||(o.data.leftTopPoint=ht({},n),o.data.width=t.x-e.leftTop.x,o.data.height=t.y-e.leftTop.y,0))},e.prototype.modifyDataByCenterBottom=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!(!(o&&a&&this.data&&this.startPoint)||!(a=o.getHistoryDataById(this.data.data.id))||(e=(o=a.data).leftTopPoint,o=o.width,!(n=this.getBox()))||t.y<n.leftTop.y||(a.data.leftTopPoint=ht({},e),a.data.width=o,a.data.height=t.y-n.leftTop.y,0))},e.prototype.modifyDataByLeftBottom=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();return!(!(n&&o&&this.data&&this.startPoint)||!(o=n.getHistoryDataById(this.data.data.id))||(n=o.data.leftTopPoint,!(e=this.getBox()))||t.x>e.rightBottom.x||t.y<e.rightTop.y||(o.data.leftTopPoint={x:t.x,y:n.y},o.data.width=e.rightBottom.x-t.x,o.data.height=t.y-e.rightTop.y,0))},e.prototype.modifyDataByLeftCenter=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!(!(o&&a&&this.data&&this.startPoint)||!(a=o.getHistoryDataById(this.data.data.id))||(e=(o=a.data).leftTopPoint,o=o.height,!(n=this.getBox()))||t.x>n.rightBottom.x||(a.data.leftTopPoint={x:t.x,y:e.y},a.data.width=n.rightBottom.x-t.x,a.data.height=o,0))},e.prototype.isCanMove=function(t){var e,n,o,a,i,r;return!!this.data&&(e=(n=null==(n=null==(n=null==this?void 0:this.data)?void 0:n.data)?void 0:n.data).leftTopPoint,o=(r=n.width)/2,a=(n=n.height)/2,i=j.zx7([t.x,t.y]),r=j.n1([[[e.x,e.y+a],[e.x+o,e.y],[e.x+r,e.y+a],[e.x+o,e.y+n],[e.x,e.y+a]]]),j.mFO(i,r))&&!this.getPointInAnchor(t)},e.prototype.drawMoveGeometry=function(){this.context&&this.data&&G.draw(this.context.getAssistCtx(),this.data)},e.prototype.drawMoveGeometry=function(t,e){var n,o;return this.context&&this.data&&t&&e?((n=JSON.parse(JSON.stringify(this.data.data))).data=ht(ht({},n.data),{leftTopPoint:ht({},n.data.leftTopPoint)}),o=e.x-t.x,e=e.y-t.y,n.data&&n.data.leftTopPoint&&(n.data.leftTopPoint.x+=o,n.data.leftTopPoint.y+=e,o=ht(ht({},this.moveGemStyle),null!=(t=n.style)?t:{}),n.style.lineWidth=o.lineWidth,n.style.lineJoin=o.lineJoin,n.style.lineCap=o.lineCap,n.lineDash=o.lineDash,n.style.lineDashOffset=o.lineDashOffset,n.style.strokeStyle=o.strokeStyle,n.style.fillStyle=o.fillStyle,n.style.globalAlpha=null!=(e=o.globalAlpha)?e:1,G.draw(this.context.getAssistCtx(),n)),n):null},e.prototype.destroy=function(){this.startIndex=-1,t.prototype.destroy.call(this)},e}(st);const vt=ft;var mt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),gt=function(){return(gt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},xt=function(t,e,n){if(n||2===arguments.length)for(var o,a=0,i=e.length;a<i;a++)!o&&a in e||((o=o||Array.prototype.slice.call(e,0,a))[a]=e[a]);return t.concat(o||Array.prototype.slice.call(e))},Dt=function(t){function e(e){return(e=t.call(this,e)||this).startIndex=-1,e}return mt(e,t),e.prototype.drawAnchors=function(){var t;if(this.context){var e=this.context.getCtx();if(e)for(var n=(null==(t=null==(t=null==this?void 0:this.data)?void 0:t.data)?void 0:t.data)||[],o=0;o<n.length;o++){var a=n[o];e.beginPath(),this.setAnchorCircleStyle(),e.ellipse(a.x,a.y,this.anchorRadius,this.anchorRadius,45*Math.PI/180,0,2*Math.PI),e.closePath(),e.stroke(),e.fill()}}},e.prototype.getPointInAnchor=function(t){if(!this.data)return null;for(var e=null,n=-1,o=this.data.data.data,a=0;a<o.length;a++){var i=o[a],r=this.anchorRadius+this.anchorLineWidth;if(f.A.isPointInCircle(t,{center:i,radius:r})){e=i,n=a;break}}return e&&-1!==n?{point:e,index:n}:null},e.prototype.setResizeCursorByIndex=function(t){var e,n;this.context&&(e=this.context.getCanvasEl(),n=this.context.getAssistCanvasEl(),e)&&n&&(e.style.cursor=n.style.cursor="nesw-resize")},e.prototype.drawModify=function(t){var e=this.context,n=null==e?void 0:e.getCtx();e&&n&&this.data&&this.startPoint&&-1!==this.startIndex&&(n=e.getHistoryDataById(this.data.data.id))&&(n.data[this.startIndex]=t,this.data.data=n,e.clearDraw(),e.drawHistoryData(),this.drawAnchors())},e.prototype.drawMove=function(t,e){var n,o,a=this.context,i=null==a?void 0:a.getCtx();a&&i&&this.data&&(i=a.getHistoryDataById(this.data.data.id))&&(n=e.x-t.x,o=e.y-t.y,i.data.forEach((function(t){t.x+=n,t.y+=o})),this.data.data=i,a.clearDraw(),a.drawHistoryData(),this.drawAnchors())},e.prototype.getSelectType=function(){return s.Polygon},e.prototype.isCanMove=function(t){var e,n;return!!this.data&&((n=xt([],null==(n=null==(n=null==this?void 0:this.data)?void 0:n.data)?void 0:n.data,!0)).push(n[0]),e=j.zx7([t.x,t.y]),n=j.n1([n.map((function(t){return[t.x,t.y]}))]),j.mFO(e,n))&&!this.getPointInAnchor(t)},e.prototype.drawMoveGeometry=function(){this.context&&this.data&&F.draw(this.context.getAssistCtx(),this.data)},e.prototype.drawMoveGeometry=function(t,e){var n,o,a;return this.context&&this.data&&t&&e?((n=JSON.parse(JSON.stringify(this.data.data))).data=n.data.map((function(t){return gt({},t)})),o=e.x-t.x,a=e.y-t.y,n.data&&n.data.length&&(n.data.forEach((function(t){t.x+=o,t.y+=a})),t=gt(gt({},this.moveGemStyle),null!=(e=n.style)?e:{}),n.style.lineWidth=t.lineWidth,n.style.lineJoin=t.lineJoin,n.style.lineCap=t.lineCap,n.lineDash=t.lineDash,n.style.lineDashOffset=t.lineDashOffset,n.style.strokeStyle=t.strokeStyle,n.style.fillStyle=t.fillStyle,n.style.globalAlpha=null!=(e=t.globalAlpha)?e:1,F.draw(this.context.getAssistCtx(),n)),n):null},e}(st);const Ct=Dt;var wt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Mt=function(){return(Mt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},Pt=function(t){function e(e){return(e=t.call(this,e)||this).rectangleAnchorPoints=[],e.indexToModifyHandlerMapping=new Map([[0,e.modifyDataByLeftTop],[1,e.modifyDataByCenterTop],[2,e.modifyDataByRightTop],[3,e.modifyDataByRightCenter],[4,e.modifyDataByRightBottom],[5,e.modifyDataByCenterBottom],[6,e.modifyDataByLeftBottom],[7,e.modifyDataByLeftCenter]]),e.ResizeCursorMapping=new Map([[0,"nwse-resize"],[1,"ns-resize"],[2,"nesw-resize"],[3,"ew-resize"],[4,"nwse-resize"],[5,"ns-resize"],[6,"nesw-resize"],[7,"ew-resize"]]),e}return wt(e,t),e.prototype.drawAnchors=function(){if(this.context){var t=this.context.getCtx();if(t){var e,n=(e=null==(e=null==(e=null==this?void 0:this.data)?void 0:e.data)?void 0:e.data).leftTopPoint,o=e.width,a=o/2,i=(e=e.height)/2;this.rectangleAnchorPoints=[Mt({},n),{x:n.x+a,y:n.y},{x:n.x+o,y:n.y},{x:n.x+o,y:n.y+i},{x:n.x+o,y:n.y+e},{x:n.x+a,y:n.y+e},{x:n.x,y:n.y+e},{x:n.x,y:n.y+i}];for(var r=0;r<this.rectangleAnchorPoints.length;r++){var s=this.rectangleAnchorPoints[r];t.beginPath(),this.setAnchorCircleStyle(),t.ellipse(s.x,s.y,this.anchorRadius,this.anchorRadius,45*Math.PI/180,0,2*Math.PI),t.closePath(),t.stroke(),t.fill()}}}},e.prototype.getPointInAnchor=function(t){if(!this.data)return null;for(var e=null,n=-1,o=0;o<this.rectangleAnchorPoints.length;o++){var a=this.rectangleAnchorPoints[o],i=this.anchorRadius+this.anchorLineWidth;if(f.A.isPointInCircle(t,{center:a,radius:i})){e=a,n=o;break}}return e&&-1!==n?{point:e,index:n}:null},e.prototype.setResizeCursorByIndex=function(t){var e,n;this.context&&(e=this.context.getCanvasEl(),n=this.context.getAssistCanvasEl(),e)&&n&&(e.style.cursor=n.style.cursor=this.ResizeCursorMapping.get(t))},e.prototype.drawModify=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();n&&o&&this.data&&this.startPoint&&(o=n.getHistoryDataById(this.data.data.id))&&(e=this.indexToModifyHandlerMapping.get(this.startIndex))&&e.call(this,t)&&(this.data.data=o,n.clearDraw(),n.drawHistoryData(),this.drawAnchors())},e.prototype.drawMove=function(t,e){var n,o=this.context,a=null==o?void 0:o.getCtx();o&&a&&this.data&&(a=o.getHistoryDataById(this.data.data.id))&&(n=e.x-t.x,e=e.y-t.y,a.data.leftTopPoint.x+=n,a.data.leftTopPoint.y+=e,this.data.data=a,o.clearDraw(),o.drawHistoryData(),this.drawAnchors())},e.prototype.getSelectType=function(){return s.Rectangle},e.prototype.getBox=function(){var t,e=this.context,n=null==e?void 0:e.getCtx();return e&&n&&this.data&&(n=e.getHistoryDataById(this.data.data.id))?(n=(e=n.data).leftTopPoint,t=e.width,e=e.height,{leftTop:Mt({},n),rightTop:{x:n.x+t,y:n.y},rightBottom:{x:n.x+t,y:n.y+e},leftBottom:{x:n.x,y:n.y+e}}):null},e.prototype.modifyDataByLeftTop=function(t){var e=this.context,n=null==e?void 0:e.getCtx();return!(!(e&&n&&this.data&&this.startPoint)||!(n=e.getHistoryDataById(this.data.data.id))||!(e=this.getBox())||t.x>e.rightTop.x||t.y>e.rightBottom.y||(n.data.leftTopPoint=t,n.data.width=e.rightTop.x-t.x,n.data.height=e.rightBottom.y-t.y,0))},e.prototype.modifyDataByCenterTop=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();return!(!(n&&o&&this.data&&this.startPoint)||!(o=n.getHistoryDataById(this.data.data.id))||(n=o.data.width,!(e=this.getBox()))||t.y>e.leftBottom.y||(o.data.leftTopPoint={x:e.leftTop.x,y:t.y},o.data.width=n,o.data.height=e.rightBottom.y-t.y,0))},e.prototype.modifyDataByRightTop=function(t){var e=this.context,n=null==e?void 0:e.getCtx();return!(!(e&&n&&this.data&&this.startPoint)||!(n=e.getHistoryDataById(this.data.data.id))||!(e=this.getBox())||t.x<e.leftTop.x||t.y>e.leftBottom.y||(n.data.leftTopPoint={x:e.leftTop.x,y:t.y},n.data.width=t.x-e.leftTop.x,n.data.height=e.rightBottom.y-t.y,0))},e.prototype.modifyDataByRightCenter=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!(!(o&&a&&this.data&&this.startPoint)||!(a=o.getHistoryDataById(this.data.data.id))||(e=(o=a.data).leftTopPoint,o=o.height,!(n=this.getBox()))||t.x<n.leftTop.x||(a.data.leftTopPoint=Mt({},e),a.data.width=t.x-n.leftTop.x,a.data.height=o,0))},e.prototype.modifyDataByRightBottom=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();return!(!(n&&o&&this.data&&this.startPoint)||!(o=n.getHistoryDataById(this.data.data.id))||(n=o.data.leftTopPoint,!(e=this.getBox()))||t.x<e.leftTop.x||t.y<e.leftTop.y||(o.data.leftTopPoint=Mt({},n),o.data.width=t.x-e.leftTop.x,o.data.height=t.y-e.leftTop.y,0))},e.prototype.modifyDataByCenterBottom=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!(!(o&&a&&this.data&&this.startPoint)||!(a=o.getHistoryDataById(this.data.data.id))||(e=(o=a.data).leftTopPoint,o=o.width,!(n=this.getBox()))||t.y<n.leftTop.y||(a.data.leftTopPoint=Mt({},e),a.data.width=o,a.data.height=t.y-n.leftTop.y,0))},e.prototype.modifyDataByLeftBottom=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();return!(!(n&&o&&this.data&&this.startPoint)||!(o=n.getHistoryDataById(this.data.data.id))||(n=o.data.leftTopPoint,!(e=this.getBox()))||t.x>e.rightBottom.x||t.y<e.rightTop.y||(o.data.leftTopPoint={x:t.x,y:n.y},o.data.width=e.rightBottom.x-t.x,o.data.height=t.y-e.rightTop.y,0))},e.prototype.modifyDataByLeftCenter=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!(!(o&&a&&this.data&&this.startPoint)||!(a=o.getHistoryDataById(this.data.data.id))||(e=(o=a.data).leftTopPoint,o=o.height,!(n=this.getBox()))||t.x>n.rightBottom.x||(a.data.leftTopPoint={x:t.x,y:e.y},a.data.width=n.rightBottom.x-t.x,a.data.height=o,0))},e.prototype.isCanMove=function(t){var e,n,o,a;return!!this.data&&(e=(n=null==(n=null==(n=null==this?void 0:this.data)?void 0:n.data)?void 0:n.data).leftTopPoint,a=n.width,n=n.height,o=j.zx7([t.x,t.y]),a=j.n1([[[e.x,e.y],[e.x+a,e.y],[e.x+a,e.y+n],[e.x,e.y+n],[e.x,e.y]]]),j.mFO(o,a))&&!this.getPointInAnchor(t)},e.prototype.drawMoveGeometry=function(){this.context&&this.data&&Q.draw(this.context.getAssistCtx(),this.data)},e.prototype.drawMoveGeometry=function(t,e){var n,o;return this.context&&this.data&&t&&e?((n=JSON.parse(JSON.stringify(this.data.data))).data=Mt(Mt({},n.data),{leftTopPoint:Mt({},n.data.leftTopPoint)}),o=e.x-t.x,e=e.y-t.y,n.data&&n.data.leftTopPoint&&(n.data.leftTopPoint.x+=o,n.data.leftTopPoint.y+=e,o=Mt(Mt({},this.moveGemStyle),null!=(t=n.style)?t:{}),n.style.lineWidth=o.lineWidth,n.style.lineJoin=o.lineJoin,n.style.lineCap=o.lineCap,n.lineDash=o.lineDash,n.style.lineDashOffset=o.lineDashOffset,n.style.strokeStyle=o.strokeStyle,n.style.fillStyle=o.fillStyle,n.style.globalAlpha=null!=(e=o.globalAlpha)?e:1,Q.draw(this.context.getAssistCtx(),n)),n):null},e.prototype.destroy=function(){this.startIndex=-1,t.prototype.destroy.call(this)},e}(st);const Tt=Pt;var bt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Et=function(){return(Et=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},St=function(t){function e(e){return(e=t.call(this,e)||this).ResizeCursorMapping=new Map([[0,"ns-resize"],[1,"ew-resize"],[2,"ns-resize"],[3,"ew-resize"]]),e}return bt(e,t),e.prototype.drawAnchors=function(){if(this.context){var t=this.context.getCtx();if(t){for(var e=(n=null==(n=null==(n=null==this?void 0:this.data)?void 0:n.data)?void 0:n.data).center,n=n.outRadius,o=[{x:e.x,y:e.y-n},{x:e.x+n,y:e.y},{x:e.x,y:e.y+n},{x:e.x-n,y:e.y}],a=0;a<o.length;a++){var i=o[a];t.beginPath(),this.setAnchorCircleStyle(),t.ellipse(i.x,i.y,this.anchorRadius,this.anchorRadius,45*Math.PI/180,0,2*Math.PI),t.closePath(),t.stroke(),t.fill()}t.beginPath(),this.setAnchorLineStyle(),t.ellipse(e.x,e.y,n,n,45*Math.PI/180,0,2*Math.PI),t.closePath(),t.stroke()}}},e.prototype.getPointInAnchor=function(t){if(!this.data)return null;for(var e=null,n=-1,o=(a=null==(a=null==(a=null==this?void 0:this.data)?void 0:a.data)?void 0:a.data).center,a=a.outRadius,i=[{x:o.x,y:o.y-a},{x:o.x+a,y:o.y},{x:o.x,y:o.y+a},{x:o.x-a,y:o.y}],r=0;r<i.length;r++){var s=i[r],l=this.anchorRadius+this.anchorLineWidth;if(f.A.isPointInCircle(t,{center:s,radius:l})){e=s,n=r;break}}return e&&-1!==n?{point:e,index:n}:null},e.prototype.setResizeCursorByIndex=function(t){var e,n;this.context&&(e=this.context.getCanvasEl(),n=this.context.getAssistCanvasEl(),e)&&n&&(t=this.ResizeCursorMapping.get(t),e.style.cursor=n.style.cursor=t)},e.prototype.drawModify=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();n&&o&&this.data&&this.startPoint&&(o=n.getHistoryDataById(this.data.data.id))&&(e=o.data.center,o.data.outRadius=f.A.getDistanceByBetweenPoint({p1:e,p2:t}),o.data.innerRadius=o.data.outRadius/2,this.data.data=o,n.clearDraw(),n.drawHistoryData(),this.drawAnchors())},e.prototype.drawMove=function(t,e){var n,o=this.context,a=null==o?void 0:o.getCtx();o&&a&&this.data&&(a=o.getHistoryDataById(this.data.data.id))&&(n=e.x-t.x,e=e.y-t.y,a.data.center.x+=n,a.data.center.y+=e,this.data.data=a,o.clearDraw(),o.drawHistoryData(),this.drawAnchors())},e.prototype.getSelectType=function(){return s.Start},e.prototype.isCanMove=function(t){if(!this.data)return!1;for(var e=(a=null==(a=null==(a=null==this?void 0:this.data)?void 0:a.data)?void 0:a.data).center,n=a.outRadius,o=a.innerRadius,a=j.zx7([t.x,t.y]),i=[],r=0;r<5;r++)i.push({x:Math.cos((18+72*r)/180*Math.PI)*n+e.x,y:-Math.sin((18+72*r)/180*Math.PI)*n+e.y}),i.push({x:Math.cos((54+72*r)/180*Math.PI)*o+e.x,y:-Math.sin((54+72*r)/180*Math.PI)*o+e.y});var s=i.map((function(t){return[t.x,t.y]}));s.push(s[0]),s=j.n1([s]);return j.mFO(a,s)&&!this.getPointInAnchor(t)},e.prototype.drawMoveGeometry=function(){this.context&&this.data&&$.draw(this.context.getAssistCtx(),this.data)},e.prototype.drawMoveGeometry=function(t,e){var n,o;return console.trace("drawMoveGeometry"),this.context&&this.data&&t&&e?((n=JSON.parse(JSON.stringify(this.data.data))).data=Et(Et({},n.data),{center:Et({},n.data.center)}),o=e.x-t.x,e=e.y-t.y,n.data&&n.data.center&&(n.data.center.x+=o,n.data.center.y+=e,o=Et(Et({},this.moveGemStyle),null!=(t=n.style)?t:{}),n.style.lineWidth=o.lineWidth,n.style.lineJoin=o.lineJoin,n.style.lineCap=o.lineCap,n.lineDash=o.lineDash,n.style.lineDashOffset=o.lineDashOffset,n.style.strokeStyle=o.strokeStyle,n.style.fillStyle=o.fillStyle,n.style.globalAlpha=null!=(e=o.globalAlpha)?e:1,$.draw(this.context.getAssistCtx(),n)),n):null},e}(st);const At=St;var It=function(){var t=function(e,n){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Rt=function(){return(Rt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},Bt=function(t,e,n){if(n||2===arguments.length)for(var o,a=0,i=e.length;a<i;a++)!o&&a in e||((o=o||Array.prototype.slice.call(e,0,a))[a]=e[a]);return t.concat(o||Array.prototype.slice.call(e))},Ot=function(t){function e(e){return(e=t.call(this,e)||this).rectangleAnchorPoints=[],e.indexToModifyHandlerMapping=new Map([[0,e.modifyDataByLeftTop],[1,e.modifyDataByCenterTop],[2,e.modifyDataByRightTop],[3,e.modifyDataByRightCenter],[4,e.modifyDataByRightBottom],[5,e.modifyDataByCenterBottom],[6,e.modifyDataByLeftBottom],[7,e.modifyDataByLeftCenter]]),e.ResizeCursorMapping=new Map([[0,"nwse-resize"],[1,"ns-resize"],[2,"nesw-resize"],[3,"ew-resize"],[4,"nwse-resize"],[5,"ns-resize"],[6,"nesw-resize"],[7,"ew-resize"]]),e}return It(e,t),e.prototype.drawAnchors=function(){if(this.context){var t=this.context.getCtx();if(t)if((e=(null==(e=null==(e=null==this?void 0:this.data)?void 0:e.data)?void 0:e.data).points)&&e.length){var e,n={x:e[0].x,y:e[1].y},o=e[2].x-e[0].x,a=o/2,i=(e=e[2].y-e[1].y)/2;this.rectangleAnchorPoints=[Rt({},n),{x:n.x+a,y:n.y},{x:n.x+o,y:n.y},{x:n.x+o,y:n.y+i},{x:n.x+o,y:n.y+e},{x:n.x+a,y:n.y+e},{x:n.x,y:n.y+e},{x:n.x,y:n.y+i}];for(var r=0;r<this.rectangleAnchorPoints.length;r++){var s=this.rectangleAnchorPoints[r];t.beginPath(),this.setAnchorCircleStyle(),t.ellipse(s.x,s.y,this.anchorRadius,this.anchorRadius,45*Math.PI/180,0,2*Math.PI),t.closePath(),t.stroke(),t.fill()}t.beginPath(),this.setAnchorLineStyle(),t.moveTo(n.x,n.y),t.lineTo(n.x+o,n.y),t.lineTo(n.x+o,n.y+e),t.lineTo(n.x,n.y+e),t.lineTo(n.x,n.y),t.closePath(),t.stroke()}}},e.prototype.getPointInAnchor=function(t){if(!this.data)return null;for(var e=null,n=-1,o=0;o<this.rectangleAnchorPoints.length;o++){var a=this.rectangleAnchorPoints[o],i=this.anchorRadius+this.anchorLineWidth;if(f.A.isPointInCircle(t,{center:a,radius:i})){e=a,n=o;break}}return e&&-1!==n?{point:e,index:n}:null},e.prototype.setResizeCursorByIndex=function(t){var e,n;this.context&&(e=this.context.getCanvasEl(),n=this.context.getAssistCanvasEl(),e)&&n&&(e.style.cursor=n.style.cursor=this.ResizeCursorMapping.get(t))},e.prototype.drawModify=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();n&&o&&this.data&&this.startPoint&&(o=n.getHistoryDataById(this.data.data.id))&&(e=this.indexToModifyHandlerMapping.get(this.startIndex))&&e.call(this,t)&&(this.data.data=o,n.clearDraw(),n.drawHistoryData(),this.drawAnchors())},e.prototype.drawMove=function(t,e){var n,o,a=this.context,i=null==a?void 0:a.getCtx();a&&i&&this.data&&(i=a.getHistoryDataById(this.data.data.id))&&(n=e.x-t.x,o=e.y-t.y,i.data.points.forEach((function(t){t.x+=n,t.y+=o})),this.data.data=i,a.clearDraw(),a.drawHistoryData(),this.drawAnchors())},e.prototype.getSelectType=function(){return s.Triangle},e.prototype.getBox=function(){var t,e,n=this.context;return n&&this.data&&(n=n.getHistoryDataById(this.data.data.id))&&(n=n.data.points)&&n.length?(t={x:n[0].x,y:n[1].y},e=n[2].x-n[0].x,n=n[2].y-n[1].y,{leftTop:Rt({},t),rightTop:{x:t.x+e,y:t.y},rightBottom:{x:t.x+e,y:t.y+n},leftBottom:{x:t.x,y:t.y+n}}):null},e.prototype.modifyDataByLeftTop=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();return!!(n&&o&&this.data&&this.startPoint)&&!!(o=n.getHistoryDataById(this.data.data.id))&&!(!(n=o.data.points)||!n.length||!(n=this.getBox())||t.x>n.rightTop.x||t.y>n.rightBottom.y||(e=n.rightTop.x-t.x,n=n.rightBottom.y-t.y,o.data.points=[{x:t.x,y:t.y+n},{x:t.x+e/2,y:t.y},{x:t.x+e,y:t.y+n}],0))},e.prototype.modifyDataByCenterTop=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!!(o&&a&&this.data&&this.startPoint)&&!!(a=o.getHistoryDataById(this.data.data.id))&&!(!(o=a.data.points)||!o.length||!(o=this.getBox())||t.y>o.leftBottom.y||(e={x:o.leftTop.x,y:t.y},n=o.rightTop.x-o.leftTop.x,o=o.rightBottom.y-t.y,a.data.points=[{x:e.x,y:e.y+o},{x:e.x+n/2,y:e.y},{x:e.x+n,y:e.y+o}],0))},e.prototype.modifyDataByRightTop=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!!(o&&a&&this.data&&this.startPoint)&&!!(a=o.getHistoryDataById(this.data.data.id))&&!(!(o=a.data.points)||!o.length||!(o=this.getBox())||t.x<o.leftTop.x||t.y>o.leftBottom.y||(e={x:o.leftTop.x,y:t.y},n=t.x-o.leftTop.x,o=o.rightBottom.y-t.y,a.data.points=[{x:e.x,y:e.y+o},{x:e.x+n/2,y:e.y},{x:e.x+n,y:e.y+o}],0))},e.prototype.modifyDataByRightCenter=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();return!!(n&&o&&this.data&&this.startPoint)&&!!(o=n.getHistoryDataById(this.data.data.id))&&!(!(n=o.data.points)||!n.length||!(n=this.getBox())||t.x<n.leftTop.x||(e={x:n.leftTop.x,y:n.leftTop.y},t=t.x-n.leftTop.x,n=n.rightBottom.y-n.rightTop.y,o.data.points=[{x:e.x,y:e.y+n},{x:e.x+t/2,y:e.y},{x:e.x+t,y:e.y+n}],0))},e.prototype.modifyDataByRightBottom=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!!(o&&a&&this.data&&this.startPoint)&&!!(a=o.getHistoryDataById(this.data.data.id))&&!(!(o=a.data.points)||!o.length||!(o=this.getBox())||t.x<o.leftTop.x||t.y<o.leftTop.y||(e=Rt({},o.leftTop),n=t.x-o.leftTop.x,t=t.y-o.leftTop.y,a.data.points=[{x:e.x,y:e.y+t},{x:e.x+n/2,y:e.y},{x:e.x+n,y:e.y+t}],0))},e.prototype.modifyDataByCenterBottom=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!!(o&&a&&this.data&&this.startPoint)&&!!(a=o.getHistoryDataById(this.data.data.id))&&!(!(o=a.data.points)||!o.length||!(o=this.getBox())||t.y<o.leftTop.y||(e=Rt({},o.leftTop),n=o.rightTop.x-o.leftTop.x,t=t.y-o.leftTop.y,a.data.points=[{x:e.x,y:e.y+t},{x:e.x+n/2,y:e.y},{x:e.x+n,y:e.y+t}],0))},e.prototype.modifyDataByLeftBottom=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!!(o&&a&&this.data&&this.startPoint)&&!!(a=o.getHistoryDataById(this.data.data.id))&&!(!(o=a.data.points)||!o.length||!(o=this.getBox())||t.x>o.rightBottom.x||t.y<o.rightTop.y||(e={x:t.x,y:o.leftTop.y},n=o.rightBottom.x-t.x,t=t.y-o.rightTop.y,a.data.points=[{x:e.x,y:e.y+t},{x:e.x+n/2,y:e.y},{x:e.x+n,y:e.y+t}],0))},e.prototype.modifyDataByLeftCenter=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();return!!(n&&o&&this.data&&this.startPoint)&&!!(o=n.getHistoryDataById(this.data.data.id))&&!(!(n=o.data.points)||!n.length||!(n=this.getBox())||t.x>n.rightBottom.x||(e={x:t.x,y:n.leftTop.y},t=n.rightBottom.x-t.x,n=n.rightBottom.y-n.rightTop.y,o.data.points=[{x:e.x,y:e.y+n},{x:e.x+t/2,y:e.y},{x:e.x+t,y:e.y+n}],0))},e.prototype.isCanMove=function(t){var e,n;return!!this.data&&((n=Bt([],(null==(n=null==(n=null==(n=null==this?void 0:this.data)?void 0:n.data)?void 0:n.data)?void 0:n.points)||[],!0)).push(n[0]),e=j.zx7([t.x,t.y]),n=j.n1([n.map((function(t){return[t.x,t.y]}))]),j.mFO(e,n))&&!this.getPointInAnchor(t)},e.prototype.drawMoveGeometry=function(){this.context&&this.data&&ot.draw(this.context.getAssistCtx(),this.data)},e.prototype.drawMoveGeometry=function(t,e){var n,o,a;return this.context&&this.data&&t&&e?((n=JSON.parse(JSON.stringify(this.data.data))).data=Rt(Rt({},n.data),{points:n.data.points.map((function(t){return Rt({},t)}))}),o=e.x-t.x,a=e.y-t.y,n.data&&n.data.points&&n.data.points.length&&(n.data.points.forEach((function(t){t.x+=o,t.y+=a})),t=Rt(Rt({},this.moveGemStyle),null!=(e=n.style)?e:{}),n.style.lineWidth=t.lineWidth,n.style.lineJoin=t.lineJoin,n.style.lineCap=t.lineCap,n.lineDash=t.lineDash,n.style.lineDashOffset=t.lineDashOffset,n.style.strokeStyle=t.strokeStyle,n.style.fillStyle=t.fillStyle,n.style.globalAlpha=null!=(e=t.globalAlpha)?e:1,ot.draw(this.context.getAssistCtx(),n)),n):null},e.prototype.destroy=function(){this.startIndex=-1,t.prototype.destroy.call(this)},e}(st);const kt=Ot;var Lt=function(){return(Lt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function Vt(t,e){var n;null!=t&&t.beginPath(),null!=t&&t.ellipse((null==(n=e.data.center)?void 0:n.x)||0,(null==(n=e.data.center)?void 0:n.y)||0,e.data.radius,e.data.radius,45*Math.PI/180,0,2*Math.PI),null!=t&&t.closePath()}function Ht(t){return _t({leftTopPoint:{x:t.center.x-t.radius,y:t.center.y-t.radius},width:2*t.radius,height:2*t.radius})}function jt(t,e){var n;null!=t&&t.beginPath(),t.rect((null==(n=e.data.leftTopPoint)?void 0:n.x)||0,(null==(n=e.data.leftTopPoint)?void 0:n.y)||0,e.data.width,e.data.height),null!=t&&t.closePath()}function _t(t){return Lt({},t)}function zt(t,e){null!=t&&t.beginPath();var n=e.data.width/2,o=e.data.height/2;t.moveTo(e.data.leftTopPoint.x,e.data.leftTopPoint.y+o),t.lineTo(e.data.leftTopPoint.x+n,e.data.leftTopPoint.y),t.lineTo(e.data.leftTopPoint.x+e.data.width,e.data.leftTopPoint.y+o),t.lineTo(e.data.leftTopPoint.x+n,e.data.leftTopPoint.y+e.data.height),null!=t&&t.closePath()}function qt(t){return Lt({},t)}function Nt(t,e){null!=t&&t.beginPath();for(var n=0;n<5;n++)t.lineTo(Math.cos((18+72*n)/180*Math.PI)*e.data.outRadius+e.data.center.x,-Math.sin((18+72*n)/180*Math.PI)*e.data.outRadius+e.data.center.y),t.lineTo(Math.cos((54+72*n)/180*Math.PI)*e.data.innerRadius+e.data.center.x,-Math.sin((54+72*n)/180*Math.PI)*e.data.innerRadius+e.data.center.y);null!=t&&t.closePath()}function Gt(t){return Ht({center:t.center,radius:t.outRadius})}function Wt(t,e){null!=t&&t.beginPath(),t.moveTo(e.data.points[0].x,e.data.points[0].y),t.lineTo(e.data.points[1].x,e.data.points[1].y),t.lineTo(e.data.points[2].x,e.data.points[2].y),null!=t&&t.closePath()}function Jt(t){return _t({leftTopPoint:{x:t.points[0].x,y:t.points[1].y},width:t.points[2].x-t.points[0].x,height:t.points[2].y-t.points[1].y})}function Ut(t,e){t.beginPath(),((null==e?void 0:e.data)||[]).forEach((function(e,n){0===n?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)})),null!=t&&t.closePath()}function Ft(t){var e=t.map((function(t){return t.x})),n=(t=t.map((function(t){return t.y})),(e={minX:Math.min.apply(Math,e),maxX:Math.max.apply(Math,e)}).minX),o=(e=e.maxX,(t={minY:Math.min.apply(Math,t),maxY:Math.max.apply(Math,t)}).minY);return{leftTopPoint:{x:n,y:o},width:e-n,height:t.maxY-o}}var Xt=function(){return(Xt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},Zt="adhere-ui-cropping-core",Qt=(0,u.forwardRef)((function(t,e){var n=t.className,o=t.style,a=t.wrapProps,l=t.toolProps,c=t.areaProps,d=void 0===(D=t.minHeight)?200:D,y=t.toolBarConfig,p=(D=(0,u.useState)(null))[0],h=D[1],f=(t=(0,u.useState)(""))[0],v=t[1],g=(0,u.useRef)(null),D=(0,u.useRef)(null),b=(0,u.useRef)(null),E=(0,u.useRef)(null),S=(0,u.useRef)(),A=(0,u.useRef)(null),I=(0,u.useRef)(),R=(0,u.useRef)(null),B=(0,u.useRef)(null),O=(0,u.useRef)(null),k=(t=new Map([["left",function(){return u.createElement(T.A.TRBLC.LCLayout,Xt({},j,a,{lProps:Xt(Xt(Xt({},_),l),{children:q}),cProps:Xt(Xt(Xt({},z),c),{children:N})}))}],["right",function(){return u.createElement(T.A.TRBLC.CRLayout,Xt({},j,a,{rProps:Xt(Xt(Xt({},_),l),{children:q}),cProps:Xt(Xt(Xt({},z),c),{children:N})}))}],["top",function(){return u.createElement(T.A.TRBLC.TCLayout,Xt({},j,a,{tProps:Xt(Xt(Xt({},_),l),{children:q}),cProps:Xt(Xt(Xt({},z),c),{children:N})}))}],["bottom",function(){return u.createElement(T.A.TRBLC.CBLayout,Xt({},j,a,{bProps:Xt(Xt(Xt({},_),l),{children:q}),cProps:Xt(Xt(Xt({},z),c),{children:N})}))}]]),(0,u.useMemo)((function(){return new Map([[s.Polygon,Ct],[s.Circle,yt],[s.Rectangle,Tt],[s.Triangle,kt],[s.Diamond,vt],[s.Start,At]])}),[])),L=(0,u.useMemo)((function(){return{fillStyle:"transparent",strokeStyle:"#fff",lineWidth:1,lineCap:"round",lineJoin:"round",lineDash:[],lineDashOffset:-1,globalAlpha:1}}),[]),V={fillStyle:"#fff"},j=(0,u.useMemo)((function(){return{gutter:20,wrapClassName:"".concat(Zt,"-inner")}}),[]),_=(0,u.useMemo)((function(){return{fit:!0}}),[]),z=(0,u.useMemo)((function(){return{autoFixed:!0}}),[]),q=(0,u.useMemo)((function(){function t(t){return t===p?"primary":"default"}function e(t,e){return function(){a(t).then((function(){var t,n;R.current=new e,R.current&&(R.current.setAnchorStyle(Xt({},V)),R.current.setMoveGemStyle(Xt({},V)),null!=(t=null==(n=null==R?void 0:R.current)?void 0:n.on)&&t.call(n,i.DrawBeforeStart,(function(t){J(t)})),null!=(n=null==(t=null==R?void 0:R.current)?void 0:t.on)&&n.call(t,i.DrawStart,(function(t){J(t)})),null!=(t=null==(n=null==R?void 0:R.current)?void 0:n.on)&&t.call(n,i.Drawing,(function(t){J(t)})),null!=(n=null==(t=null==R?void 0:R.current)?void 0:t.on)&&n.call(t,i.DrawEnd,(function(t){J(t)})),null!=(t=null==(n=null==I?void 0:I.current)?void 0:n.changeAction)&&t.call(n,R.current),null!=(n=null==(t=null==R?void 0:R.current)?void 0:t.start))&&n.call(t,L)}))}}var n,o,a=function(t){var e,n;return t!==p&&(U(),null!=(n=null==(e=null==I?void 0:I.current)?void 0:e.clearCanvasAll)&&n.call(e),O.current=null,h(t)),t!==p?Promise.resolve():Promise.reject()},r=[{key:"open",value:(null==(r=null==(n=null==y?void 0:y.open)?void 0:n.render)?void 0:r.call(n,(function(){var t;null!=(t=B.current)&&t.click()})))||u.createElement(m.Ay,{key:"open",block:!0,size:"large",type:"primary",onClick:function(){var t;null!=(t=B.current)&&t.click()}},C.Ay.v("打开"))},f?[{key:"rectangle",value:(!y||!("rectangle"in y)||!("hide"in y.rectangle)||!(null!=(o=null==y?void 0:y.rectangle)&&o.hide))&&((null==(l=null==(o=null==y?void 0:y.rectangle)?void 0:o.render)?void 0:l.call(o,e(s.Rectangle,Q)))||u.createElement(m.Ay,{key:"rectangle",block:!0,size:"large",type:t(s.Rectangle),onClick:e(s.Rectangle,Q)},C.Ay.v("矩形剪裁")))},{key:"circle",value:(!y||!("circle"in y)||!("hide"in y.circle)||!(null!=(l=null==y?void 0:y.circle)&&l.hide))&&((null==(l=null==(o=null==y?void 0:y.circle)?void 0:o.render)?void 0:l.call(o,e(s.Circle,H)))||u.createElement(m.Ay,{key:"circle",block:!0,size:"large",type:t(s.Circle),onClick:e(s.Circle,H)},C.Ay.v("圆形剪裁")))},{key:"start",value:(!y||!("start"in y)||!("hide"in y.start)||!(null!=(l=null==y?void 0:y.start)&&l.hide))&&((null==(l=null==(o=null==y?void 0:y.start)?void 0:o.render)?void 0:l.call(o,e(s.Start,$)))||u.createElement(m.Ay,{key:"start",block:!0,size:"large",type:t(s.Start),onClick:e(s.Start,$)},C.Ay.v("五角星剪裁")))},{key:"triangle",value:(!y||!("triangle"in y)||!("hide"in y.triangle)||!(null!=(l=null==y?void 0:y.triangle)&&l.hide))&&((null==(l=null==(o=null==y?void 0:y.triangle)?void 0:o.render)?void 0:l.call(o,e(s.Triangle,ot)))||u.createElement(m.Ay,{key:"triangle",block:!0,size:"large",type:t(s.Triangle),onClick:e(s.Triangle,ot)},C.Ay.v("三角形剪裁")))},{key:"diamond",value:(!y||!("diamond"in y)||!("hide"in y.diamond)||!(null!=(l=null==y?void 0:y.diamond)&&l.hide))&&((null==(l=null==(o=null==y?void 0:y.diamond)?void 0:o.render)?void 0:l.call(o,e(s.Diamond,G)))||u.createElement(m.Ay,{key:"diamond",block:!0,size:"large",type:t(s.Diamond),onClick:e(s.Diamond,G)},C.Ay.v("菱形剪裁")))},{key:"polygon",value:(!y||!("polygon"in y)||!("hide"in y.polygon)||!(null!=(l=null==y?void 0:y.polygon)&&l.hide))&&((null==(l=null==(o=null==y?void 0:y.polygon)?void 0:o.render)?void 0:l.call(o,e(s.Polygon,F)))||u.createElement(m.Ay,{key:"polygon",block:!0,size:"large",type:t(s.Polygon),onClick:e(s.Polygon,F)},C.Ay.v("多边形剪裁")))}].filter((function(t){return!!t.value})):[{key:"",value:null}]].flat().filter((function(t){return!!t.value})),l=(r=function(t){var e=Array.from({length:t.length}).fill(null),n=[];return t.forEach((function(t,o){"sort"in t?n.push(t):e[o]=t})),n.forEach((function(t){e.splice(t.sort,0,t)})),e.filter((function(t){return!!t}))}(r.map((function(t){var e;return"sort"in(null!=(e=null==y?void 0:y[t.key])?e:{})?Xt(Xt({},t),{sort:null==y?void 0:y[t.key].sort}):t}))).map((function(t){return t.value})),["left","right"].includes(null!=(n=null==y?void 0:y.direction)?n:"left")?"vertical":"horizontal");return u.createElement(M.A,null,u.createElement(w.A,{direction:l,size:20},u.createElement("input",{type:"file",ref:B,accept:"image/*",style:{display:"none"}}),r))}),[p,l,f,y]),N=(0,u.useMemo)((function(){return u.createElement(M.A,null,u.createElement("div",{className:"".concat(Zt,"-background"),style:{minHeight:d||200}},f&&u.createElement("div",{className:"".concat(Zt,"-background-inner")},u.createElement("img",{ref:g,src:f,alt:""}),u.createElement("div",{className:"".concat(Zt,"-background-mask")}))),u.createElement("div",{className:"".concat(Zt,"-geometry"),ref:A}),u.createElement("div",{className:"".concat(Zt,"-clip"),ref:b}))}),[f,c]),W=(0,u.useCallback)((function(){var t=new Image;return t.src=f,t}),[f]),J=((0,P.A)((function(){h(null),g.current&&(g.current.onload=function(){I.current&&(O.current=null,X(),Y()),Z(),K()})}),[f]),(0,u.useLayoutEffect)((function(){function t(t){t=t.target.files[0];var e=new FileReader;e.onload=function(t){v(null==(t=t.target)?void 0:t.result)},e.readAsDataURL(t)}var e;return null!=(e=B.current)&&e.addEventListener("change",t),function(){var e;null!=(e=B.current)&&e.removeEventListener("change",t)}}),[]),(0,u.useImperativeHandle)(e,(function(){return{save:function(){return O.current&&O.current.data&&f?function(t){var e=t.data,n=(t=t.clipCtx,null==(n=new Map([[s.Circle,Ht],[s.Rectangle,_t],[s.Diamond,qt],[s.Start,Gt],[s.Triangle,Jt],[s.Polygon,Ft]]).get(e.data.type))?void 0:n(e.data.data));return e=t.getImageData(n.leftTopPoint.x,n.leftTopPoint.y,n.width,n.height),(t=document.createElement("canvas")).width=n.width,t.height=n.height,t.getContext("2d").putImageData(e,0,0),t.toDataURL("image/png",1)}({data:O.current,clipCtx:S.current}):""}}})),function(t){var e,n;t.data&&(O.current=t,null!=(e=null==(n=S.current)?void 0:n.restore)&&e.call(n),null!=(n=null==(e=S.current)?void 0:e.save)&&n.call(e),null!=(n=S.current)&&n.clearRect(0,0,null==(e=E.current)?void 0:e.width,null==(n=E.current)?void 0:n.height),null!=(e=new Map([[s.Circle,Vt],[s.Rectangle,jt],[s.Diamond,zt],[s.Start,Nt],[s.Triangle,Wt],[s.Polygon,Ut]]).get(t.selectType))&&e(S.current,t.data),null!=(n=null==S?void 0:S.current)&&n.clip(),null!=(e=null==S?void 0:S.current))&&e.drawImage(W(),0,0,null==(t=E.current)?void 0:t.width,null==(n=E.current)?void 0:n.height)}),U=function(){var t,e;null!=(e=S.current)&&e.restore(),null!=(t=null==(e=S.current)?void 0:e.clearRect)&&t.call(e,0,0,null==(t=E.current)?void 0:t.width,null==(e=E.current)?void 0:e.height)},X=function(){b.current&&(b.current.innerHTML="")},Z=function(){var t,e;E.current=document.createElement("canvas"),E.current.width=null==(e=g.current)?void 0:e.offsetWidth,E.current.height=null==(e=g.current)?void 0:e.offsetHeight,S.current=null==(t=null==(e=E.current)?void 0:e.getContext)?void 0:t.call(e,"2d"),null!=(e=null==(t=b.current)?void 0:t.appendChild)&&e.call(t,E.current)},Y=function(){var t,e;null!=(e=null==(t=null==I?void 0:I.current)?void 0:t.destroy)&&e.call(t)},K=function(){var t;A.current&&(A.current.style.width="".concat(null==(t=null==g?void 0:g.current)?void 0:t.offsetWidth,"px"),A.current.style.height="".concat(null==(t=null==g?void 0:g.current)?void 0:t.offsetHeight,"px"),I.current=new ue.PolygonSelection(A.current),I.current.on(r.CanvasClickGeometry,(function(t){var e=new(k.get(t.type))({selectType:t.type,actionType:"Draw",data:t});e.setAnchorStyle(Xt({},V)),e.setMoveGemStyle(Xt({},V)),e.on(i.ModifyBeforeStart,(function(t){J(t)})),e.on(i.ModifyStart,(function(t){J(t)})),e.on(i.Modifying,(function(t){J(t)})),e.on(i.ModifyEnd,(function(t){J(t),e.start()})),e.on(i.Moving,(function(t){J(t)})),e.on(i.MoveEnd,(function(t){J(t)})),null!=(t=null==I?void 0:I.current)&&t.changeAction(e),e.start()})),I.current.on(r.CanvasClickEmpty,(function(){var t;null!=(t=null==I?void 0:I.current)&&t.clearDraw(),null!=(t=null==I?void 0:I.current)&&t.clearAssistDraw(),null!=(t=null==I?void 0:I.current)&&t.drawHistoryData()})))};t=null==(e=t.get((null==y?void 0:y.direction)||"left"))?void 0:e();return u.createElement("div",{ref:D,className:"".concat(x()(Zt,null!=n?n:"")),style:null!=o?o:{}},t)}));Qt.displayName="CroppingCore";const Yt=Qt;var Kt=function(){return(Kt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},$t="adhere-ui-polygon-selection-cropping",te=(0,u.memo)((0,u.forwardRef)((function(t,e){var n=t.className,o=t.style,a=t.maskClassName,i=t.maskStyle,r=t.mask,s=t.value,l=t.onChange,c=t.modalProps,d=t.coreProps,y=(0,u.useRef)(null),p=(t=(0,u.useCallback)((function(){return u.createElement("div",{className:"".concat(x()("".concat($t,"-mask"),null!=a?a:"")),style:null!=i?i:{},onClick:function(){var t=D.A.Modal({config:Kt({title:C.Ay.v("编辑"),width:1024,maskClosable:!1,footer:[u.createElement(m.Ay,{key:"submit",type:"primary",title:C.Ay.v("保存"),onClick:function(){var e,n;y.current&&(n=null==(n=null==(e=null==y?void 0:y.current)?void 0:e.save)?void 0:n.call(e),l)&&(l(n),null!=t)&&t.close()}},C.Ay.v("保存"))]},null!=c?c:{}),children:u.createElement(Yt,Kt({ref:y},d))})}},r||C.Ay.v("编辑"))}),[a,i,r,s,l]),(0,u.useCallback)((function(){return s?u.createElement("img",{src:s,alt:""}):null}),[s]));return u.createElement("div",{className:x()($t,null!=n?n:""),style:null!=o?o:{}},t(),p())}))),ee=(te.displayName="InternalCropping",te);ee.CroppingCore=Yt;const ne=ee;var oe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ae=function(t){function e(){var e=t.call(this)||this;return e.startPoint=null,e.isMove=!1,e.points=[],e.onCanvasMouseDown=e.onCanvasMouseDown.bind(e),e.onCanvasMouseMove=e.onCanvasMouseMove.bind(e),e.onCanvasMouseUp=e.onCanvasMouseUp.bind(e),e}return oe(e,t),e.prototype.draw=function(t,e){void 0===e&&(e=!1);var n,o=this.context,a=this.style,i=null==o?void 0:o.getCtx();o&&i&&(n=o.getCanvasEl())&&(t=f.A.clientToCtxPoint({event:t,rect:null==n?void 0:n.getBoundingClientRect()}))&&(this.points.push(t),o.clearDraw(),o.drawHistoryData(),i.beginPath(),i.lineWidth=a.lineWidth,i.lineJoin=a.lineJoin,i.lineCap=a.lineCap,a.lineDash&&i.setLineDash(a.lineDash),i.lineDashOffset=a.lineDashOffset,i.strokeStyle=a.strokeStyle,i.fillStyle=a.fillStyle,i.globalAlpha=a.globalAlpha,this.points.forEach((function(t,e){0===e?i.moveTo(t.x,t.y):i.lineTo(t.x,t.y)})),e&&i.closePath(),i.stroke(),i.fill())},e.prototype.onCanvasMouseDown=function(t){var e;this.context&&(e=this.context.getCanvasEl())&&(this.startPoint=f.A.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),this.startPoint)&&(this.points.push(this.startPoint),null!=e&&e.addEventListener("mousemove",this.onCanvasMouseMove),null!=e)&&e.addEventListener("mouseup",this.onCanvasMouseUp)},e.prototype.onCanvasMouseMove=function(t){this.context&&(this.isMove=!0,this.draw(t),this.trigger(i.Drawing,{selectType:s.Free,actionType:l.Draw,data:{id:f.A.uuid(),type:s.Free,data:{points:JSON.parse(JSON.stringify(this.points))},style:this.style}}))},e.prototype.onCanvasMouseUp=function(t){this.isMove&&(this.end(t),t.stopPropagation())},e.draw=function(t,e){t&&e&&this.drawHistoryPath(t,e)},e.drawHistoryPath=function(t,e){t.beginPath(),e.style&&(t.lineWidth=e.style.lineWidth,t.lineJoin=e.style.lineJoin,t.lineCap=e.style.lineCap,e.style.lineDash&&t.setLineDash(e.style.lineDash),t.lineDashOffset=e.style.lineDashOffset,t.strokeStyle=e.style.strokeStyle,t.fillStyle=e.style.fillStyle,t.globalAlpha=null!=(n=e.style.globalAlpha)?n:1);var n=e.data.points;((void 0===n?[]:n)||[]).forEach((function(e,n){0===n?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)})),t.closePath(),t.stroke(),t.fill()},e.prototype.start=function(e){var n,o;this.context&&![a.Running,a.Destroy].includes(this.status)&&(o=null==(o=null==(n=this.context)?void 0:n.getCanvasEl)?void 0:o.call(n))&&(t.prototype.start.call(this,e),e&&(this.style=e),this.trigger(i.DrawBeforeStart,{selectType:s.Free,actionType:l.Draw}),null!=o&&o.addEventListener("mousedown",this.onCanvasMouseDown),this.status=a.Running,this.trigger(i.DrawStart,{selectType:s.Free,actionType:l.Draw}))},e.prototype.end=function(e){var n,o=this.context;o&&(n=o.getCanvasEl())&&(null!=n&&n.removeEventListener("mousedown",this.onCanvasMouseDown),null!=n&&n.removeEventListener("mousemove",this.onCanvasMouseMove),null!=n&&n.removeEventListener("mouseup",this.onCanvasMouseUp),this.draw(e,!0),this.status=a.End,n={id:f.A.uuid(),type:s.Free,data:{points:JSON.parse(JSON.stringify(this.points))},style:this.style},o.addHistoryData(n),this.startPoint=null,this.points=[],this.isMove=!1,this.trigger(i.DrawEnd,{selectType:s.Free,actionType:l.Draw,data:n})),t.prototype.end.call(this,e)},e.prototype.destroy=function(){var e,n=this.context;n&&(e=n.getCanvasEl())&&(this.status===a.Running&&(n.clearDraw(),n.drawHistoryData()),null!=e&&e.removeEventListener("mousedown",this.onCanvasMouseDown),null!=e&&e.removeEventListener("mousemove",this.onCanvasMouseMove),null!=e&&e.removeEventListener("mouseup",this.onCanvasMouseUp),this.startPoint=null,this.points=[],this.isMove=!1,this.status=a.Destroy,this.trigger(i.Destroy,{selectType:s.Free,actionType:l.Draw})),t.prototype.destroy.call(this)},e}(O);const ie=ae;var re=function(){var t=function(e,n){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),se=function(t,e,n){if(n||2===arguments.length)for(var o,a=0,i=e.length;a<i;a++)!o&&a in e||((o=o||Array.prototype.slice.call(e,0,a))[a]=e[a]);return t.concat(o||Array.prototype.slice.call(e))},le="adhere-ui-polygon-selection",ce=function(t){function e(e,n,o){var a=t.call(this)||this;return a.el=null,a.listeners=null,a.curAction=null,a.canvasEl=null,a.ctx=null,a.assistCanvasEl=null,a.assistCtx=null,a.canvasData=[],a.typeActionMap=new Map([[s.Polygon,F],[s.Circle,H],[s.Rectangle,Q],[s.Triangle,ot],[s.Diamond,G],[s.Start,$],[s.Free,ie]]),a.el=e,a.listeners=o,n&&(a.canvasData=n),a.onResize=a.onResize.bind(a),a.initListeners(),a.initCanvas(),a.initEvents(),a}return re(e,t),e.prototype.initListeners=function(){var t=this,e=this.listeners;e&&Object.keys(e).forEach((function(n){t.on(n,e[n])}))},e.prototype.initEvents=function(){var t=this;this.el&&this.el.addEventListener("mouseup",(function(e){if(e){for(var n=t.getHistoryData(),o=f.A.clientToCtxPoint({event:e,rect:t.el.getBoundingClientRect()}),a=[],i=0;i<n.length;i++){var s=n[i],l=t.typeActionMap.get(s.type);"booleanPointInData"in l&&(null==l?void 0:l.booleanPointInData(o,s))&&a.push(i)}a.length?t.trigger(r.CanvasClickGeometry,JSON.parse(JSON.stringify(n[a[a.length-1]]))):n.length&&t.trigger(r.CanvasClickEmpty)}}))},e.prototype.initCanvas=function(){this.el&&(this.canvasEl=document.createElement("canvas"),this.canvasEl.className=le,this.ctx=this.canvasEl.getContext("2d"),this.assistCanvasEl=document.createElement("canvas"),this.assistCanvasEl.className="".concat(le,"-assist"),this.assistCtx=this.assistCanvasEl.getContext("2d"),this.el.appendChild(this.canvasEl),this.el.appendChild(this.assistCanvasEl),this.trigger(r.CanvasMount),this.adapterCanvas())},e.prototype.adapterCanvas=function(){var t,e,n=(e=this).canvasEl,o=e.assistCanvasEl;(null!==(t=null!==(t=!(e=e.el))?t:!n)?!t:o)&&(n.width=null!=(t=null==e?void 0:e.offsetWidth)?t:0,n.height=null!=(t=null==e?void 0:e.offsetHeight)?t:0,o.width=null!=(n=null==e?void 0:e.offsetWidth)?n:0,o.height=null!=(t=null==e?void 0:e.offsetHeight)?t:0,this.clearDraw(),this.clearAssistDraw(),this.drawHistoryData())},e.prototype.onResize=function(){this.adapterCanvas()},e.prototype.getCtx=function(){return this.ctx},e.prototype.getCanvasEl=function(){return this.canvasEl},e.prototype.getAssistCanvasEl=function(){return this.assistCanvasEl},e.prototype.getAssistCtx=function(){return this.assistCtx},e.prototype.getWidth=function(){var t;return null!=(t=null==(t=null==this?void 0:this.el)?void 0:t.offsetWidth)?t:0},e.prototype.getHeight=function(){var t;return null!=(t=null==(t=null==this?void 0:this.el)?void 0:t.offsetHeight)?t:0},e.prototype.addHistoryData=function(t){this.canvasData.push(t)},e.prototype.removeHistoryDataById=function(t){var e=this.canvasData.findIndex((function(e){return e.id===t}));return-1===e?[]:this.canvasData.splice(e,1)},e.prototype.drawHistoryData=function(){var t=this;this.canvasData.forEach((function(e){var n,o=t.ctx;o&&e&&null!=(n=t.typeActionMap.get(e.type))&&n.drawHistoryPath(o,e)}))},e.prototype.getHistoryDataById=function(t){return this.canvasData.find((function(e){return e.id===t}))},e.prototype.getHistoryData=function(){return se([],this.canvasData,!0)},e.prototype.setHistoryData=function(t){this.canvasData=t},e.prototype.changeAction=function(t){t!==this.curAction&&t.getStatus()===a.UnStart&&(this.curAction&&this.curAction.destroy(),null!=t&&t.setContext(this),this.curAction=t)},e.prototype.getCurAction=function(){return this.curAction},e.prototype.start=function(t){this.curAction&&this.curAction.start(t)},e.prototype.end=function(){this.curAction&&this.curAction.end()},e.prototype.clearDraw=function(){var t=this.ctx;t&&t.clearRect(0,0,this.getWidth(),this.getHeight())},e.prototype.clearAssistDraw=function(){var t=this.assistCtx;t&&t.clearRect(0,0,this.getWidth(),this.getHeight())},e.prototype.clearHistoryData=function(){this.canvasData=[]},e.prototype.clearCanvasAll=function(){this.clearDraw(),this.clearAssistDraw(),this.clearHistoryData()},e.prototype.setFrontCanvas=function(t){t.style.zIndex="9999"},e.prototype.setBackCanvas=function(t){t.style.zIndex="1"},e.prototype.destroy=function(){"undefined"!=typeof window&&window.removeEventListener("resize",this.onResize),this.curAction&&this.curAction.destroy(),this.clearAll(),this.el&&(this.el.innerHTML="")},e.Cropping=ne,e}(v.A.Events);const ue={PolygonSelection:ce,CircleDrawAction:H,DiamondDrawAction:G,DrawAction:O,FreeDrawAction:ie,PolygonDrawAction:F,RectangleDrawAction:Q,StartDrawAction:$,TriangleDrawAction:ot,CircleModifyAction:yt,DiamondModifyAction:vt,ModifyAction:st,PolygonModifyAction:Ct,RectangleModifyAction:Tt,StartModifyAction:At,TriangleModifyAction:kt,DefaultAnchorStyle:b,DefaultMoveGemStyle:E,DefaultStyle:S,Util:_,Types:o},de=ue;var ye=n(74713),pe=n(10232);const he="LmJ4m1FTF8uAID8wDbuT",fe="G1Rs7VtXLj18FgULQGQm",ve="O7ENkmPAZ1AK5Dx_O2bD",me="agJnfZOOKLjyK909VcOj",{PolygonSelection:ge,PolygonDrawAction:xe,CircleDrawAction:De,RectangleDrawAction:Ce,TriangleDrawAction:we,DiamondDrawAction:Me,StartDrawAction:Pe,FreeDrawAction:Te,CircleModifyAction:be,DiamondModifyAction:Ee,PolygonModifyAction:Se,RectangleModifyAction:Ae,TriangleModifyAction:Ie,StartModifyAction:Re,Types:{PolygonSelectionActions:Be,ActionEvents:Oe}}=de,ke=()=>{const t=(0,u.useRef)(),e=(0,u.useRef)(null),n=(0,u.useRef)(),o=new Map([["Polygon",Se],["Circle",be],["Rectangle",Ae],["Triangle",Ie],["Diamond",Ee],["Start",Re]]);return(0,u.useEffect)((()=>{e.current=new ge(t.current,[],{[Be.CanvasMount]:()=>{n.current=document.createElement("canvas"),n.current.style.position="absolute",n.current.style.left="0",n.current.style.top="0",n.current.style.width="100%",n.current.style.height="100%",n.current.style.zIndex="0",n.current.width=t.current.offsetWidth,n.current.height=t.current.offsetHeight,t.current.appendChild(n.current)}}),e.current.on(Be.CanvasClickGeometry,(t=>{const n=new(o.get(t.type))({selectType:t.type,actionType:"Draw",data:t});n.on(Oe.End,(()=>{n.start()})),e.current.changeAction(n),n.start()})),e.current.on(Be.CanvasClickEmpty,(()=>{console.log("clickEmpty"),e.current.clearDraw(),e.current.clearAssistDraw(),e.current.drawHistoryData()}));const a=document.getElementById("file");a.addEventListener("change",(()=>{const t=a.files[0],e=new FileReader;e.onloadend=t=>{const e=new Image;e.onload=()=>{const t=n.current.getContext("2d");t.clearRect(0,0,e.width,e.height),t.drawImage(e,0,0,e.width,e.height)},e.src=t.target.result},e.readAsDataURL(t)}))}),[]),u.createElement("div",{className:he},u.createElement("div",{className:fe},u.createElement("ul",null,u.createElement("li",null,u.createElement("input",{id:"file",accept:"image/gif,image/jpeg,image/png,image/bmp",type:"file",style:{display:"none"}}),u.createElement(m.Ay,{type:"primary",onClick:()=>{const t=document.getElementById("file"),e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),t.dispatchEvent(e)}},"打开")),u.createElement("li",null,u.createElement(m.Ay,{type:"primary",onClick:()=>{const t=e.current.getHistoryData();t&&t.length?h.A.InputPrompt({title:"数据名称",config:{label:"数据名称",initialValue:""},width:300,zIndex:1e3,local:"zh_CN",onSuccess:e=>new Promise((n=>{const o=p.A.getObjectByLocal("polygonSelectionData")||[];o.push({id:(new Date).getTime(),name:e,data:t}),p.A.putObjectByLocal("polygonSelectionData",o),ye.Ay.success("保存成功！"),n()}))}):ye.Ay.warning("画布上没有可以保存的数据！")}},"保存数据")),u.createElement("li",null,u.createElement(m.Ay,{type:"primary",onClick:()=>{const t=p.A.getObjectByLocal("polygonSelectionData")||[],n=[{title:"名称",dataIndex:"name",key:"name"},{title:"操作",dataIndex:"option",key:"option",render:(n,a)=>u.createElement("div",{className:me},u.createElement("a",{href:"#",onClick:()=>{const e=t.findIndex((t=>t.id===a.id));-1!==e&&(t.splice(e,1),p.A.putObjectByLocal("polygonSelectionData",t),ye.Ay.success("删除成功！"),o())}},"删除"),u.createElement(y.A,{direction:"horizontal"}),u.createElement("a",{href:"#",onClick:()=>{ye.Ay.success("操作成功！"),o();const{data:t}=a;e.current.setHistoryData(t),e.current.clearDraw(),e.current.drawHistoryData()}},"打开"))}],{close:o}=h.A.Modal({config:{title:"设置数据"},defaultCloseBtn:!1,children:u.createElement("div",{style:{width:"100%"}},u.createElement(pe.A,{rowKey:"id",columns:n,dataSource:t,pagination:!1}))})}},"设置数据"))),u.createElement("ul",null,u.createElement("li",null,u.createElement(m.Ay,{type:"primary",onClick:()=>{const t=new De;t.on(Oe.End,(e=>{t.start()})),e.current.changeAction(t),t.start()}},"圆形")),u.createElement("li",null,u.createElement(m.Ay,{type:"primary",onClick:()=>{const t=new Ce;t.on(Oe.End,(e=>{t.start()})),e.current.changeAction(t),t.start()}},"矩形")),u.createElement("li",null,u.createElement(m.Ay,{type:"primary",onClick:()=>{const t=new Me;t.on(Oe.End,(e=>{t.start()})),e.current.changeAction(t),t.start()}},"菱形")),u.createElement("li",null,u.createElement(m.Ay,{type:"primary",onClick:()=>{const t=new we;t.on(Oe.End,(e=>{t.start()})),e.current.changeAction(t),t.start()}},"三角形")),u.createElement("li",null,u.createElement(m.Ay,{type:"primary",onClick:()=>{const t=new Pe;t.on(Oe.End,(e=>{t.start()})),e.current.changeAction(t),t.start()}},"五角星")),u.createElement("li",null,u.createElement(m.Ay,{type:"primary",onClick:()=>{const t=new xe;t.on(Oe.End,(e=>{t.start()})),e.current.changeAction(t),t.start()}},"多边形")),u.createElement("li",null,u.createElement(m.Ay,{type:"primary",onClick:()=>{const t=new Te;t.on(Oe.End,(()=>{t.start()})),e.current.changeAction(t),t.start()}},"自由绘制")))),u.createElement("div",{className:ve,ref:t}))},Le=()=>u.createElement(ke,null),Ve="mXBzW_LKbtGteiwEefq9",He="EjvCbXPu5WoMbAacszkC",{PolygonSelection:je}=de,_e=()=>{const[t,e]=(0,u.useState)(""),n=(0,u.useRef)();return u.createElement("div",null,u.createElement("p",null,"图像裁剪"),u.createElement("div",{className:Ve},u.createElement(je.Cropping,{ref:n,value:t,onChange:t=>e(t),maskClassName:He})))},ze=()=>u.createElement(_e,null),qe=()=>u.createElement(d.Ay,null,u.createElement(d.wn,{title:"PolygonSelection"},u.createElement("p",null,"多功能选区"),u.createElement("ul",null,u.createElement("li",null,"- 圆形区域"),u.createElement("li",null,"- 菱形区域"),u.createElement("li",null,"- 多边形区域"),u.createElement("li",null,"- 矩形形区域"),u.createElement("li",null,"- 五角星区域"),u.createElement("li",null,"- 三角形区域"),u.createElement("li",null,"- 自由绘制区域"),u.createElement("li",null,"- 图片裁剪"))),u.createElement(d.Wc,{title:"代码演示",columnCount:1,config:[{id:"p1",name:"基本使用",cardProps:{description:{title:"基本使用",info:"基本使用"}},active:"p1.jsx",config:[{key:"p1.jsx",title:"p1.jsx",codeText:"import React from 'react';\r\n\r\nimport ImageSelect from '../imageselect';\r\n\r\nexport default () => <ImageSelect />;\r\n"},{key:"imageselect.jsx",title:"imageselect.jsx",codeText:"import { Button, Table, message } from 'antd';\nimport React, { useEffect, useRef } from 'react';\n\nimport {\n  MessageDialog,\n  PolygonSelection as PolygonSelectionModule,\n  Preferences,\n  Split,\n} from '@baifendian/adhere';\n\nimport styles from './imageselect.less';\n\nconst {\n  PolygonSelection,\n  PolygonDrawAction,\n  CircleDrawAction,\n  RectangleDrawAction,\n  TriangleDrawAction,\n  DiamondDrawAction,\n  StartDrawAction,\n  FreeDrawAction,\n  CircleModifyAction,\n  DiamondModifyAction,\n  PolygonModifyAction,\n  RectangleModifyAction,\n  TriangleModifyAction,\n  StartModifyAction,\n  Types: { PolygonSelectionActions, ActionEvents },\n} = PolygonSelectionModule;\n\nexport default () => {\n  const autoRef = useRef();\n  const polygonSelection = useRef(null);\n  const imgCanvasRef = useRef();\n\n  // ActionType\n  const typeActionMap = new Map([\n    ['Polygon', PolygonModifyAction],\n    ['Circle', CircleModifyAction],\n    ['Rectangle', RectangleModifyAction],\n    ['Triangle', TriangleModifyAction],\n    ['Diamond', DiamondModifyAction],\n    ['Start', StartModifyAction],\n  ]);\n\n  useEffect(() => {\n    // 初始化polygonSelection\n    polygonSelection.current = new PolygonSelection(autoRef.current, [], {\n      [PolygonSelectionActions.CanvasMount]: () => {\n        // 初始化image显示的画布\n        imgCanvasRef.current = document.createElement('canvas');\n        imgCanvasRef.current.style.position = 'absolute';\n        imgCanvasRef.current.style.left = '0';\n        imgCanvasRef.current.style.top = '0';\n        imgCanvasRef.current.style.width = '100%';\n        imgCanvasRef.current.style.height = '100%';\n        imgCanvasRef.current.style.zIndex = '0';\n        imgCanvasRef.current.width = autoRef.current.offsetWidth;\n        imgCanvasRef.current.height = autoRef.current.offsetHeight;\n        autoRef.current.appendChild(imgCanvasRef.current);\n      },\n    });\n\n    // 点击了画布中的几何图形\n    polygonSelection.current.on(PolygonSelectionActions.CanvasClickGeometry, (data) => {\n      const Component = typeActionMap.get(data.type);\n\n      const action = new Component({\n        selectType: data.type,\n        actionType: 'Draw',\n        data,\n      });\n\n      action.on(ActionEvents.End, () => {\n        action.start();\n      });\n\n      polygonSelection.current.changeAction(action);\n\n      action.start();\n    });\n\n    // 点击了画布的空位置\n    polygonSelection.current.on(PolygonSelectionActions.CanvasClickEmpty, () => {\n      console.log('clickEmpty');\n      polygonSelection.current.clearDraw();\n      polygonSelection.current.clearAssistDraw();\n      polygonSelection.current.drawHistoryData();\n    });\n\n    // 打开文件\n    const fileEl = document.getElementById('file');\n    fileEl.addEventListener('change', () => {\n      const file = fileEl.files[0];\n\n      const read = new FileReader();\n      read.onloadend = (e) => {\n        const img = new Image();\n\n        img.onload = () => {\n          const ctx = imgCanvasRef.current.getContext('2d');\n          ctx.clearRect(0, 0, img.width, img.height);\n          ctx.drawImage(img, 0, 0, img.width, img.height);\n        };\n\n        img.src = e.target.result;\n      };\n      read.readAsDataURL(file);\n    });\n  }, []);\n\n  return (\n    <div className={styles.Wrap}>\n      <div className={styles.Fixed}>\n        <ul>\n          <li>\n            <input\n              id=\"file\"\n              accept=\"image/gif,image/jpeg,image/png,image/bmp\"\n              type=\"file\"\n              style={{ display: 'none' }}\n            />\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                const fileEl = document.getElementById('file');\n                const event = document.createEvent('MouseEvents');\n                event.initEvent('click', true, true);\n                fileEl.dispatchEvent(event);\n              }}\n            >\n              打开\n            </Button>\n          </li>\n          <li>\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                // 画布的数据\n                const canvasData = polygonSelection.current.getHistoryData();\n\n                if (!canvasData || !canvasData.length) {\n                  message.warning('画布上没有可以保存的数据！');\n                  return;\n                }\n\n                MessageDialog.InputPrompt({\n                  title: '数据名称',\n                  config: {\n                    label: '数据名称',\n                    initialValue: '',\n                  },\n                  width: 300,\n                  zIndex: 1000,\n                  local: 'zh_CN',\n                  onSuccess: (value) => {\n                    return new Promise((resolve) => {\n                      const localData = Preferences.getObjectByLocal('polygonSelectionData') || [];\n\n                      // 添加画布数据\n                      localData.push({\n                        id: new Date().getTime(),\n                        name: value,\n                        data: canvasData,\n                      });\n\n                      Preferences.putObjectByLocal('polygonSelectionData', localData);\n                      message.success('保存成功！');\n                      resolve();\n                    });\n                  },\n                });\n              }}\n            >\n              保存数据\n            </Button>\n          </li>\n          <li>\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                const localData = Preferences.getObjectByLocal('polygonSelectionData') || [];\n\n                const columns = [\n                  {\n                    title: '名称',\n                    dataIndex: 'name',\n                    key: 'name',\n                  },\n                  {\n                    title: '操作',\n                    dataIndex: 'option',\n                    key: 'option',\n                    render: (text, record) => {\n                      return (\n                        <div className={styles.OptionWrapper}>\n                          <a\n                            href=\"#\"\n                            onClick={() => {\n                              const index = localData.findIndex((data) => data.id === record.id);\n                              if (index !== -1) {\n                                localData.splice(index, 1);\n                                Preferences.putObjectByLocal('polygonSelectionData', localData);\n                                message.success('删除成功！');\n                                // MessageDialog.close(el);\n                                close();\n                              }\n                            }}\n                          >\n                            删除\n                          </a>\n                          <Split direction=\"horizontal\" />\n                          <a\n                            href=\"#\"\n                            onClick={() => {\n                              message.success('操作成功！');\n                              // MessageDialog.close(el);\n                              close();\n                              const { data } = record;\n                              polygonSelection.current.setHistoryData(data);\n                              polygonSelection.current.clearDraw();\n                              polygonSelection.current.drawHistoryData();\n                            }}\n                          >\n                            打开\n                          </a>\n                        </div>\n                      );\n                    },\n                  },\n                ];\n\n                const { close } = MessageDialog.Modal({\n                  config: {\n                    title: '设置数据',\n                  },\n                  defaultCloseBtn: false,\n                  children: (\n                    <div style={{ width: '100%' }}>\n                      <Table\n                        rowKey=\"id\"\n                        columns={columns}\n                        dataSource={localData}\n                        pagination={false}\n                      />\n                    </div>\n                  ),\n                });\n              }}\n            >\n              设置数据\n            </Button>\n          </li>\n        </ul>\n\n        <ul>\n          <li>\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                const action = new CircleDrawAction();\n                action.on(ActionEvents.End, (data) => {\n                  action.start();\n                });\n                polygonSelection.current.changeAction(action);\n                action.start();\n              }}\n            >\n              圆形\n            </Button>\n          </li>\n          <li>\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                const action = new RectangleDrawAction();\n                action.on(ActionEvents.End, (data) => {\n                  action.start();\n                });\n                polygonSelection.current.changeAction(action);\n                action.start();\n              }}\n            >\n              矩形\n            </Button>\n          </li>\n          <li>\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                const action = new DiamondDrawAction();\n                action.on(ActionEvents.End, (data) => {\n                  action.start();\n                });\n                polygonSelection.current.changeAction(action);\n                action.start();\n              }}\n            >\n              菱形\n            </Button>\n          </li>\n          <li>\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                const action = new TriangleDrawAction();\n                action.on(ActionEvents.End, (data) => {\n                  action.start();\n                });\n                polygonSelection.current.changeAction(action);\n                action.start();\n              }}\n            >\n              三角形\n            </Button>\n          </li>\n          <li>\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                const action = new StartDrawAction();\n                action.on(ActionEvents.End, (data) => {\n                  action.start();\n                });\n                polygonSelection.current.changeAction(action);\n                action.start();\n              }}\n            >\n              五角星\n            </Button>\n          </li>\n          <li>\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                const action = new PolygonDrawAction();\n                action.on(ActionEvents.End, (data) => {\n                  action.start();\n                });\n                polygonSelection.current.changeAction(action);\n                action.start();\n              }}\n            >\n              多边形\n            </Button>\n          </li>\n          <li>\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                const action = new FreeDrawAction();\n                action.on(ActionEvents.End, () => {\n                  action.start();\n                });\n                polygonSelection.current.changeAction(action);\n                action.start();\n              }}\n            >\n              自由绘制\n            </Button>\n          </li>\n        </ul>\n      </div>\n      <div className={styles.Auto} ref={autoRef} />\n    </div>\n  );\n};\n"},{key:"imageselect.less",title:"imageselect.less",codeText:".Wrap {\n  display: flex;\n  border: 1px solid rgb(0 0 0 / 10%);\n}\n\n.Fixed {\n  flex-shrink: 0;\n  border-right: 1px solid rgb(0 0 0 / 10%);\n\n  > ul {\n    margin: 0;\n    padding: 20px;\n    list-style: none;\n\n    &:not(:last-child) {\n      border-bottom: 1px solid rgb(0 0 0 / 10%);\n    }\n\n    > li {\n      &:not(:last-child) {\n        margin-bottom: 20px;\n      }\n\n      :global(> .ant-btn) {\n        width: 100%;\n      }\n    }\n  }\n}\n\n.Auto {\n  position: relative;\n  flex-grow: 1;\n  min-width: 0;\n}\n\n.OptionWrapper {\n  display: flex;\n  align-items: center;\n  height: 15px;\n}\n"}],type:"PlayGroundTab",renderChildren:()=>u.createElement(Le,null)},{id:"p2",name:"图片裁剪",cardProps:{description:{title:"图片裁剪",info:"图片裁剪"}},active:"p2.jsx",config:[{key:"p2.jsx",title:"p2.jsx",codeText:"import React from 'react';\r\n\r\nimport Cropping from '../cropping';\r\n\r\nexport default () => <Cropping />;\r\n"},{key:"cropping.jsx",title:"cropping.jsx",codeText:"import React, { useRef, useState } from 'react';\r\n\r\nimport { PolygonSelection as PolygonSelectionModule } from '@baifendian/adhere';\r\n\r\nimport styles from './cropping.less';\r\n\r\nconst { PolygonSelection } = PolygonSelectionModule;\r\n\r\nexport default () => {\r\n  const [value, setValue] = useState('');\r\n\r\n  const ref = useRef();\r\n\r\n  return (\r\n    <div>\r\n      <p>图像裁剪</p>\r\n      <div className={styles.Wrap}>\r\n        <PolygonSelection.Cropping\r\n          ref={ref}\r\n          value={value}\r\n          onChange={(v) => setValue(v)}\r\n          maskClassName={styles.MaskWrap}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"},{key:"cropping.less",title:"cropping.less",codeText:".Wrap {\r\n  width: 100px;\r\n  height: 100px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 50%;\r\n}\r\n\r\n.MaskWrap {\r\n  border-radius: 50%;\r\n}\r\n"}],type:"PlayGroundTab",renderChildren:()=>u.createElement(ze,null)}]}),u.createElement(d.e6,{title:"Props",config:[{border:!0,title:"Cropping",data:[{params:"className",desc:"",type:"string",defaultVal:""},{params:"style",desc:"",type:"CSSProperties",defaultVal:""},{params:"maskClassName",desc:"",type:"string",defaultVal:""},{params:"maskStyle",desc:"",type:"CSSProperties",defaultVal:""},{params:"mask",desc:"",type:"ReactNode",defaultVal:""},{params:"modalProps",desc:"",type:"ModalProps",defaultVal:""},{params:"coreProps",desc:"",type:"CroppingCoreProps",defaultVal:""},{params:"value",desc:"",type:"string",defaultVal:""},{params:"onChange",desc:"",type:"(base64?: string) => void",defaultVal:""}]},{border:!0,title:"CroppingCore",data:[{params:"className",desc:"",type:"string",defaultVal:""},{params:"style",desc:"",type:"CSSProperties",defaultVal:""},{params:"wrapProps",desc:"",type:"CroppingCoreWrapProps",defaultVal:""},{params:"toolProps",desc:"",type:"CroppingCoreToolProps",defaultVal:""},{params:"areaProps",desc:"",type:"CroppingCoreAreaProps",defaultVal:""},{params:"minHeight",desc:"",type:"number",defaultVal:""},{params:"toolBarConfig",desc:"",type:"\n                  {\n                    direction?: string | 'left' | 'right' | 'top' | 'bottom';\n                    open?: {\n                      render?: (handle?: Function) => ReactNode;\n                      sort?: number;\n                    };\n                    rectangle?: {\n                      render?: (handle?: Function) => ReactNode;\n                      hide?: boolean;\n                      sort?: number;\n                    };\n                    circle?: {\n                      render?: (handle?: Function) => ReactNode;\n                      hide?: boolean;\n                      sort?: number;\n                    };\n                    start: {\n                      render?: (handle?: Function) => ReactNode;\n                      hide?: boolean;\n                      sort?: number;\n                    };\n                    triangle: {\n                      render?: (handle?: Function) => ReactNode;\n                      hide?: boolean;\n                      sort?: number;\n                    };\n                    diamond: {\n                      render?: (handle?: Function) => ReactNode;\n                      hide?: boolean;\n                      sort?: number;\n                    };\n                    polygon: {\n                      render?: (handle?: Function) => ReactNode;\n                      hide?: boolean;\n                      sort?: number;\n                    };\n                  }\n                ",defaultVal:""}]}]}),u.createElement(d.I7,{title:"Api",config:[{border:!0,title:"PolygonSelection",data:[{name:"getCtx",desc:"getCtx",modifier:"public",params:[],returnType:"CanvasRenderingContext2D | null",returnDesc:""},{name:"getCanvasEl",desc:"getCanvasEl",modifier:"public",params:[],returnType:"HTMLCanvasElement | null",returnDesc:""},{name:"getAssistCtx",desc:"getAssistCtx",modifier:"public",params:[],returnType:"CanvasRenderingContext2D | null",returnDesc:""},{name:"getAssistCanvasEl",desc:"getAssistCanvasEl",modifier:"public",params:[],returnType:"HTMLCanvasElement | null",returnDesc:""},{name:"getWidth",desc:"getWidth",modifier:"public",params:[],returnType:"number",returnDesc:""},{name:"getHeight",desc:"getHeight",modifier:"public",params:[],returnType:"number",returnDesc:""},{name:"addHistoryData",desc:"添加一个ActionData到canvasData中",modifier:"public",params:[{name:"data",desc:"data",type:"IActionData",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"removeHistoryDataById",desc:"删除一个ActionData中的数据",modifier:"public",params:[{name:"actionDataId",desc:"actionDataId",type:"string",defaultVal:"",required:"true"}],returnType:"IActionData[]",returnDesc:""},{name:"drawHistoryData",desc:"绘制历史数据",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"getHistoryDataById",desc:"获取历史数据",modifier:"public",params:[{name:"id",desc:"id",type:"string",defaultVal:"",required:"true"}],returnType:"IActionData | null | undefined ",returnDesc:""},{name:"getHistoryData",desc:"获取历史数据",modifier:"public",params:[],returnType:"IActionData[]",returnDesc:""},{name:"setHistoryData",desc:"设置历史数据",modifier:"public",params:[{name:"data",desc:"data",type:"IActionData[]",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"changeAction",desc:"切换一个Action",modifier:"public",params:[{name:"action",desc:"action对象",type:"IAction",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getCurAction",desc:"获取当前的Action",modifier:"public",params:[],returnType:"IAction | null",returnDesc:""},{name:"start",desc:"开始",modifier:"public",params:[{name:"style",desc:"样式",type:"IStyle",defaultVal:"",required:""}],returnType:"void",returnDesc:""},{name:"end",desc:"结束",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"clearDraw",desc:"clearDraw",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"clearAssistDraw",desc:"clearAssistDraw",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setFrontCanvas",desc:"置顶",modifier:"public",params:[{name:"canvasEl",desc:"canvasEl",type:"HTMLCanvasElement",defaultVal:"",required:""}],returnType:"void",returnDesc:""},{name:"setBackCanvas",desc:"置底",modifier:"public",params:[{name:"canvasEl",desc:"canvasEl",type:"HTMLCanvasElement",defaultVal:"",required:""}],returnType:"void",returnDesc:""},{name:"destroy",desc:"销毁",modifier:"public",params:[],returnType:"void",returnDesc:""}]},{border:!0,title:"CircleDrawAction",data:[{name:"booleanPointInData",desc:"booleanPointInData",modifier:"static",params:[{name:"point",desc:"point",type:"IPoint",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"ICircleData",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"draw",desc:"draw",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"ICircleData",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"drawHistoryPath",desc:"绘制历史数据",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"\n                  {\n                    center: IPoint;\n                    radius: number;\n                  }\n                ",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[{name:"style",desc:"style",type:"IStyle",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"获取状态",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"DiamondDrawAction",data:[{name:"booleanPointInData",desc:"booleanPointInData",modifier:"static",params:[{name:"point",desc:"point",type:"IPoint",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IDiamondData",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"draw",desc:"draw",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IDiamondData",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"drawHistoryPath",desc:"绘制历史数据",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"\n                  {\n                    leftTopPoint: IPoint | null;\n                    width: number;\n                    height: number;\n                  }\n                ",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[{name:"style",desc:"style",type:"IStyle",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"获取状态",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"FreeDrawAction",data:[{name:"draw",desc:"draw",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IFreeData",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"drawHistoryPath",desc:"绘制历史数据",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"\n                  {\n                    points: IPoint[];\n                  }\n                ",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[{name:"style",desc:"style",type:"IStyle",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"获取状态",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"PolygonDrawAction",data:[{name:"booleanPointInData",desc:"booleanPointInData",modifier:"static",params:[{name:"point",desc:"point",type:"IPoint",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IPolygonData",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"draw",desc:"draw",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IPolygonData",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"drawHistoryPath",desc:"绘制历史数据",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IPoint[]",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[{name:"style",desc:"style",type:"IStyle",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"获取状态",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"RectangleDrawAction",data:[{name:"booleanPointInData",desc:"booleanPointInData",modifier:"static",params:[{name:"point",desc:"point",type:"IPoint",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IRectangleData",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"draw",desc:"draw",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IRectangleData",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"drawHistoryPath",desc:"绘制历史数据",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"\n                  {\n                    leftTopPoint: IPoint | null;\n                    width: number;\n                    height: number;\n                  }\n                ",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[{name:"style",desc:"style",type:"IStyle",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"获取状态",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"StartDrawAction",data:[{name:"booleanPointInData",desc:"booleanPointInData",modifier:"static",params:[{name:"point",desc:"point",type:"IPoint",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IStartData",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"draw",desc:"draw",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IStartData",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"drawHistoryPath",desc:"绘制历史数据",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"\n                  {\n                    center: IPoint;\n                    outRadius: number;\n                    innerRadius: number;\n                  }\n                ",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[{name:"style",desc:"style",type:"IStyle",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"获取状态",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"TriangleDrawAction",data:[{name:"booleanPointInData",desc:"booleanPointInData",modifier:"static",params:[{name:"point",desc:"point",type:"IPoint",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"ITriangleData",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"draw",desc:"draw",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"ITriangleData",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"drawHistoryPath",desc:"绘制历史数据",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"\n                  {\n                    points: IPoint[];\n                  }\n                ",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[{name:"style",desc:"style",type:"IStyle",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"获取状态",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"CircleModifyAction",data:[{name:"isCanMove",desc:"isCanMove",modifier:"public",params:[{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[{name:"startPoint",desc:"startPoint",type:"IPoint",defaultVal:"",required:"true"},{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"initMoveEvents",desc:"initMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"clearMoveEvents",desc:"clearMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"onMoveMousedown",desc:"onMoveMousedown",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMousemove",desc:"onMoveMousemove",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMouseup",desc:"onMoveMouseup",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"getStatus",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"DiamondModifyAction",data:[{name:"isCanMove",desc:"isCanMove",modifier:"public",params:[{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[{name:"startPoint",desc:"startPoint",type:"IPoint",defaultVal:"",required:"true"},{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"initMoveEvents",desc:"initMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"clearMoveEvents",desc:"clearMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"onMoveMousedown",desc:"onMoveMousedown",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMousemove",desc:"onMoveMousemove",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMouseup",desc:"onMoveMouseup",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"getStatus",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"PolygonModifyAction",data:[{name:"isCanMove",desc:"isCanMove",modifier:"public",params:[{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[{name:"startPoint",desc:"startPoint",type:"IPoint",defaultVal:"",required:"true"},{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"initMoveEvents",desc:"initMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"clearMoveEvents",desc:"clearMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"onMoveMousedown",desc:"onMoveMousedown",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMousemove",desc:"onMoveMousemove",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMouseup",desc:"onMoveMouseup",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"getStatus",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"RectangleModifyAction",data:[{name:"isCanMove",desc:"isCanMove",modifier:"public",params:[{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[{name:"startPoint",desc:"startPoint",type:"IPoint",defaultVal:"",required:"true"},{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"initMoveEvents",desc:"initMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"clearMoveEvents",desc:"clearMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"onMoveMousedown",desc:"onMoveMousedown",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMousemove",desc:"onMoveMousemove",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMouseup",desc:"onMoveMouseup",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"getStatus",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"StartModifyAction",data:[{name:"isCanMove",desc:"isCanMove",modifier:"public",params:[{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[{name:"startPoint",desc:"startPoint",type:"IPoint",defaultVal:"",required:"true"},{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"initMoveEvents",desc:"initMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"clearMoveEvents",desc:"clearMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"onMoveMousedown",desc:"onMoveMousedown",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMousemove",desc:"onMoveMousemove",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMouseup",desc:"onMoveMouseup",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"getStatus",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"TriangleModifyAction",data:[{name:"isCanMove",desc:"isCanMove",modifier:"public",params:[{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[{name:"startPoint",desc:"startPoint",type:"IPoint",defaultVal:"",required:"true"},{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"initMoveEvents",desc:"initMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"clearMoveEvents",desc:"clearMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"onMoveMousedown",desc:"onMoveMousedown",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMousemove",desc:"onMoveMousemove",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMouseup",desc:"onMoveMouseup",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"getStatus",modifier:"public",params:[],returnType:"number",returnDesc:""}]}]}))},60842:(t,e,n)=>{n.r(e),n.d(e,{default:()=>v});var o=n(26322),a=n(19994),i=n(31934),r=n.n(i),s=n(90008),l="adhere-ui-swipe-out",c=(0,o.memo)((function(t){var e=void 0===(e=t.className)?"":e,n=void 0===(n=t.style)?{}:n,a=void 0===(a=t.contentClassName)?"":a,i=void 0===(i=t.contentStyle)?{}:i,c=void 0===(c=t.beforeClassName)?"":c,u=void 0===(u=t.beforeStyle)?{}:u,d=void 0===(d=t.afterClassName)?"":d,y=void 0===(y=t.afterStyle)?{}:y,p=t.before,h=t.after,f=void 0!==(x=t.beforeShow)&&x,v=void 0!==(x=t.afterShow)&&x,m=void 0===(x=t.direction)?"horizontal":x,g=void 0===(x=t.duration)?0:x,x=t.children,D=(0,o.useRef)(null),C=(0,o.useRef)(),w=(0,o.useRef)(new Map([[[!0,!0].toString(),1],[[!1,!1].toString(),1],[[!0,!1].toString(),0],[[!1,!0].toString(),2]]));function M(e,n){t[e]&&t[e](n)}return(0,o.useLayoutEffect)((function(){var t,e;C.current||(e=w.current.get([f,v].toString()),C.current=new s.R(D.current,{init:!1,initialSlide:e,direction:m,slidesPerView:"auto",centeredSlides:!1,spaceBetween:0}),null!=(t=null==(e=null==C?void 0:C.current)?void 0:e.on)&&t.call(e,"init",(function(){return M("onInit")})),null!=(e=null==(t=null==C?void 0:C.current)?void 0:t.on)&&e.call(t,"slideChangeTransitionStart",(function(){var t;return M("onSlideChangeTransitionStart",null==(t=C.current)?void 0:t.activeIndex)})),null!=(t=null==(e=null==C?void 0:C.current)?void 0:e.on)&&t.call(e,"slideChangeTransitionEnd",(function(){var t;return M("onSlideChangeTransitionEnd",null==(t=C.current)?void 0:t.activeIndex)})),null!=(e=null==(t=null==C?void 0:C.current)?void 0:t.init)&&e.call(t))}),[]),(0,o.useEffect)((function(){var t,e;null!=(e=null==(t=null==C?void 0:C.current)?void 0:t.slideTo)&&e.call(t,w.current.get([f,v].toString()),g)}),[f,v,g]),(0,o.useEffect)((function(){C.current&&C.current.changeDirection(m)}),[m]),o.createElement("div",{className:r()(l,"swiper",null!=e?e:""),style:null!=n?n:{},ref:D},o.createElement("div",{className:"swiper-wrapper"},o.createElement("div",{className:r()("swiper-slide","".concat(l,"-before"),null!=c?c:""),style:null!=u?u:{}},null==p?void 0:p()),o.createElement("div",{className:r()("swiper-slide","".concat(l,"-content"),null!=a?a:""),style:null!=i?i:{}},x),o.createElement("div",{className:r()("swiper-slide","".concat(l,"-after"),null!=d?d:""),style:null!=y?y:{}},null==h?void 0:h())))}));c.displayName="SwipeOut";const u=c;var d=n(32517),y=n(58008),p=n(38414),h=n(1025);const f=()=>{const[t,e]=(0,o.useState)([{title:"Ant Design Title 1",beforeShow:!1,afterShow:!1,duration:200},{title:"Ant Design Title 2",beforeShow:!1,afterShow:!1,duration:200},{title:"Ant Design Title 3",beforeShow:!1,afterShow:!1,duration:200},{title:"Ant Design Title 4",beforeShow:!1,afterShow:!1,duration:200}]);return o.createElement(o.Fragment,null,o.createElement("div",null,o.createElement(y.Ay.Group,null,o.createElement(y.Ay.Button,{value:"large",onClick:()=>{e((t=>t.map((t=>({...t,beforeShow:!0,afterShow:!1})))))}},"showBefore"),o.createElement(y.Ay.Button,{value:"default",onClick:()=>{e((t=>t.map((t=>({...t,beforeShow:!1,afterShow:!0})))))}},"showAfter"),o.createElement(y.Ay.Button,{value:"small",onClick:()=>{e((t=>t.map((t=>({...t,beforeShow:!1,afterShow:!1})))))}},"closeAll"))),o.createElement(d.A,{direction:"vertical"}),o.createElement(p.A,{itemLayout:"horizontal",dataSource:t,renderItem:t=>o.createElement(u,{before:()=>o.createElement(y.Ay.Group,null,o.createElement(y.Ay.Button,{value:"large"},"Large"),o.createElement(y.Ay.Button,{value:"default"},"Default"),o.createElement(y.Ay.Button,{value:"small"},"Small")),after:()=>o.createElement(y.Ay.Group,null,o.createElement(y.Ay.Button,{value:"large"},"Large"),o.createElement(y.Ay.Button,{value:"default"},"Default"),o.createElement(y.Ay.Button,{value:"small"},"Small")),beforeShow:t.beforeShow,afterShow:t.afterShow,duration:t.duration},o.createElement(p.A.Item,null,o.createElement(p.A.Item.Meta,{avatar:o.createElement(h.A,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:o.createElement("a",{href:"https://ant.design"},t.title),description:"Ant Design, a design language for background applications, is refined by Ant UED Team"})))}))},v=()=>o.createElement(a.Ay,null,o.createElement(a.wn,{title:"SwipeOut"},o.createElement("p",null,"滑动操作")),o.createElement(a.Wc,{title:"代码演示",columnCount:1,config:[{id:"p1",name:"基本使用",mode:"code",scope:{React:o},cardProps:{description:{title:"基本使用",info:"基本使用"}},type:"PlayGround",codeText:'import { Avatar, List, Radio } from \'antd\';\r\nimport React, { useState } from \'react\';\r\n\r\nimport { Space, SwipeOut } from \'@baifendian/adhere\';\r\n\r\nexport default () => {\r\n  const [data, setData] = useState([\r\n    {\r\n      title: \'Ant Design Title 1\',\r\n      beforeShow: false,\r\n      afterShow: false,\r\n      duration: 200,\r\n    },\r\n    {\r\n      title: \'Ant Design Title 2\',\r\n      beforeShow: false,\r\n      afterShow: false,\r\n      duration: 200,\r\n    },\r\n    {\r\n      title: \'Ant Design Title 3\',\r\n      beforeShow: false,\r\n      afterShow: false,\r\n      duration: 200,\r\n    },\r\n    {\r\n      title: \'Ant Design Title 4\',\r\n      beforeShow: false,\r\n      afterShow: false,\r\n      duration: 200,\r\n    },\r\n  ]);\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <Radio.Group>\r\n          <Radio.Button\r\n            value="large"\r\n            onClick={() => {\r\n              setData((record) =>\r\n                record.map((t) => ({ ...t, beforeShow: true, afterShow: false })),\r\n              );\r\n            }}\r\n          >\r\n            showBefore\r\n          </Radio.Button>\r\n          <Radio.Button\r\n            value="default"\r\n            onClick={() => {\r\n              setData((record) =>\r\n                record.map((t) => ({ ...t, beforeShow: false, afterShow: true })),\r\n              );\r\n            }}\r\n          >\r\n            showAfter\r\n          </Radio.Button>\r\n          <Radio.Button\r\n            value="small"\r\n            onClick={() => {\r\n              setData((record) =>\r\n                record.map((t) => ({ ...t, beforeShow: false, afterShow: false })),\r\n              );\r\n            }}\r\n          >\r\n            closeAll\r\n          </Radio.Button>\r\n        </Radio.Group>\r\n      </div>\r\n\r\n      <Space direction="vertical" />\r\n\r\n      <List\r\n        itemLayout="horizontal"\r\n        dataSource={data}\r\n        renderItem={(item) => (\r\n          <SwipeOut\r\n            before={() => (\r\n              <Radio.Group>\r\n                <Radio.Button value="large">Large</Radio.Button>\r\n                <Radio.Button value="default">Default</Radio.Button>\r\n                <Radio.Button value="small">Small</Radio.Button>\r\n              </Radio.Group>\r\n            )}\r\n            after={() => (\r\n              <Radio.Group>\r\n                <Radio.Button value="large">Large</Radio.Button>\r\n                <Radio.Button value="default">Default</Radio.Button>\r\n                <Radio.Button value="small">Small</Radio.Button>\r\n              </Radio.Group>\r\n            )}\r\n            beforeShow={item.beforeShow}\r\n            afterShow={item.afterShow}\r\n            duration={item.duration}\r\n          >\r\n            <List.Item>\r\n              <List.Item.Meta\r\n                avatar={\r\n                  <Avatar src="https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png" />\r\n                }\r\n                title={<a href="https://ant.design">{item.title}</a>}\r\n                description="Ant Design, a design language for background applications, is refined by Ant UED Team"\r\n              />\r\n            </List.Item>\r\n          </SwipeOut>\r\n        )}\r\n      />\r\n    </>\r\n  );\r\n};\r\n',renderChildren:()=>o.createElement(f,null)}]}),o.createElement(a.e6,{title:"Props",config:[{border:!0,title:"属性",data:[{params:"className",desc:"附加的样式表",type:"string",defaultVal:""},{params:"style",desc:"附加的样式",type:"React.CSSProperties",defaultVal:""},{params:"beforeClassName",desc:"附加的样式表",type:"string",defaultVal:""},{params:"beforeStyle",desc:"附加的样式",type:"React.CSSProperties",defaultVal:""},{params:"afterClassName",desc:"附加的样式表",type:"string",defaultVal:""},{params:"afterStyle",desc:"附加的样式",type:"React.CSSProperties",defaultVal:""},{params:"contentClassName",desc:"附加的样式表",type:"string",defaultVal:""},{params:"contentStyle",desc:"附加的样式",type:"React.CSSProperties",defaultVal:""},{params:"beforeShow",desc:"是否显示内容之前的操作",type:"boolean",defaultVal:"false"},{params:"afterShow",desc:"是否显示内容之后的操作",type:"boolean",defaultVal:"false"},{params:"direction",desc:"方向",type:"'horizontal' | 'vertical'",defaultVal:"horizontal"},{params:"before",desc:"内容之前的UI",type:"() => React.ReactElement",defaultVal:""},{params:"after",desc:"内容之后的UI",type:"() => React.ReactElement",defaultVal:""},{params:"duration",desc:"beforeShow和afterShow的持续时间(毫秒)",type:"number",defaultVal:"200"},{params:"onInit",desc:"onInit",type:"() => void",defaultVal:""},{params:"slideChangeTransitionStart",desc:"slideChangeTransitionStart",type:"() => void",defaultVal:""},{params:"slideChangeTransitionEnd",desc:"slideChangeTransitionEnd",type:"() => void",defaultVal:""}]}]}))},19994:(t,e,n)=>{n.d(e,{Ay:()=>y,I7:()=>d,Wc:()=>c,e6:()=>u,wn:()=>l});var o=n(71860),a=n(24370),i=n(26322);const{PlayGroundPageContext:r,PlayGroundPage:s}=a.A,{Section:l,CodeBoxSection:c,PropsSection:u,FunctionPropsSection:d}=s;const y=function(t){let{children:e,onScrollBottom:n,distance:a=50,...l}=t;const[c,u]=(0,i.useState)(),d=(0,i.useRef)(),y=(0,i.useRef)(!1);return(0,i.useEffect)((()=>{function t(){const t=e.scrollHeight-e.offsetHeight,o=e.scrollTop;if(n&&Math.abs(o-t)<=a){if(y.current)return;y.current=!0,null==n||n().then((()=>{y.current=!1}))}}const e=d.current.parentElement.parentElement;return e.addEventListener("scroll",t),u(e),()=>{e.removeEventListener("scroll",t)}}),[]),i.createElement(r.Provider,{value:{scrollEl:c}},i.createElement(s,(0,o.A)({ref:d},l),e))}},32517:(t,e,n)=>{n.d(e,{A:()=>o});const o=n(2382).A},53304:(t,e,n)=>{n.d(e,{A:()=>o});const o=n(16937).A}}]);