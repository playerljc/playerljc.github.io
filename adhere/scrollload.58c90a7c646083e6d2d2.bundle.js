"use strict";(self.webpackChunk_ctsj_build=self.webpackChunk_ctsj_build||[]).push([[8496],{70658:(e,t,n)=>{n.d(t,{A:()=>E});var r=n(59223),a=n(31934),l=n.n(a),o=n(26322),c=n(59418),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},d="adhere-ui-scroll-load",m="empty",u="hide_empty",p="error",f="normal",y=(0,o.memo)((0,o.forwardRef)((function(e,t){var n=void 0===(n=e.className)?"":n,a=void 0===(a=e.style)?{}:a,y=void 0===(x=e.loadClassName)?"":x,E=void 0===(x=e.loadStyle)?{}:x,g=void 0===(x=e.emptyClassName)?"":x,S=void 0===(x=e.emptyStyle)?{}:x,L=void 0===(x=e.errorClassName)?"":x,A=void 0===(x=e.errorStyle)?{}:x,v=e.getScrollContainer,b=void 0===(x=e.distance)?50:x,h=e.renderLoading,R=e.renderEmpty,T=e.renderError,k=e.onScrollBottom,C=e.onEmptyClick,D=e.onErrorClick,P=void 0!==(x=e.disabled)&&x,x=e.children,N=(e=i(e,["className","style","loadClassName","loadStyle","emptyClassName","emptyStyle","errorClassName","errorStyle","getScrollContainer","distance","renderLoading","renderEmpty","renderError","onScrollBottom","onEmptyClick","onErrorClick","disabled","children"]),(0,o.useRef)(f)),O=(0,o.useRef)(!1),M=(0,o.useRef)(null),I=(0,o.useRef)(null),Y=(0,o.useRef)(null),V=(0,o.useRef)(null);function j(){return v?v():M.current}function X(){var e=(t=j()).scrollHeight-t.offsetHeight,t=t.scrollTop;k&&Math.abs(t-e)<=b&&([m,u].includes(N.current)||O.current||(O.current=!0,I.current.style.display="flex",k((function(e){N.current=e,I.current.style.display="none",N.current===m?Y.current.style.display="block":N.current===p?V.current.style.display="block":N.current===u&&(Y.current.style.display="none"),O.current=!1}))))}function H(){C&&C()}function z(){D&&D()}function B(){N.current=f,I.current.style.display="none",V.current.style.display="none",Y.current.style.display="none"}var w=(0,o.useCallback)((function(){return h?o.createElement("div",{className:l()("".concat(d,"-load"),y),style:null!=E?E:{},ref:I},h()):o.createElement("div",{className:l()("".concat(d,"-load"),"standard",y),style:null!=E?E:{},ref:I},c.Ay.v("数据加载中"))}),[h,y,E]),U=(0,o.useCallback)((function(){return R?o.createElement("div",{className:l()("".concat(d,"-empty"),g),style:null!=S?S:{},ref:Y},R()):o.createElement("div",{className:l()("".concat(d,"-empty"),g),style:null!=S?S:{},ref:Y},"~",c.Ay.v("没有更多"))}),[R,g,S]),q=(0,o.useCallback)((function(){return T?o.createElement("div",{className:l()("".concat(d,"-error"),L),style:null!=A?A:{},ref:V},T()):o.createElement("div",{className:l()("".concat(d,"-error"),L),style:null!=A?A:{},ref:V},c.Ay.v("出现错误"))}),[T,L,A]);return(0,o.useImperativeHandle)(t,(function(){return{hideAll:B,getScrollContainer:j}})),(0,o.useLayoutEffect)((function(){var e;return P||null!=(e=j())&&e.addEventListener("scroll",X),null!=(e=Y.current)&&e.addEventListener("click",H),null!=(e=V.current)&&e.addEventListener("click",z),function(){var e;P||null!=(e=j())&&e.removeEventListener("scroll",X),null!=(e=Y.current)&&e.removeEventListener("click",H),null!=(e=V.current)&&e.removeEventListener("click",z)}})),(0,r.A)((function(){var e;return P?null!=(e=j())&&e.removeEventListener("scroll",X):(null!=(e=j())&&e.removeEventListener("scroll",X),null!=(e=j())&&e.addEventListener("scroll",X)),function(){var e;null!=(e=j())&&e.removeEventListener("scroll",X)}}),[P]),o.createElement("div",s({},e,{className:l()(d,n),style:s(s({},null!=a?a:{}),{overflowY:j()===M.current?"auto":"initial"}),ref:M}),x,w(),U(),q())})));y.displayName="ScrollLoad",y.EMPTY=m,y.ERROR=p,y.NORMAL=f,y.HIDE_EMPTY=u;const E=y},88265:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var r=n(26322),a=n(19994);const l=n(70658).A;var o=n(38414),c=n(1025);const s="ou6lYNkYP0vNaxXNmVkQ",i=()=>{const e=(0,r.useRef)(0),[t,n]=(0,r.useState)(i());let a=(0,r.useRef)(null);function i(){return e.current=e.current+1,Array.from({length:10*e.current}).fill(0).map(((e,t)=>({title:"Ant Design Title ".concat(t+1)})))}return(0,r.useEffect)((()=>{a.current&&(a.current(l.NORMAL),a.current=null)}),[t]),r.createElement(l,{className:s,onScrollBottom:e=>{setTimeout((()=>{a.current=e,n(i())}),2e3)}},r.createElement(o.A,{itemLayout:"horizontal",dataSource:t,renderItem:e=>r.createElement(o.A.Item,null,r.createElement(o.A.Item.Meta,{avatar:r.createElement(c.A,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:r.createElement("a",{href:"https://ant.design"},e.title),description:"Ant Design, a design language for background applications, is refined by Ant UED Team"}))}))},d=Array.from({length:10}).fill(1),m=()=>{let e=(0,r.useRef)(l.NORMAL);return r.createElement(l,{className:s,onScrollBottom:t=>{e.current===l.EMPTY&&t(l.EMPTY),setTimeout((()=>{t(l.EMPTY),e.current=l.EMPTY}),2e3)},onEmptyClick:()=>{alert("点击了")}},r.createElement(o.A,{itemLayout:"horizontal",dataSource:d.map(((e,t)=>({title:"Ant Design Title".concat(t+1)}))),renderItem:e=>r.createElement(o.A.Item,null,r.createElement(o.A.Item.Meta,{avatar:r.createElement(c.A,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:r.createElement("a",{href:"https://ant.design"},e.title),description:"Ant Design, a design language for background applications, is refined by Ant UED Team"}))}))},u=Array.from({length:10}).fill(1),p=()=>{let e=(0,r.useRef)(l.NORMAL);return r.createElement(l,{className:s,onScrollBottom:t=>{e.current===l.ERROR&&t(l.ERROR),setTimeout((()=>{t(l.ERROR),e.current=l.ERROR}),2e3)},onErrorClick:()=>{alert("点击了")}},r.createElement(o.A,{itemLayout:"horizontal",dataSource:u.map(((e,t)=>({title:"Ant Design Title".concat(t+1)}))),renderItem:e=>r.createElement(o.A.Item,null,r.createElement(o.A.Item.Meta,{avatar:r.createElement(c.A,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:r.createElement("a",{href:"https://ant.design"},e.title),description:"Ant Design, a design language for background applications, is refined by Ant UED Team"}))}))};var f=n(70929),y=n(2438);const E=Array.from({length:10}).fill(1),g=()=>{const e=(0,r.useRef)(l.NORMAL);return r.createElement(l,{className:s,onScrollBottom:t=>{e.current===l.EMPTY&&t(l.EMPTY),setTimeout((()=>{t(l.EMPTY),e.current=l.EMPTY}),2e3)},renderLoading:()=>r.createElement(f.A,{tip:"loading...",style:{width:"100%"}}),renderEmpty:()=>r.createElement(y.A,null)},r.createElement(o.A,{itemLayout:"horizontal",dataSource:E.map(((e,t)=>({title:"Ant Design Title".concat(t+1)}))),renderItem:e=>r.createElement(o.A.Item,null,r.createElement(o.A.Item.Meta,{avatar:r.createElement(c.A,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:r.createElement("a",{href:"https://ant.design"},e.title),description:"Ant Design, a design language for background applications, is refined by Ant UED Team"}))}))},S=()=>r.createElement(a.Ay,null,r.createElement(a.wn,{title:"ScrollLoad"},r.createElement("p",null,"滚动加载")),r.createElement(a.Wc,{title:"代码演示",columnCount:1,config:[{id:"p1",name:"基本使用",mode:"code",scope:{React:r},cardProps:{description:{title:"基本使用",info:"基本使用"}},type:"PlayGround",codeText:"import { Avatar, List } from 'antd';\nimport React, { useEffect, useRef, useState } from 'react';\n\nimport { ScrollLoad } from '@baifendian/adhere';\n\nimport styles from './examples.less';\n\nexport default () => {\n  const page = useRef(0);\n\n  const [data, setData] = useState(getData());\n\n  let callbackHandler = useRef(null);\n\n  function getData() {\n    page.current = page.current + 1;\n\n    return Array.from({ length: page.current * 10 })\n      .fill(0)\n      .map((t, index) => ({\n        title: `Ant Design Title ${index + 1}`,\n      }));\n  }\n\n  useEffect(() => {\n    if (callbackHandler.current) {\n      callbackHandler.current(ScrollLoad.NORMAL);\n      callbackHandler.current = null;\n    }\n  }, [data]);\n\n  return (\n    <ScrollLoad\n      className={styles.Wrapper}\n      onScrollBottom={(callback) => {\n        setTimeout(() => {\n          callbackHandler.current = callback;\n          setData(getData());\n        }, 2000);\n      }}\n    >\n      <List\n        itemLayout=\"horizontal\"\n        dataSource={data}\n        renderItem={(item) => (\n          <List.Item>\n            <List.Item.Meta\n              avatar={\n                <Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />\n              }\n              title={<a href=\"https://ant.design\">{item.title}</a>}\n              description=\"Ant Design, a design language for background applications, is refined by Ant UED Team\"\n            />\n          </List.Item>\n        )}\n      />\n    </ScrollLoad>\n  );\n};\n",renderChildren:()=>r.createElement(i,null)},{id:"p2",name:"没有数据的显示",mode:"code",scope:{React:r},cardProps:{description:{title:"没有数据的显示",info:"没有数据的显示"}},type:"PlayGround",codeText:"import { Avatar, List } from 'antd';\nimport React, { useRef } from 'react';\n\nimport { ScrollLoad } from '@baifendian/adhere';\n\nimport styles from './examples.less';\n\nconst globalData = Array.from({ length: 10 }).fill(1);\n\nexport default () => {\n  let refStatus = useRef(ScrollLoad.NORMAL);\n\n  return (\n    <ScrollLoad\n      className={styles.Wrapper}\n      onScrollBottom={(callback) => {\n        if (refStatus.current === ScrollLoad.EMPTY) {\n          callback(ScrollLoad.EMPTY);\n        }\n\n        setTimeout(() => {\n          callback(ScrollLoad.EMPTY);\n          refStatus.current = ScrollLoad.EMPTY;\n        }, 2000);\n      }}\n      onEmptyClick={() => {\n        alert('点击了');\n      }}\n    >\n      <List\n        itemLayout=\"horizontal\"\n        dataSource={globalData.map((t, index) => ({\n          title: `Ant Design Title${index + 1}`,\n        }))}\n        renderItem={(item) => (\n          <List.Item>\n            <List.Item.Meta\n              avatar={\n                <Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />\n              }\n              title={<a href=\"https://ant.design\">{item.title}</a>}\n              description=\"Ant Design, a design language for background applications, is refined by Ant UED Team\"\n            />\n          </List.Item>\n        )}\n      />\n    </ScrollLoad>\n  );\n};\n",renderChildren:()=>r.createElement(m,null)},{id:"p3",name:"错误的显示",mode:"code",scope:{React:r},cardProps:{description:{title:"错误的显示",info:"错误的显示"}},type:"PlayGround",codeText:"import { Avatar, List } from 'antd';\nimport React, { useRef } from 'react';\n\nimport { ScrollLoad } from '@baifendian/adhere';\n\nimport styles from './examples.less';\n\nconst globalData = Array.from({ length: 10 }).fill(1);\n\nexport default () => {\n  let refStatus = useRef(ScrollLoad.NORMAL);\n\n  return (\n    <ScrollLoad\n      className={styles.Wrapper}\n      onScrollBottom={(callback) => {\n        if (refStatus.current === ScrollLoad.ERROR) {\n          callback(ScrollLoad.ERROR);\n        }\n\n        setTimeout(() => {\n          callback(ScrollLoad.ERROR);\n          refStatus.current = ScrollLoad.ERROR;\n        }, 2000);\n      }}\n      onErrorClick={() => {\n        alert('点击了');\n      }}\n    >\n      <List\n        itemLayout=\"horizontal\"\n        dataSource={globalData.map((t, index) => ({\n          title: `Ant Design Title${index + 1}`,\n        }))}\n        renderItem={(item) => (\n          <List.Item>\n            <List.Item.Meta\n              avatar={\n                <Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />\n              }\n              title={<a href=\"https://ant.design\">{item.title}</a>}\n              description=\"Ant Design, a design language for background applications, is refined by Ant UED Team\"\n            />\n          </List.Item>\n        )}\n      />\n    </ScrollLoad>\n  );\n};\n",renderChildren:()=>r.createElement(p,null)},{id:"p4",name:"自定义loading和empty",mode:"code",scope:{React:r},cardProps:{description:{title:"自定义loading和empty",info:"自定义loading和empty"}},type:"PlayGround",codeText:"import { Avatar, Empty, List, Spin } from 'antd';\nimport React, { useRef } from 'react';\n\nimport { ScrollLoad } from '@baifendian/adhere';\n\nimport styles from './examples.less';\n\nconst globalData = Array.from({ length: 10 }).fill(1);\n\nexport default () => {\n  const refStatus = useRef(ScrollLoad.NORMAL);\n\n  return (\n    <ScrollLoad\n      className={styles.Wrapper}\n      onScrollBottom={(callback) => {\n        if (refStatus.current === ScrollLoad.EMPTY) {\n          callback(ScrollLoad.EMPTY);\n        }\n\n        setTimeout(() => {\n          callback(ScrollLoad.EMPTY);\n          refStatus.current = ScrollLoad.EMPTY;\n        }, 2000);\n      }}\n      renderLoading={() => <Spin tip=\"loading...\" style={{ width: '100%' }} />}\n      renderEmpty={() => <Empty />}\n    >\n      <List\n        itemLayout=\"horizontal\"\n        dataSource={globalData.map((t, index) => ({\n          title: `Ant Design Title${index + 1}`,\n        }))}\n        renderItem={(item) => (\n          <List.Item>\n            <List.Item.Meta\n              avatar={\n                <Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />\n              }\n              title={<a href=\"https://ant.design\">{item.title}</a>}\n              description=\"Ant Design, a design language for background applications, is refined by Ant UED Team\"\n            />\n          </List.Item>\n        )}\n      />\n    </ScrollLoad>\n  );\n};\n",renderChildren:()=>r.createElement(g,null)}]}),r.createElement(a.e6,{title:"Props",config:[{border:!0,title:"ScrollLoad",data:[{params:"className",desc:"附加的样式表",type:"string",defaultVal:""},{params:"style",desc:"附加的样式",type:"React.CSSProperties",defaultVal:""},{params:"loadClassName",desc:"load附加的样式表",type:"string",defaultVal:""},{params:"loadStyle",desc:"load附加的样式",type:"React.CSSProperties",defaultVal:""},{params:"emptyClassName",desc:"empty附加的样式表",type:"string",defaultVal:""},{params:"emptyStyle",desc:"empty附加的样式",type:"React.CSSProperties",defaultVal:""},{params:"errorClassName",desc:"error附加的样式表",type:"string",defaultVal:""},{params:"errorStyle",desc:"error附加的样式",type:"React.CSSProperties",defaultVal:""},{params:"distance",desc:"距离底部的距离",type:"number",defaultVal:"50"},{params:"onScrollBottom",desc:"滚动到底部的钩子",type:"Function",defaultVal:""},{params:"onEmptyClick",desc:"点击empty的钩子",type:"Function",defaultVal:""},{params:"onErrorClick",desc:"点击error的钩子",type:"Function",defaultVal:""},{params:"renderLoading",desc:"自定义loading的UI",type:"Function",defaultVal:"返回JSX"},{params:"renderEmpty",desc:"自定义empty的UI",type:"Function",defaultVal:"JSX"},{params:"renderError",desc:"自定义error的UI",type:"Function",defaultVal:"JSX"},{params:"getScrollContainer",desc:"滚动元素设置",type:"Function",defaultVal:""}]}]}),r.createElement(a.I7,{title:"Api",config:[{border:!0,title:"方法",data:[{name:"hideAll",desc:"隐藏所有",modifier:"public",params:[],returnType:"void",returnDesc:""}]}]}))},19994:(e,t,n)=>{n.d(t,{Ay:()=>u,I7:()=>m,Wc:()=>i,e6:()=>d,wn:()=>s});var r=n(71860),a=n(24370),l=n(26322);const{PlayGroundPageContext:o,PlayGroundPage:c}=a.A,{Section:s,CodeBoxSection:i,PropsSection:d,FunctionPropsSection:m}=c;const u=function(e){let{children:t,onScrollBottom:n,distance:a=50,...s}=e;const[i,d]=(0,l.useState)(),m=(0,l.useRef)(),u=(0,l.useRef)(!1);return(0,l.useEffect)((()=>{function e(){const e=t.scrollHeight-t.offsetHeight,r=t.scrollTop;if(n&&Math.abs(r-e)<=a){if(u.current)return;u.current=!0,null==n||n().then((()=>{u.current=!1}))}}const t=m.current.parentElement.parentElement;return t.addEventListener("scroll",e),d(t),()=>{t.removeEventListener("scroll",e)}}),[]),l.createElement(o.Provider,{value:{scrollEl:i}},l.createElement(c,(0,r.A)({ref:m},s),t))}}}]);