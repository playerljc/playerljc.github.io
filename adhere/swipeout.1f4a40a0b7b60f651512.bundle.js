"use strict";(self.webpackChunk_ctsj_build=self.webpackChunk_ctsj_build||[]).push([[8917],{310736:function(t,e){e.Z={Wrap:"gcWxXOv50KHDV7bnnpb2",MaskWrap:"gEgSF4oJSmwdohL_a61R"}},306593:function(t,e){e.Z={Wrap:"Dp47pGpeq7NeLORuxaaj",Fixed:"iiQeeTSAp3MjyHGx1lzL",Auto:"ifDKKY67dv9yVHxpbeGD"}},620308:function(t,e,n){var o,a=n(460467),i=n(441930),r=n(847982),s=n(895836),l=n(984847),c=n(897724),u=n(816235),d=n(389418),y=n(288882),p=n(929932),h=n(507877),f=(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),v=function(t,e,n){if(n||2===arguments.length)for(var o,a=0,i=e.length;a<i;a++)!o&&a in e||((o=o||Array.prototype.slice.call(e,0,a))[a]=e[a]);return t.concat(o||Array.prototype.slice.call(e))},m="adhere-ui-polygonselection",g=function(t){function e(e,n,o){var a=t.call(this)||this;return a.el=null,a.listeners=null,a.curAction=null,a.canvasEl=null,a.ctx=null,a.assistCanvasEl=null,a.assistCtx=null,a.canvasData=[],a.typeActionMap=new Map([[h.SelectType.Polygon,u.Z],[h.SelectType.Circle,s.Z],[h.SelectType.Rectangle,d.Z],[h.SelectType.Triangle,p.Z],[h.SelectType.Diamond,l.Z],[h.SelectType.Start,y.Z],[h.SelectType.Free,c.Z]]),a.el=e,a.listeners=o,n&&(a.canvasData=n),a.onResize=a.onResize.bind(a),a.initListeners(),a.initCanvas(),a.initEvents(),a}return f(e,t),e.prototype.initListeners=function(){var t=this,e=this.listeners;e&&Object.keys(e).forEach((function(n){t.on(n,e[n])}))},e.prototype.initEvents=function(){var t=this;this.el&&this.el.addEventListener("mouseup",(function(e){if(e){for(var n=t.getHistoryData(),o=a.Z.clientToCtxPoint({event:e,rect:t.el.getBoundingClientRect()}),i=[],r=0;r<n.length;r++){var s=n[r],l=t.typeActionMap.get(s.type);"booleanPointInData"in l&&(null==l?void 0:l.booleanPointInData(o,s))&&i.push(r)}i.length?t.trigger(h.PolygonSelectionActions.CanvasClickGeometry,JSON.parse(JSON.stringify(n[i[i.length-1]]))):n.length&&t.trigger(h.PolygonSelectionActions.CanvasClickEmpty)}}))},e.prototype.initCanvas=function(){this.el&&(this.canvasEl=document.createElement("canvas"),this.canvasEl.className=m,this.ctx=this.canvasEl.getContext("2d"),this.assistCanvasEl=document.createElement("canvas"),this.assistCanvasEl.className="".concat(m,"-assist"),this.assistCtx=this.assistCanvasEl.getContext("2d"),this.el.appendChild(this.canvasEl),this.el.appendChild(this.assistCanvasEl),this.trigger(h.PolygonSelectionActions.CanvasMount),this.adapterCanvas())},e.prototype.adapterCanvas=function(){var t,e,n=(e=this).canvasEl,o=e.assistCanvasEl;(null!==(t=null!==(t=!(e=e.el))?t:!n)?!t:o)&&(n.width=null!=(t=null==e?void 0:e.offsetWidth)?t:0,n.height=null!=(t=null==e?void 0:e.offsetHeight)?t:0,o.width=null!=(n=null==e?void 0:e.offsetWidth)?n:0,o.height=null!=(t=null==e?void 0:e.offsetHeight)?t:0,this.clearDraw(),this.clearAssistDraw(),this.drawHistoryData())},e.prototype.onResize=function(){this.adapterCanvas()},e.prototype.getCtx=function(){return this.ctx},e.prototype.getCanvasEl=function(){return this.canvasEl},e.prototype.getAssistCanvasEl=function(){return this.assistCanvasEl},e.prototype.getAssistCtx=function(){return this.assistCtx},e.prototype.getWidth=function(){var t;return null!=(t=null==(t=null==this?void 0:this.el)?void 0:t.offsetWidth)?t:0},e.prototype.getHeight=function(){var t;return null!=(t=null==(t=null==this?void 0:this.el)?void 0:t.offsetHeight)?t:0},e.prototype.addHistoryData=function(t){this.canvasData.push(t)},e.prototype.removeHistoryDataById=function(t){var e=this.canvasData.findIndex((function(e){return e.id===t}));return-1===e?[]:this.canvasData.splice(e,1)},e.prototype.drawHistoryData=function(){var t=this;this.canvasData.forEach((function(e){var n,o=t.ctx;o&&e&&null!=(n=t.typeActionMap.get(e.type))&&n.drawHistoryPath(o,e)}))},e.prototype.getHistoryDataById=function(t){return this.canvasData.find((function(e){return e.id===t}))},e.prototype.getHistoryData=function(){return v([],this.canvasData,!0)},e.prototype.setHistoryData=function(t){this.canvasData=t},e.prototype.changeAction=function(t){t!==this.curAction&&t.getStatus()===h.ActionStatus.UnStart&&(this.curAction&&this.curAction.destroy(),null!=t&&t.setContext(this),this.curAction=t)},e.prototype.getCurAction=function(){return this.curAction},e.prototype.start=function(t){this.curAction&&this.curAction.start(t)},e.prototype.end=function(){this.curAction&&this.curAction.end()},e.prototype.clearDraw=function(){var t=this.ctx;t&&t.clearRect(0,0,this.getWidth(),this.getHeight())},e.prototype.clearAssistDraw=function(){var t=this.assistCtx;t&&t.clearRect(0,0,this.getWidth(),this.getHeight())},e.prototype.clearHistoryData=function(){this.canvasData=[]},e.prototype.clearCanvasAll=function(){this.clearDraw(),this.clearAssistDraw(),this.clearHistoryData()},e.prototype.setFrontCanvas=function(t){t.style.zIndex="9999"},e.prototype.setBackCanvas=function(t){t.style.zIndex="1"},e.prototype.destroy=function(){"undefined"!=typeof window&&window.removeEventListener("resize",this.onResize),this.curAction&&this.curAction.destroy(),this.clearAll(),this.el&&(this.el.innerHTML="")},e.Cropping=r.Z,e}(i.Z.Events);e.Z=g},823639:function(t,e,n){var o=n(739462),a=n(772099),i=n(5254),r=n(269424),s=n(801821),l=n.n(s),c=n(690171),u=n(241887),d=n(355360),y=n(895836),p=n(984847),h=n(816235),f=n(389418),v=n(288882),m=n(929932),g=n(699819),x=n(983883),D=n(538779),C=n(567521),T=n(847267),M=n(554438),w=n(423746),P=n(507877),S=n(20582),E=function(){return(E=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},b="adhere-ui-cropping-core",A=function(t,e){var n=t.className,s=t.style,A=t.wrapProps,I=t.toolProps,R=t.areaProps,B=void 0===(_=t.minHeight)?200:_,Z=t.toolBarConfig,k=(_=(0,c.useState)(null))[0],O=_[1],L=(t=(0,c.useState)(""))[0],V=t[1],H=(0,c.useRef)(null),_=(0,c.useRef)(null),j=(0,c.useRef)(null),q=(0,c.useRef)(null),z=(0,c.useRef)(),N=(0,c.useRef)(null),W=(0,c.useRef)(),G=(0,c.useRef)(null),J=(0,c.useRef)(null),U=(0,c.useRef)(null),F=(t=new Map([["left",function(){return c.createElement(u.Z.TRBLC.LCLayout,E({},Q,A,{lProps:E(E(E({},K),I),{children:tt}),cProps:E(E(E({},$),R),{children:et})}))}],["right",function(){return c.createElement(u.Z.TRBLC.CRLayout,E({},Q,A,{rProps:E(E(E({},K),I),{children:tt}),cProps:E(E(E({},$),R),{children:et})}))}],["top",function(){return c.createElement(u.Z.TRBLC.TCLayout,E({},Q,A,{tProps:E(E(E({},K),I),{children:tt}),cProps:E(E(E({},$),R),{children:et})}))}],["bottom",function(){return c.createElement(u.Z.TRBLC.CBLayout,E({},Q,A,{bProps:E(E(E({},K),I),{children:tt}),cProps:E(E(E({},$),R),{children:et})}))}]]),(0,c.useMemo)((function(){return new Map([[P.SelectType.Polygon,C.Z],[P.SelectType.Circle,x.Z],[P.SelectType.Rectangle,T.Z],[P.SelectType.Triangle,w.Z],[P.SelectType.Diamond,D.Z],[P.SelectType.Start,M.Z]])}),[])),X=(0,c.useMemo)((function(){return{fillStyle:"transparent",strokeStyle:"#fff",lineWidth:1,lineCap:"round",lineJoin:"round",lineDash:[],lineDashOffset:-1,globalAlpha:1}}),[]),Y={fillStyle:"#fff"},Q=(0,c.useMemo)((function(){return{gutter:20,wrapClassName:"".concat(b,"-inner")}}),[]),K=(0,c.useMemo)((function(){return{fit:!0}}),[]),$=(0,c.useMemo)((function(){return{autoFixed:!0}}),[]),tt=(0,c.useMemo)((function(){var t,e,n=function(t){return t===k?"primary":"default"},r=function(t,e){return function(){var n,o,a;(n=t)!==k&&(at(),null!=(a=null==(o=null==W?void 0:W.current)?void 0:o.clearCanvasAll)&&a.call(o),U.current=null,O(n)),(n!==k?Promise.resolve():Promise.reject()).then((function(){var t,n;G.current=new e,G.current&&(G.current.setAnchorStyle(E({},Y)),G.current.setMoveGemStyle(E({},Y)),null!=(t=null==(n=null==G?void 0:G.current)?void 0:n.on)&&t.call(n,P.ActionEvents.DrawBeforeStart,(function(t){ot(t)})),null!=(n=null==(t=null==G?void 0:G.current)?void 0:t.on)&&n.call(t,P.ActionEvents.DrawStart,(function(t){ot(t)})),null!=(t=null==(n=null==G?void 0:G.current)?void 0:n.on)&&t.call(n,P.ActionEvents.Drawing,(function(t){ot(t)})),null!=(n=null==(t=null==G?void 0:G.current)?void 0:t.on)&&n.call(t,P.ActionEvents.DrawEnd,(function(t){ot(t)})),null!=(t=null==(n=null==W?void 0:W.current)?void 0:n.changeAction)&&t.call(n,G.current),null!=(n=null==(t=null==G?void 0:G.current)?void 0:t.start))&&n.call(t,X)}))}},s=[{key:"open",value:(null==(s=null==(t=null==Z?void 0:Z.open)?void 0:t.render)?void 0:s.call(t,(function(){var t;null!=(t=J.current)&&t.click()})))||c.createElement(i.ZP,{key:"open",block:!0,size:"large",type:"primary",onClick:function(){var t;null!=(t=J.current)&&t.click()}},d.ZP.v("打开"))},L?[{key:"rectangle",value:(!Z||!("rectangle"in Z)||!("hide"in Z.rectangle)||!(null!=(e=null==Z?void 0:Z.rectangle)&&e.hide))&&((null==(l=null==(e=null==Z?void 0:Z.rectangle)?void 0:e.render)?void 0:l.call(e,r(P.SelectType.Rectangle,f.Z)))||c.createElement(i.ZP,{key:"rectangle",block:!0,size:"large",type:n(P.SelectType.Rectangle),onClick:r(P.SelectType.Rectangle,f.Z)},d.ZP.v("矩形剪裁")))},{key:"circle",value:(!Z||!("circle"in Z)||!("hide"in Z.circle)||!(null!=(l=null==Z?void 0:Z.circle)&&l.hide))&&((null==(l=null==(e=null==Z?void 0:Z.circle)?void 0:e.render)?void 0:l.call(e,r(P.SelectType.Circle,y.Z)))||c.createElement(i.ZP,{key:"circle",block:!0,size:"large",type:n(P.SelectType.Circle),onClick:r(P.SelectType.Circle,y.Z)},d.ZP.v("圆形剪裁")))},{key:"start",value:(!Z||!("start"in Z)||!("hide"in Z.start)||!(null!=(l=null==Z?void 0:Z.start)&&l.hide))&&((null==(l=null==(e=null==Z?void 0:Z.start)?void 0:e.render)?void 0:l.call(e,r(P.SelectType.Start,v.Z)))||c.createElement(i.ZP,{key:"start",block:!0,size:"large",type:n(P.SelectType.Start),onClick:r(P.SelectType.Start,v.Z)},d.ZP.v("五角星剪裁")))},{key:"triangle",value:(!Z||!("triangle"in Z)||!("hide"in Z.triangle)||!(null!=(l=null==Z?void 0:Z.triangle)&&l.hide))&&((null==(l=null==(e=null==Z?void 0:Z.triangle)?void 0:e.render)?void 0:l.call(e,r(P.SelectType.Triangle,m.Z)))||c.createElement(i.ZP,{key:"triangle",block:!0,size:"large",type:n(P.SelectType.Triangle),onClick:r(P.SelectType.Triangle,m.Z)},d.ZP.v("三角形剪裁")))},{key:"diamond",value:(!Z||!("diamond"in Z)||!("hide"in Z.diamond)||!(null!=(l=null==Z?void 0:Z.diamond)&&l.hide))&&((null==(l=null==(e=null==Z?void 0:Z.diamond)?void 0:e.render)?void 0:l.call(e,r(P.SelectType.Diamond,p.Z)))||c.createElement(i.ZP,{key:"diamond",block:!0,size:"large",type:n(P.SelectType.Diamond),onClick:r(P.SelectType.Diamond,p.Z)},d.ZP.v("菱形剪裁")))},{key:"polygon",value:(!Z||!("polygon"in Z)||!("hide"in Z.polygon)||!(null!=(l=null==Z?void 0:Z.polygon)&&l.hide))&&((null==(l=null==(e=null==Z?void 0:Z.polygon)?void 0:e.render)?void 0:l.call(e,r(P.SelectType.Polygon,h.Z)))||c.createElement(i.ZP,{key:"polygon",block:!0,size:"large",type:n(P.SelectType.Polygon),onClick:r(P.SelectType.Polygon,h.Z)},d.ZP.v("多边形剪裁")))}].filter((function(t){return!!t.value})):[{key:"",value:null}]].flat().filter((function(t){return!!t.value})),l=(s=(0,S.DY)(s.map((function(t){var e;return"sort"in(null!=(e=null==Z?void 0:Z[t.key])?e:{})?E(E({},t),{sort:null==Z?void 0:Z[t.key].sort}):t}))).map((function(t){return t.value})),["left","right"].includes(null!=(t=null==Z?void 0:Z.direction)?t:"left")?"vertical":"horizontal");return c.createElement(a.Z,null,c.createElement(o.Z,{direction:l,size:20},c.createElement("input",{type:"file",ref:J,accept:"image/*",style:{display:"none"}}),s))}),[k,I,L,Z]),et=(0,c.useMemo)((function(){return c.createElement(a.Z,null,c.createElement("div",{className:"".concat(b,"-background"),style:{minHeight:B||200}},L&&c.createElement("div",{className:"".concat(b,"-background-inner")},c.createElement("img",{ref:H,src:L,alt:""}),c.createElement("div",{className:"".concat(b,"-background-mask")}))),c.createElement("div",{className:"".concat(b,"-geometry"),ref:N}),c.createElement("div",{className:"".concat(b,"-clip"),ref:j}))}),[L,R]),nt=(0,c.useCallback)((function(){var t=new Image;return t.src=L,t}),[L]),ot=((0,r.Z)((function(){O(null),H.current&&(H.current.onload=function(){W.current&&(U.current=null,it(),st()),rt(),lt()})}),[L]),(0,c.useLayoutEffect)((function(){function t(t){t=t.target.files[0];var e=new FileReader;e.onload=function(t){V(null==(t=t.target)?void 0:t.result)},e.readAsDataURL(t)}var e;return null!=(e=J.current)&&e.addEventListener("change",t),function(){var e;null!=(e=J.current)&&e.removeEventListener("change",t)}}),[]),(0,c.useImperativeHandle)(e,(function(){return{save:function(){return U.current&&U.current.data&&L?(0,S.bT)({data:U.current,clipCtx:z.current}):""}}})),function(t){var e,n;t.data&&(U.current=t,null!=(e=null==(n=z.current)?void 0:n.restore)&&e.call(n),null!=(n=null==(e=z.current)?void 0:e.save)&&n.call(e),null!=(n=z.current)&&n.clearRect(0,0,null==(e=q.current)?void 0:e.width,null==(n=q.current)?void 0:n.height),null!=(e=new Map([[P.SelectType.Circle,S.xE],[P.SelectType.Rectangle,S.JG],[P.SelectType.Diamond,S.iF],[P.SelectType.Start,S.$2],[P.SelectType.Triangle,S.Wd],[P.SelectType.Polygon,S.is]]).get(t.selectType))&&e(z.current,t.data),null!=(n=null==z?void 0:z.current)&&n.clip(),null!=(e=null==z?void 0:z.current))&&e.drawImage(nt(),0,0,null==(t=q.current)?void 0:t.width,null==(n=q.current)?void 0:n.height)}),at=function(){var t,e;null!=(e=z.current)&&e.restore(),null!=(t=null==(e=z.current)?void 0:e.clearRect)&&t.call(e,0,0,null==(t=q.current)?void 0:t.width,null==(e=q.current)?void 0:e.height)},it=function(){j.current&&(j.current.innerHTML="")},rt=function(){var t,e;q.current=document.createElement("canvas"),q.current.width=null==(e=H.current)?void 0:e.offsetWidth,q.current.height=null==(e=H.current)?void 0:e.offsetHeight,z.current=null==(t=null==(e=q.current)?void 0:e.getContext)?void 0:t.call(e,"2d"),null!=(e=null==(t=j.current)?void 0:t.appendChild)&&e.call(t,q.current)},st=function(){var t,e;null!=(e=null==(t=null==W?void 0:W.current)?void 0:t.destroy)&&e.call(t)},lt=function(){var t;N.current&&(N.current.style.width="".concat(null==(t=null==H?void 0:H.current)?void 0:t.offsetWidth,"px"),N.current.style.height="".concat(null==(t=null==H?void 0:H.current)?void 0:t.offsetHeight,"px"),W.current=new g.Z.PolygonSelection(N.current),W.current.on(P.PolygonSelectionActions.CanvasClickGeometry,(function(t){var e=new(F.get(t.type))({selectType:t.type,actionType:"Draw",data:t});e.setAnchorStyle(E({},Y)),e.setMoveGemStyle(E({},Y)),e.on(P.ActionEvents.ModifyBeforeStart,(function(t){ot(t)})),e.on(P.ActionEvents.ModifyStart,(function(t){ot(t)})),e.on(P.ActionEvents.Modifying,(function(t){ot(t)})),e.on(P.ActionEvents.ModifyEnd,(function(t){ot(t),e.start()})),e.on(P.ActionEvents.Moving,(function(t){ot(t)})),e.on(P.ActionEvents.MoveEnd,(function(t){ot(t)})),null!=(t=null==W?void 0:W.current)&&t.changeAction(e),e.start()})),W.current.on(P.PolygonSelectionActions.CanvasClickEmpty,(function(){var t;null!=(t=null==W?void 0:W.current)&&t.clearDraw(),null!=(t=null==W?void 0:W.current)&&t.clearAssistDraw(),null!=(t=null==W?void 0:W.current)&&t.drawHistoryData()})))};t=null==(e=t.get((null==Z?void 0:Z.direction)||"left"))?void 0:e();return c.createElement("div",{ref:_,className:"".concat(l()(b,null!=n?n:"")),style:null!=s?s:{}},t)},I=(0,c.memo)((0,c.forwardRef)(A));e.Z=I},847982:function(t,e,n){var o=n(5254),a=n(801821),i=n.n(a),r=n(690171),s=n(609613),l=n(355360),c=n(823639),u=function(){return(u=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},d="adhere-ui-polygonselection-cropping",y=function(t,e){var n=t.className,a=t.style,y=t.maskClassName,p=t.maskStyle,h=t.mask,f=t.value,v=t.onChange,m=t.modalProps,g=t.coreProps,x=(0,r.useRef)(null),D=(t=(0,r.useCallback)((function(){return r.createElement("div",{className:"".concat(i()("".concat(d,"-mask"),null!=y?y:"")),style:null!=p?p:{},onClick:function(){var t=s.Z.Modal({config:u({title:l.ZP.v("编辑"),width:1024,maskClosable:!1,footer:[r.createElement(o.ZP,{key:"submit",type:"primary",title:l.ZP.v("保存"),onClick:function(){var e,n;x.current&&(n=null==(n=null==(e=null==x?void 0:x.current)?void 0:e.save)?void 0:n.call(e),v)&&(v(n),t.close())}},l.ZP.v("保存"))]},null!=m?m:{}),children:r.createElement(c.Z,u({ref:x},g))})}},h||l.ZP.v("编辑"))}),[y,p,h,f,v]),(0,r.useCallback)((function(){return f?r.createElement("img",{src:f,alt:""}):null}),[f]));return r.createElement("div",{className:i()(d,null!=n?n:""),style:null!=a?a:{}},t(),D())},p=(0,r.memo)((0,r.forwardRef)(y));p.CroppingCore=c.Z,e.Z=p},20582:function(t,e,n){n.d(e,{$2:function(){return d},DY:function(){return g},JG:function(){return s},Wd:function(){return p},bT:function(){return m},iF:function(){return c},is:function(){return f},xE:function(){return i}});var o=n(507877),a=function(){return(a=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function i(t,e){var n;null!=t&&t.beginPath(),null!=t&&t.ellipse((null==(n=e.data.center)?void 0:n.x)||0,(null==(n=e.data.center)?void 0:n.y)||0,e.data.radius,e.data.radius,45*Math.PI/180,0,2*Math.PI),null!=t&&t.closePath()}function r(t){return l({leftTopPoint:{x:t.center.x-t.radius,y:t.center.y-t.radius},width:2*t.radius,height:2*t.radius})}function s(t,e){var n;null!=t&&t.beginPath(),t.rect((null==(n=e.data.leftTopPoint)?void 0:n.x)||0,(null==(n=e.data.leftTopPoint)?void 0:n.y)||0,e.data.width,e.data.height),null!=t&&t.closePath()}function l(t){return a({},t)}function c(t,e){null!=t&&t.beginPath();var n=e.data.width/2,o=e.data.height/2;t.moveTo(e.data.leftTopPoint.x,e.data.leftTopPoint.y+o),t.lineTo(e.data.leftTopPoint.x+n,e.data.leftTopPoint.y),t.lineTo(e.data.leftTopPoint.x+e.data.width,e.data.leftTopPoint.y+o),t.lineTo(e.data.leftTopPoint.x+n,e.data.leftTopPoint.y+e.data.height),null!=t&&t.closePath()}function u(t){return a({},t)}function d(t,e){null!=t&&t.beginPath();for(var n=0;n<5;n++)t.lineTo(Math.cos((18+72*n)/180*Math.PI)*e.data.outRadius+e.data.center.x,-Math.sin((18+72*n)/180*Math.PI)*e.data.outRadius+e.data.center.y),t.lineTo(Math.cos((54+72*n)/180*Math.PI)*e.data.innerRadius+e.data.center.x,-Math.sin((54+72*n)/180*Math.PI)*e.data.innerRadius+e.data.center.y);null!=t&&t.closePath()}function y(t){return r({center:t.center,radius:t.outRadius})}function p(t,e){null!=t&&t.beginPath(),t.moveTo(e.data.points[0].x,e.data.points[0].y),t.lineTo(e.data.points[1].x,e.data.points[1].y),t.lineTo(e.data.points[2].x,e.data.points[2].y),null!=t&&t.closePath()}function h(t){return l({leftTopPoint:{x:t.points[0].x,y:t.points[1].y},width:t.points[2].x-t.points[0].x,height:t.points[2].y-t.points[1].y})}function f(t,e){t.beginPath(),((null==e?void 0:e.data)||[]).forEach((function(e,n){0===n?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)})),null!=t&&t.closePath()}function v(t){var e=t.map((function(t){return t.x})),n=(t=t.map((function(t){return t.y})),(e={minX:Math.min.apply(Math,e),maxX:Math.max.apply(Math,e)}).minX),o=(e=e.maxX,(t={minY:Math.min.apply(Math,t),maxY:Math.max.apply(Math,t)}).minY);return{leftTopPoint:{x:n,y:o},width:e-n,height:t.maxY-o}}function m(t){var e=t.data,n=(t=t.clipCtx,null==(n=new Map([[o.SelectType.Circle,r],[o.SelectType.Rectangle,l],[o.SelectType.Diamond,u],[o.SelectType.Start,y],[o.SelectType.Triangle,h],[o.SelectType.Polygon,v]]).get(e.data.type))?void 0:n(e.data.data));e=t.getImageData(n.leftTopPoint.x,n.leftTopPoint.y,n.width,n.height);return(t=document.createElement("canvas")).width=n.width,t.height=n.height,t.getContext("2d").putImageData(e,0,0),t.toDataURL("image/png",1)}function g(t){var e=Array.from({length:t.length}).fill(null),n=[];return t.forEach((function(t,o){"sort"in t?n.push(t):e[o]=t})),n.forEach((function(t){e.splice(t.sort,0,t)})),e.filter((function(t){return!!t}))}},598252:function(t,e){e.Z={fillStyle:"#ddd",strokeStyle:"#fff",lineWidth:2,lineCap:"round",lineJoin:"round",lineDash:[5,4,3],lineDashOffset:-1,globalAlpha:1}},393823:function(t,e){e.Z={fillStyle:"#eee",strokeStyle:"#ccc",lineWidth:2,lineDash:[5,4,3],lineDashOffset:-1,lineCap:"round",lineJoin:"round",globalAlpha:.6}},172276:function(t,e){e.Z={fillStyle:"#eee",strokeStyle:"#ccc",lineWidth:2,lineCap:"round",lineJoin:"round",lineDash:[],lineDashOffset:-1,globalAlpha:1}},895836:function(t,e,n){var o,a=n(460467),i=n(507877),r=n(174358),s=(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(){var e=t.call(this)||this;return e.centerPoint=null,e.isMove=!1,e.radius=0,e.onCanvasMouseDown=e.onCanvasMouseDown.bind(e),e.onCanvasMouseMove=e.onCanvasMouseMove.bind(e),e.onCanvasMouseUp=e.onCanvasMouseUp.bind(e),e}return s(e,t),e.booleanPointInData=function(t,e){return a.Z.isPointInCircle(t,e.data)},e.prototype.draw=function(t){var e,n=(i=this).context,o=i.centerPoint,i=i.style,r=null==n?void 0:n.getCtx();n&&r&&o&&(e=null==n?void 0:n.getCanvasEl())&&(t=a.Z.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}))&&(null!=n&&n.clearDraw(),null!=n&&n.drawHistoryData(),r.beginPath(),this.radius=a.Z.getDistanceByBetweenPoint({p1:o,p2:t}),r.lineWidth=i.lineWidth,r.lineJoin=i.lineJoin,r.lineCap=i.lineCap,i.lineDash&&r.setLineDash(i.lineDash),r.lineDashOffset=i.lineDashOffset,r.strokeStyle=i.strokeStyle,r.fillStyle=i.fillStyle,r.globalAlpha=i.globalAlpha,r.ellipse((null==o?void 0:o.x)||0,(null==o?void 0:o.y)||0,this.radius,this.radius,45*Math.PI/180,0,2*Math.PI),r.closePath(),r.stroke(),r.fill())},e.prototype.onCanvasMouseDown=function(t){var e;this.context&&(e=this.context.getCanvasEl())&&(this.centerPoint=a.Z.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),null!=e&&e.addEventListener("mousemove",this.onCanvasMouseMove),null!=e)&&e.addEventListener("mouseup",this.onCanvasMouseUp)},e.prototype.onCanvasMouseMove=function(t){var e=this.context;e&&e.getCtx()&&(this.isMove=!0,this.draw(t),this.trigger(i.ActionEvents.Drawing,{selectType:i.SelectType.Circle,actionType:i.ActionType.Draw,data:{id:a.Z.uuid(),type:i.SelectType.Circle,data:{center:this.centerPoint,radius:this.radius},style:this.style}}))},e.prototype.onCanvasMouseUp=function(t){this.isMove&&(this.end(t),t.stopPropagation())},e.draw=function(t,e){t&&e&&this.drawHistoryPath(t,e)},e.drawHistoryPath=function(t,e){var n;t.beginPath(),e.style&&(t.lineWidth=e.style.lineWidth,t.lineJoin=e.style.lineJoin,t.lineCap=e.style.lineCap,e.style.lineDash&&t.setLineDash(e.style.lineDash),t.lineDashOffset=e.style.lineDashOffset,t.strokeStyle=e.style.strokeStyle,t.fillStyle=e.style.fillStyle,t.globalAlpha=null!=(n=e.style.globalAlpha)?n:1),t.ellipse(e.data.center.x,e.data.center.y,e.data.radius,e.data.radius,45*Math.PI/180,0,2*Math.PI),t.closePath(),t.stroke(),t.fill()},e.prototype.start=function(e){var n,o;this.context&&![i.ActionStatus.Running,i.ActionStatus.Destroy].includes(this.status)&&(o=null==(o=null==(n=this.context)?void 0:n.getCanvasEl)?void 0:o.call(n))&&(t.prototype.start.call(this,e),e&&(this.style=e),this.trigger(i.ActionEvents.DrawBeforeStart,{selectType:i.SelectType.Circle,actionType:i.ActionType.Draw}),null!=o&&o.addEventListener("mousedown",this.onCanvasMouseDown),this.status=i.ActionStatus.Running,this.trigger(i.ActionEvents.DrawStart,{selectType:i.SelectType.Circle,actionType:i.ActionType.Draw}))},e.prototype.end=function(e){var n,o=this.context;o&&(n=o.getCanvasEl())&&(null!=n&&n.removeEventListener("mousedown",this.onCanvasMouseDown),null!=n&&n.removeEventListener("mousemove",this.onCanvasMouseMove),null!=n&&n.removeEventListener("mouseup",this.onCanvasMouseUp),e&&this.draw(e),this.status=i.ActionStatus.End,n={id:a.Z.uuid(),type:i.SelectType.Circle,data:{center:this.centerPoint,radius:this.radius},style:this.style},o.addHistoryData(n),this.centerPoint=null,this.radius=0,this.isMove=!1,this.trigger(i.ActionEvents.DrawEnd,{selectType:i.SelectType.Circle,actionType:i.ActionType.Draw,data:n})),t.prototype.end.call(this,e)},e.prototype.destroy=function(){var e,n=this.context;n&&(e=n.getCanvasEl())&&(this.status===i.ActionStatus.Running&&(n.clearDraw(),n.drawHistoryData()),null!=e&&e.removeEventListener("mousedown",this.onCanvasMouseDown),null!=e&&e.removeEventListener("mousemove",this.onCanvasMouseMove),null!=e&&e.removeEventListener("mouseup",this.onCanvasMouseUp),this.centerPoint=null,this.radius=0,this.isMove=!1,this.status=i.ActionStatus.Destroy,this.trigger(i.ActionEvents.Destroy,{selectType:i.SelectType.Circle,actionType:i.ActionType.Draw})),t.prototype.destroy.call(this)},e}(r.Z);e.Z=l},984847:function(t,e,n){var o,a=n(460467),i=n(419174),r=n(507877),s=n(947424),l=n(174358),c=(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(){var e=t.call(this)||this;return e.startPoint=null,e.leftTopPoint=null,e.width=0,e.height=0,e.isMove=!1,e.onCanvasMouseDown=e.onCanvasMouseDown.bind(e),e.onCanvasMouseMove=e.onCanvasMouseMove.bind(e),e.onCanvasMouseUp=e.onCanvasMouseUp.bind(e),e}return c(e,t),e.booleanPointInData=function(t,e){var n=(e=e.data).leftTopPoint,o=(r=e.width)/2,a=(e=e.height)/2,r=(t=i.xmu([t.x,t.y]),i.yue([[[n.x,n.y+a],[n.x+o,n.y],[n.x+r,n.y+a],[n.x+o,n.y+e],[n.x,n.y+a]]]));return i.FWy(t,r)},e.prototype.draw=function(t){var e,n=(i=this).context,o=i.startPoint,i=i.style,r=null==n?void 0:n.getCtx();n&&r&&(e=null==n?void 0:n.getCanvasEl())&&(t=a.Z.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),null!=n&&n.clearDraw(),null!=n&&n.drawHistoryData(),r.beginPath(),this.leftTopPoint=s.Z.getRectLeftTopPoint({startPoint:o,targetPoint:t}),this.leftTopPoint)&&(this.width=Math.abs(t.x-((null==o?void 0:o.x)||0)),this.height=Math.abs(t.y-((null==o?void 0:o.y)||0)),e=this.width/2,n=this.height/2,r.lineWidth=i.lineWidth,r.lineJoin=i.lineJoin,r.lineCap=i.lineCap,i.lineDash&&r.setLineDash(i.lineDash),r.lineDashOffset=i.lineDashOffset,r.strokeStyle=i.strokeStyle,r.fillStyle=i.fillStyle,r.globalAlpha=i.globalAlpha,r.moveTo(this.leftTopPoint.x,this.leftTopPoint.y+n),r.lineTo(this.leftTopPoint.x+e,this.leftTopPoint.y),r.lineTo(this.leftTopPoint.x+this.width,this.leftTopPoint.y+n),r.lineTo(this.leftTopPoint.x+e,this.leftTopPoint.y+this.height),r.closePath(),r.stroke(),r.fill())},e.prototype.onCanvasMouseDown=function(t){var e;this.context&&(e=this.context.getCanvasEl())&&(this.startPoint=a.Z.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),null!=e&&e.addEventListener("mousemove",this.onCanvasMouseMove),null!=e)&&e.addEventListener("mouseup",this.onCanvasMouseUp)},e.prototype.onCanvasMouseMove=function(t){this.context&&(this.isMove=!0,this.draw(t),this.trigger(r.ActionEvents.Drawing,{selectType:r.SelectType.Diamond,actionType:r.ActionType.Draw,data:{id:a.Z.uuid(),type:r.SelectType.Diamond,data:{leftTopPoint:this.leftTopPoint,width:this.width,height:this.height},style:this.style}}))},e.prototype.onCanvasMouseUp=function(t){this.isMove&&(this.end(t),t.stopPropagation())},e.draw=function(t,e){t&&e&&this.drawHistoryPath(t,e)},e.drawHistoryPath=function(t,e){var n,o;e&&e.data.leftTopPoint&&(t.beginPath(),e.style&&(t.lineWidth=e.style.lineWidth,t.lineJoin=e.style.lineJoin,t.lineCap=e.style.lineCap,e.style.lineDash&&t.setLineDash(e.style.lineDash),t.lineDashOffset=e.style.lineDashOffset,t.strokeStyle=e.style.strokeStyle,t.fillStyle=e.style.fillStyle,t.globalAlpha=null!=(n=e.style.globalAlpha)?n:1),n=e.data.width/2,o=e.data.height/2,t.moveTo(e.data.leftTopPoint.x,e.data.leftTopPoint.y+o),t.lineTo(e.data.leftTopPoint.x+n,e.data.leftTopPoint.y),t.lineTo(e.data.leftTopPoint.x+e.data.width,e.data.leftTopPoint.y+o),t.lineTo(e.data.leftTopPoint.x+n,e.data.leftTopPoint.y+e.data.height),t.closePath(),t.stroke(),t.fill())},e.prototype.start=function(e){var n,o;this.context&&![r.ActionStatus.Running,r.ActionStatus.Destroy].includes(this.status)&&(o=null==(o=null==(n=this.context)?void 0:n.getCanvasEl)?void 0:o.call(n))&&(t.prototype.start.call(this,e),e&&(this.style=e),this.trigger(r.ActionEvents.DrawBeforeStart,{selectType:r.SelectType.Diamond,actionType:r.ActionType.Draw}),null!=o&&o.addEventListener("mousedown",this.onCanvasMouseDown),this.status=r.ActionStatus.Running,this.trigger(r.ActionEvents.DrawStart,{selectType:r.SelectType.Diamond,actionType:r.ActionType.Draw}))},e.prototype.end=function(e){var n,o=this.context;o&&(n=o.getCanvasEl())&&(null!=n&&n.removeEventListener("mousedown",this.onCanvasMouseDown),null!=n&&n.removeEventListener("mousemove",this.onCanvasMouseMove),null!=n&&n.removeEventListener("mouseup",this.onCanvasMouseUp),e&&this.draw(e),this.status=r.ActionStatus.End,n={id:a.Z.uuid(),type:r.SelectType.Diamond,data:{leftTopPoint:this.leftTopPoint,width:this.width,height:this.height},style:this.style},o.addHistoryData(n),this.startPoint=null,this.leftTopPoint=null,this.width=0,this.height=0,this.isMove=!1,this.trigger(r.ActionEvents.DrawEnd,{selectType:r.SelectType.Diamond,actionType:r.ActionType.Draw,data:n})),t.prototype.end.call(this,e)},e.prototype.destroy=function(){var e,n=this.context;n&&(e=n.getCanvasEl())&&(this.status===r.ActionStatus.Running&&(n.clearDraw(),n.drawHistoryData()),null!=e&&e.removeEventListener("mousedown",this.onCanvasMouseDown),null!=e&&e.removeEventListener("mousemove",this.onCanvasMouseMove),null!=e&&e.removeEventListener("mouseup",this.onCanvasMouseUp),this.startPoint=null,this.leftTopPoint=null,this.width=0,this.height=0,this.isMove=!1,this.status=r.ActionStatus.Destroy,this.trigger(r.ActionEvents.Destroy,{selectType:r.SelectType.Diamond,actionType:r.ActionType.Draw})),t.prototype.destroy.call(this)},e}(l.Z);e.Z=u},174358:function(t,e,n){var o,a=n(441930),i=n(598252),r=n(393823),s=n(172276),l=n(507877),c=(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(){return(u=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.context=null,e.status=l.ActionStatus.UnStart,e.style=u({},s.Z),e.anchorStyle=u({},i.Z),e.moveGemStyle=u({},r.Z),e}return c(e,t),e.prototype.getAnchorStyle=function(){return u({},this.anchorStyle)},e.prototype.getStyle=function(){return u({},this.style)},e.prototype.getMoveGemStyle=function(){return u({},this.moveGemStyle)},e.prototype.setAnchorStyle=function(t){this.anchorStyle=u(u({},i.Z),null!=t?t:{})},e.prototype.setStyle=function(t){this.style=u(u({},s.Z),null!=t?t:{})},e.prototype.setMoveGemStyle=function(t){this.moveGemStyle=u(u({},r.Z),null!=t?t:{})},e.prototype.destroy=function(){var t,e,n;this.context&&![l.ActionStatus.Running,l.ActionStatus.Destroy].includes(this.status)&&(e=null==(e=null==(t=this.context)?void 0:t.getCanvasEl)?void 0:e.call(t),n=null==(n=null==t?void 0:t.getAssistCanvasEl)?void 0:n.call(t),e)&&n&&(e.style.cursor=n.style.cursor="default")},e.prototype.end=function(t){var e,n;this.context&&![l.ActionStatus.Running,l.ActionStatus.Destroy].includes(this.status)&&(e=null==(n=this.context)?void 0:n.getCanvasEl(),n=null==n?void 0:n.getAssistCanvasEl(),e)&&n&&(e.style.cursor=n.style.cursor="default")},e.prototype.start=function(t){var e;this.context&&![l.ActionStatus.Running,l.ActionStatus.Destroy].includes(this.status)&&(e=this.context.getCanvasEl())&&(e.style.cursor="url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjI3OTEzNjM1NDc3IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjQzMDgiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTUxMi4wMDIgODg3QzMwNC44OTIgODg3IDEzNyA3MTkuMTA4IDEzNyA1MTIuMDAyIDEzNyAzMDQuODkyIDMwNC44OTIgMTM3IDUxMi4wMDIgMTM3IDcxOS4xMDggMTM3IDg4NyAzMDQuODkyIDg4NyA1MTIuMDAyIDg4NyA3MTkuMTA4IDcxOS4xMDggODg3IDUxMi4wMDIgODg3ek01MTIgNzg3YzE1MS44NzggMCAyNzUtMTIzLjEyMiAyNzUtMjc1UzY2My44NzggMjM3IDUxMiAyMzcgMjM3IDM2MC4xMjIgMjM3IDUxMnMxMjMuMTIyIDI3NSAyNzUgMjc1eiIgZmlsbD0iIzFBQTVGRiIgcC1pZD0iNDMwOSI+PC9wYXRoPjxwYXRoIGQ9Ik01MTIgNTEybS0yMjUgMGEyMjUgMjI1IDAgMSAwIDQ1MCAwIDIyNSAyMjUgMCAxIDAtNDUwIDBaIiBmaWxsPSIjMUFBNUZGIiBwLWlkPSI0MzEwIj48L3BhdGg+PC9zdmc+), auto")},e.prototype.setContext=function(t){this.context=t},e.prototype.getStatus=function(){return this.status},e}(a.Z.Events);e.Z=d},897724:function(t,e,n){var o,a=n(460467),i=n(507877),r=n(174358),s=(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(){var e=t.call(this)||this;return e.startPoint=null,e.isMove=!1,e.points=[],e.onCanvasMouseDown=e.onCanvasMouseDown.bind(e),e.onCanvasMouseMove=e.onCanvasMouseMove.bind(e),e.onCanvasMouseUp=e.onCanvasMouseUp.bind(e),e}return s(e,t),e.prototype.draw=function(t,e){void 0===e&&(e=!1);var n,o=this.context,i=this.style,r=null==o?void 0:o.getCtx();o&&r&&(n=o.getCanvasEl())&&(t=a.Z.clientToCtxPoint({event:t,rect:null==n?void 0:n.getBoundingClientRect()}))&&(this.points.push(t),o.clearDraw(),o.drawHistoryData(),r.beginPath(),r.lineWidth=i.lineWidth,r.lineJoin=i.lineJoin,r.lineCap=i.lineCap,i.lineDash&&r.setLineDash(i.lineDash),r.lineDashOffset=i.lineDashOffset,r.strokeStyle=i.strokeStyle,r.fillStyle=i.fillStyle,r.globalAlpha=i.globalAlpha,this.points.forEach((function(t,e){0===e?r.moveTo(t.x,t.y):r.lineTo(t.x,t.y)})),e&&r.closePath(),r.stroke(),r.fill())},e.prototype.onCanvasMouseDown=function(t){var e;this.context&&(e=this.context.getCanvasEl())&&(this.startPoint=a.Z.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),this.startPoint)&&(this.points.push(this.startPoint),null!=e&&e.addEventListener("mousemove",this.onCanvasMouseMove),null!=e)&&e.addEventListener("mouseup",this.onCanvasMouseUp)},e.prototype.onCanvasMouseMove=function(t){this.context&&(this.isMove=!0,this.draw(t),this.trigger(i.ActionEvents.Drawing,{selectType:i.SelectType.Free,actionType:i.ActionType.Draw,data:{id:a.Z.uuid(),type:i.SelectType.Free,data:{points:JSON.parse(JSON.stringify(this.points))},style:this.style}}))},e.prototype.onCanvasMouseUp=function(t){this.isMove&&(this.end(t),t.stopPropagation())},e.draw=function(t,e){t&&e&&this.drawHistoryPath(t,e)},e.drawHistoryPath=function(t,e){t.beginPath(),e.style&&(t.lineWidth=e.style.lineWidth,t.lineJoin=e.style.lineJoin,t.lineCap=e.style.lineCap,e.style.lineDash&&t.setLineDash(e.style.lineDash),t.lineDashOffset=e.style.lineDashOffset,t.strokeStyle=e.style.strokeStyle,t.fillStyle=e.style.fillStyle,t.globalAlpha=null!=(n=e.style.globalAlpha)?n:1);var n=e.data.points;((void 0===n?[]:n)||[]).forEach((function(e,n){0===n?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)})),t.closePath(),t.stroke(),t.fill()},e.prototype.start=function(e){var n,o;this.context&&![i.ActionStatus.Running,i.ActionStatus.Destroy].includes(this.status)&&(o=null==(o=null==(n=this.context)?void 0:n.getCanvasEl)?void 0:o.call(n))&&(t.prototype.start.call(this,e),e&&(this.style=e),this.trigger(i.ActionEvents.DrawBeforeStart,{selectType:i.SelectType.Free,actionType:i.ActionType.Draw}),null!=o&&o.addEventListener("mousedown",this.onCanvasMouseDown),this.status=i.ActionStatus.Running,this.trigger(i.ActionEvents.DrawStart,{selectType:i.SelectType.Free,actionType:i.ActionType.Draw}))},e.prototype.end=function(e){var n,o=this.context;o&&(n=o.getCanvasEl())&&(null!=n&&n.removeEventListener("mousedown",this.onCanvasMouseDown),null!=n&&n.removeEventListener("mousemove",this.onCanvasMouseMove),null!=n&&n.removeEventListener("mouseup",this.onCanvasMouseUp),this.draw(e,!0),this.status=i.ActionStatus.End,n={id:a.Z.uuid(),type:i.SelectType.Free,data:{points:JSON.parse(JSON.stringify(this.points))},style:this.style},o.addHistoryData(n),this.startPoint=null,this.points=[],this.isMove=!1,this.trigger(i.ActionEvents.DrawEnd,{selectType:i.SelectType.Free,actionType:i.ActionType.Draw,data:n})),t.prototype.end.call(this,e)},e.prototype.destroy=function(){var e,n=this.context;n&&(e=n.getCanvasEl())&&(this.status===i.ActionStatus.Running&&(n.clearDraw(),n.drawHistoryData()),null!=e&&e.removeEventListener("mousedown",this.onCanvasMouseDown),null!=e&&e.removeEventListener("mousemove",this.onCanvasMouseMove),null!=e&&e.removeEventListener("mouseup",this.onCanvasMouseUp),this.startPoint=null,this.points=[],this.isMove=!1,this.status=i.ActionStatus.Destroy,this.trigger(i.ActionEvents.Destroy,{selectType:i.SelectType.Free,actionType:i.ActionType.Draw})),t.prototype.destroy.call(this)},e}(r.Z);e.Z=l},816235:function(t,e,n){var o,a=n(460467),i=n(419174),r=n(507877),s=n(174358),l=(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t,e,n){if(n||2===arguments.length)for(var o,a=0,i=e.length;a<i;a++)!o&&a in e||((o=o||Array.prototype.slice.call(e,0,a))[a]=e[a]);return t.concat(o||Array.prototype.slice.call(e))},u=function(t){function e(){var e=t.call(this)||this;return e.startPoint=null,e.pointStack=[],e.isMove=!1,e.onCanvasClick=e.onCanvasClick.bind(e),e.onCanvasMousemove=e.onCanvasMousemove.bind(e),e.onCanvasDbClick=e.onCanvasDbClick.bind(e),e}return l(e,t),e.booleanPointInData=function(t,e){return(e=c([],e.data,!0)).push(e[0]),t=i.xmu([t.x,t.y]),e=i.yue([e.map((function(t){return[t.x,t.y]}))]),i.FWy(t,e)},e.prototype.onCanvasClick=function(t){var e,n;t.stopPropagation(),this.context&&(e=this.context.getCanvasEl())&&(this.startPoint?(n=a.Z.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),this.drawLine(this.startPoint,n),this.startPoint=n,this.startPoint&&this.pointStack.push(this.startPoint)):(null!=e&&e.addEventListener("mousemove",this.onCanvasMousemove),null!=e&&e.addEventListener("dblclick",this.onCanvasDbClick),this.startPoint=a.Z.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),this.startPoint&&(this.pointStack.push(this.startPoint),this.trigger(r.ActionEvents.DrawStart,{selectType:r.SelectType.Polygon,actionType:r.ActionType.Draw}))))},e.prototype.onCanvasMousemove=function(t){var e;this.context&&this.startPoint&&(e=this.context.getCanvasEl())&&(this.isMove=!0,this.context.clearDraw(),this.context.drawHistoryData(),this.drawStack(),this.drawLine(this.startPoint,a.Z.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()})))},e.prototype.onCanvasDbClick=function(t){this.isMove&&(this.end(),t.stopPropagation())},e.prototype.drawStack=function(){var t=this.pointStack;if(!(t.length<=1))for(var e=0;this.drawLine(t[e],t[e+1]),++e!=t.length-1;);},e.prototype.fill=function(){if(this.context){var t=this.pointStack,e=this.context.getCtx();if(e&&!(t.length<=1)){null!=e&&e.beginPath(),e.lineWidth=this.style.lineWidth,e.lineJoin=this.style.lineJoin,e.lineCap=this.style.lineCap,this.style.lineDash&&e.setLineDash(this.style.lineDash),e.lineDashOffset=this.style.lineDashOffset,e.strokeStyle=this.style.strokeStyle,e.fillStyle=this.style.fillStyle,e.globalAlpha=this.style.globalAlpha;for(var n=0;n<t.length;n++){var o=t[n];0===n?null!=e&&e.moveTo(o.x,o.y):null!=e&&e.lineTo(o.x,o.y)}e.closePath(),e.stroke(),e.fill()}}},e.prototype.drawLine=function(t,e){var n,o;this.context&&(n=this.style,o=this.context.getCtx())&&(o.beginPath(),o.moveTo(t.x,t.y),o.lineTo(e.x,e.y),o.strokeStyle=n.strokeStyle,n.lineDash&&o.setLineDash(n.lineDash),o.lineWidth=n.lineWidth/2,o.lineCap=n.lineCap,o.lineJoin=n.lineJoin,o.lineDashOffset=n.lineDashOffset,o.globalAlpha=1,o.closePath(),o.stroke())},e.draw=function(t,e){t&&e&&this.drawHistoryPath(t,e)},e.drawHistoryPath=function(t,e){var n;t.beginPath(),e.style&&(t.lineWidth=e.style.lineWidth,t.lineJoin=e.style.lineJoin,t.lineCap=e.style.lineCap,e.style.lineDash&&t.setLineDash(e.style.lineDash),t.lineDashOffset=e.style.lineDashOffset,t.strokeStyle=e.style.strokeStyle,t.fillStyle=e.style.fillStyle,t.globalAlpha=null!=(n=e.style.globalAlpha)?n:1),((null==e?void 0:e.data)||[]).forEach((function(e,n){0===n?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)})),t.closePath(),t.stroke(),t.fill()},e.prototype.start=function(e){var n,o;this.context&&![r.ActionStatus.Running,r.ActionStatus.Destroy].includes(this.status)&&(n=this.context)&&(o=n.getCanvasEl())&&(t.prototype.start.call(this,e),e&&(this.style=e),this.trigger(r.ActionEvents.DrawBeforeStart,{selectType:r.SelectType.Polygon,actionType:r.ActionType.Draw}),null!=o&&o.addEventListener("mouseup",this.onCanvasClick),this.status=r.ActionStatus.Running)},e.prototype.end=function(){var e,n=this.context;n&&(e=n.getCanvasEl())&&(null!=e&&e.removeEventListener("mouseup",this.onCanvasClick),null!=e&&e.removeEventListener("mousemove",this.onCanvasMousemove),null!=e&&e.removeEventListener("dblclick",this.onCanvasDbClick),n.clearDraw(),n.drawHistoryData(),this.fill(),this.status=r.ActionStatus.End,e={id:a.Z.uuid(),type:r.SelectType.Polygon,data:c([],this.pointStack,!0),style:this.style},this.startPoint=null,this.pointStack=[],this.isMove=!1,n.addHistoryData(e),this.trigger(r.ActionEvents.DrawEnd,{selectType:r.SelectType.Polygon,actionType:r.ActionType.Draw,data:e})),t.prototype.end.call(this)},e.prototype.destroy=function(){var e,n=this.context;n&&(e=n.getCanvasEl())&&(this.status===r.ActionStatus.Running&&(n.clearDraw(),n.drawHistoryData()),null!=e&&e.removeEventListener("mouseup",this.onCanvasClick),null!=e&&e.removeEventListener("mousemove",this.onCanvasMousemove),null!=e&&e.removeEventListener("dblclick",this.onCanvasDbClick),this.startPoint=null,this.pointStack=[],this.isMove=!1,this.status=r.ActionStatus.Destroy,this.trigger(r.ActionEvents.Destroy,{selectType:r.SelectType.Polygon,actionType:r.ActionType.Draw})),t.prototype.destroy.call(this)},e}(s.Z);e.Z=u},389418:function(t,e,n){var o,a=n(460467),i=n(419174),r=n(507877),s=n(947424),l=n(174358),c=(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(){var e=t.call(this)||this;return e.startPoint=null,e.leftTopPoint=null,e.width=0,e.height=0,e.isMove=!1,e.onCanvasMouseDown=e.onCanvasMouseDown.bind(e),e.onCanvasMouseMove=e.onCanvasMouseMove.bind(e),e.onCanvasMouseUp=e.onCanvasMouseUp.bind(e),e}return c(e,t),e.booleanPointInData=function(t,e){var n=(e=e.data).leftTopPoint,o=e.width;e=e.height,t=i.xmu([t.x,t.y]),o=i.yue([[[n.x,n.y],[n.x+o,n.y],[n.x+o,n.y+e],[n.x,n.y+e],[n.x,n.y]]]);return i.FWy(t,o)},e.prototype.draw=function(t){var e,n=(i=this).context,o=i.startPoint,i=i.style,r=null==n?void 0:n.getCtx();n&&r&&(e=null==(e=null==n?void 0:n.getCanvasEl)?void 0:e.call(n))&&(t=a.Z.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),null!=(e=null==n?void 0:n.clearDraw)&&e.call(n),null!=(e=null==n?void 0:n.drawHistoryData)&&e.call(n),r.beginPath(),this.leftTopPoint=s.Z.getRectLeftTopPoint({startPoint:o,targetPoint:t}),this.width=Math.abs(t.x-((null==o?void 0:o.x)||0)),this.height=Math.abs(t.y-((null==o?void 0:o.y)||0)),r.lineWidth=i.lineWidth,r.lineJoin=i.lineJoin,r.lineCap=i.lineCap,i.lineDash&&r.setLineDash(i.lineDash),r.lineDashOffset=i.lineDashOffset,r.strokeStyle=i.strokeStyle,r.fillStyle=i.fillStyle,r.globalAlpha=i.globalAlpha,r.rect((null==(e=this.leftTopPoint)?void 0:e.x)||0,(null==(n=this.leftTopPoint)?void 0:n.y)||0,this.width,this.height),r.closePath(),r.stroke(),r.fill())},e.prototype.onCanvasMouseDown=function(t){var e;this.context&&(e=this.context.getCanvasEl())&&(this.startPoint=a.Z.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),null!=e&&e.addEventListener("mousemove",this.onCanvasMouseMove),null!=e)&&e.addEventListener("mouseup",this.onCanvasMouseUp)},e.prototype.onCanvasMouseMove=function(t){this.context&&(this.isMove=!0,this.draw(t),this.trigger(r.ActionEvents.Drawing,{selectType:r.SelectType.Rectangle,actionType:r.ActionType.Draw,data:{id:a.Z.uuid(),type:r.SelectType.Rectangle,data:{leftTopPoint:this.leftTopPoint,width:this.width,height:this.height},style:this.style}}))},e.prototype.onCanvasMouseUp=function(t){this.isMove&&(this.end(t),t.stopPropagation())},e.draw=function(t,e){t&&e&&this.drawHistoryPath(t,e)},e.drawHistoryPath=function(t,e){var n;t.beginPath(),e.style&&(t.lineWidth=e.style.lineWidth,t.lineJoin=e.style.lineJoin,t.lineCap=e.style.lineCap,e.style.lineDash&&t.setLineDash(e.style.lineDash),t.lineDashOffset=e.style.lineDashOffset,t.strokeStyle=e.style.strokeStyle,t.fillStyle=e.style.fillStyle,t.globalAlpha=null!=(n=e.style.globalAlpha)?n:1),t.rect((null==(n=null==(n=null==e?void 0:e.data)?void 0:n.leftTopPoint)?void 0:n.x)||0,(null==(n=null==(n=null==e?void 0:e.data)?void 0:n.leftTopPoint)?void 0:n.y)||0,null==(n=null==e?void 0:e.data)?void 0:n.width,null==(n=null==e?void 0:e.data)?void 0:n.height),t.closePath(),t.stroke(),t.fill()},e.prototype.start=function(e){var n,o;this.context&&![r.ActionStatus.Running,r.ActionStatus.Destroy].includes(this.status)&&(o=null==(o=null==(n=this.context)?void 0:n.getCanvasEl)?void 0:o.call(n))&&(t.prototype.start.call(this,e),e&&(this.style=e),this.trigger(r.ActionEvents.DrawBeforeStart,{selectType:r.SelectType.Rectangle,actionType:r.ActionType.Draw}),null!=o&&o.addEventListener("mousedown",this.onCanvasMouseDown),this.status=r.ActionStatus.Running,this.trigger(r.ActionEvents.DrawStart,{selectType:r.SelectType.Rectangle,actionType:r.ActionType.Draw}))},e.prototype.end=function(e){var n,o=this.context;o&&(n=o.getCanvasEl())&&(null!=n&&n.removeEventListener("mousedown",this.onCanvasMouseDown),null!=n&&n.removeEventListener("mousemove",this.onCanvasMouseMove),null!=n&&n.removeEventListener("mouseup",this.onCanvasMouseUp),e&&this.draw(e),this.status=r.ActionStatus.End,n={id:a.Z.uuid(),type:r.SelectType.Rectangle,data:{leftTopPoint:this.leftTopPoint,width:this.width,height:this.height},style:this.style},o.addHistoryData(n),this.startPoint=null,this.leftTopPoint=null,this.width=0,this.height=0,this.isMove=!1,this.trigger(r.ActionEvents.DrawEnd,{selectType:r.SelectType.Rectangle,actionType:r.ActionType.Draw,data:n})),t.prototype.end.call(this,e)},e.prototype.destroy=function(){var e,n=this.context;n&&(e=n.getCanvasEl())&&(this.status===r.ActionStatus.Running&&(n.clearDraw(),n.drawHistoryData()),null!=e&&e.removeEventListener("mousedown",this.onCanvasMouseDown),null!=e&&e.removeEventListener("mousemove",this.onCanvasMouseMove),null!=e&&e.removeEventListener("mouseup",this.onCanvasMouseUp),this.startPoint=null,this.leftTopPoint=null,this.width=0,this.height=0,this.isMove=!1,this.status=r.ActionStatus.Destroy,this.trigger(r.ActionEvents.Destroy,{selectType:r.SelectType.Rectangle,actionType:r.ActionType.Draw})),t.prototype.destroy.call(this)},e}(l.Z);e.Z=u},288882:function(t,e,n){var o,a=n(460467),i=n(419174),r=n(507877),s=n(174358),l=(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){function e(){var e=t.call(this)||this;return e.centerPoint=null,e.outRadius=0,e.innerRadius=0,e.isMove=!1,e.onCanvasMouseDown=e.onCanvasMouseDown.bind(e),e.onCanvasMouseMove=e.onCanvasMouseMove.bind(e),e.onCanvasMouseUp=e.onCanvasMouseUp.bind(e),e}return l(e,t),e.booleanPointInData=function(t,e){for(var n=(e=e.data).center,o=e.outRadius,a=e.innerRadius,r=(e=i.xmu([t.x,t.y]),[]),s=0;s<5;s++)r.push({x:Math.cos((18+72*s)/180*Math.PI)*o+n.x,y:-Math.sin((18+72*s)/180*Math.PI)*o+n.y}),r.push({x:Math.cos((54+72*s)/180*Math.PI)*a+n.x,y:-Math.sin((54+72*s)/180*Math.PI)*a+n.y});return(t=r.map((function(t){return[t.x,t.y]}))).push(t[0]),t=i.yue([t]),i.FWy(e,t)},e.drawStart=function(t){var e=t.ctx;if((t=t.data)&&e){for(var n=t.data,o=n.center,a=n.outRadius,i=n.innerRadius,r=t.style,s=(e.beginPath(),t.style&&(e.lineWidth=t.style.lineWidth,e.lineJoin=t.style.lineJoin,e.lineCap=t.style.lineCap,t.style.lineDash&&e.setLineDash(t.style.lineDash),e.lineDashOffset=t.style.lineDashOffset,e.strokeStyle=t.style.strokeStyle,e.fillStyle=t.style.fillStyle,e.globalAlpha=null!=(n=t.style.globalAlpha)?n:1),72),l=0;l<5;l++)r&&(e.lineWidth=r.lineWidth,e.lineJoin=r.lineJoin,e.lineCap=r.lineCap,r.lineDash&&e.setLineDash(r.lineDash),e.lineDashOffset=r.lineDashOffset,e.strokeStyle=r.strokeStyle,e.fillStyle=r.fillStyle,e.globalAlpha=r.globalAlpha),e.lineTo(Math.cos((18+l*s)/180*Math.PI)*a+o.x,-Math.sin((18+l*s)/180*Math.PI)*a+o.y),e.lineTo(Math.cos((54+l*s)/180*Math.PI)*i+o.x,-Math.sin((54+l*s)/180*Math.PI)*i+o.y);e.closePath(),e.stroke(),e.fill()}},e.prototype.draw=function(t){var n,o=this.context,i=this.centerPoint,r=null==o?void 0:o.getCtx();o&&i&&r&&(n=o.getCanvasEl())&&this.centerPoint&&(t=a.Z.clientToCtxPoint({event:t,rect:null==n?void 0:n.getBoundingClientRect()}),o.clearDraw(),o.drawHistoryData(),this.outRadius=a.Z.getDistanceByBetweenPoint({p1:i,p2:t}),this.innerRadius=this.outRadius/2,e.drawStart({ctx:r,data:{data:{center:this.centerPoint,outRadius:this.outRadius,innerRadius:this.innerRadius},style:this.style}}))},e.prototype.onCanvasMouseDown=function(t){var e;this.context&&(e=this.context.getCanvasEl())&&(this.centerPoint=a.Z.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),null!=e&&e.addEventListener("mousemove",this.onCanvasMouseMove),null!=e)&&e.addEventListener("mouseup",this.onCanvasMouseUp)},e.prototype.onCanvasMouseMove=function(t){this.context&&(this.isMove=!0,this.draw(t),this.trigger(r.ActionEvents.Drawing,{selectType:r.SelectType.Start,actionType:r.ActionType.Draw,data:{id:a.Z.uuid(),type:r.SelectType.Start,data:{center:this.centerPoint,outRadius:this.outRadius,innerRadius:this.innerRadius},style:this.style}}))},e.prototype.onCanvasMouseUp=function(t){this.isMove&&(this.end(t),t.stopPropagation())},e.draw=function(t,e){t&&e&&this.drawHistoryPath(t,e)},e.drawHistoryPath=function(t,n){n&&e.drawStart({ctx:t,data:n})},e.prototype.start=function(e){var n,o;this.context&&![r.ActionStatus.Running,r.ActionStatus.Destroy].includes(this.status)&&(o=null==(o=null==(n=this.context)?void 0:n.getCanvasEl)?void 0:o.call(n))&&(t.prototype.start.call(this,e),e&&(this.style=e),this.trigger(r.ActionEvents.DrawBeforeStart,{selectType:r.SelectType.Start,actionType:r.ActionType.Draw}),null!=o&&o.addEventListener("mousedown",this.onCanvasMouseDown),this.status=r.ActionStatus.Running,this.trigger(r.ActionEvents.DrawStart,{selectType:r.SelectType.Start,actionType:r.ActionType.Draw}))},e.prototype.end=function(e){var n,o=this.context;o&&(n=null==(n=null==o?void 0:o.getCanvasEl)?void 0:n.call(o))&&this.centerPoint&&this.outRadius&&this.innerRadius&&(null!=n&&n.removeEventListener("mousedown",this.onCanvasMouseDown),null!=n&&n.removeEventListener("mousemove",this.onCanvasMouseMove),null!=n&&n.removeEventListener("mouseup",this.onCanvasMouseUp),e&&this.draw(e),this.status=r.ActionStatus.End,n={id:a.Z.uuid(),type:r.SelectType.Start,data:{center:this.centerPoint,outRadius:this.outRadius,innerRadius:this.innerRadius},style:this.style},o.addHistoryData(n),this.centerPoint=null,this.outRadius=0,this.innerRadius=0,this.isMove=!1,this.trigger(r.ActionEvents.DrawEnd,{selectType:r.SelectType.Start,actionType:r.ActionType.Draw,data:n})),t.prototype.end.call(this,e)},e.prototype.destroy=function(){var e,n=this.context;n&&(e=n.getCanvasEl())&&(this.status===r.ActionStatus.Running&&(n.clearDraw(),n.drawHistoryData()),null!=e&&e.removeEventListener("mousedown",this.onCanvasMouseDown),null!=e&&e.removeEventListener("mousemove",this.onCanvasMouseMove),null!=e&&e.removeEventListener("mouseup",this.onCanvasMouseUp),this.centerPoint=null,this.outRadius=0,this.innerRadius=0,this.isMove=!1,this.status=r.ActionStatus.Destroy,this.trigger(r.ActionEvents.Destroy,{selectType:r.SelectType.Start,actionType:r.ActionType.Draw})),t.prototype.destroy.call(this)},e}(s.Z);e.Z=c},929932:function(t,e,n){var o,a=n(460467),i=n(419174),r=n(507877),s=n(947424),l=n(174358),c=(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t,e,n){if(n||2===arguments.length)for(var o,a=0,i=e.length;a<i;a++)!o&&a in e||((o=o||Array.prototype.slice.call(e,0,a))[a]=e[a]);return t.concat(o||Array.prototype.slice.call(e))},d=function(t){function e(){var e=t.call(this)||this;return e.startPoint=null,e.points=[],e.isMove=!1,e.onCanvasMouseDown=e.onCanvasMouseDown.bind(e),e.onCanvasMouseMove=e.onCanvasMouseMove.bind(e),e.onCanvasMouseUp=e.onCanvasMouseUp.bind(e),e}return c(e,t),e.booleanPointInData=function(t,e){return(e=u([],e.data.points||[],!0)).push(e[0]),t=i.xmu([t.x,t.y]),e=i.yue([e.map((function(t){return[t.x,t.y]}))]),i.FWy(t,e)},e.prototype.draw=function(t){var e,n=(i=this).context,o=i.startPoint,i=i.style,r=null==n?void 0:n.getCtx();n&&r&&(e=null==n?void 0:n.getCanvasEl())&&(t=a.Z.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),null!=n&&n.clearDraw(),null!=n&&n.drawHistoryData(),r.beginPath(),r.lineWidth=i.lineWidth,r.lineJoin=i.lineJoin,r.lineCap=i.lineCap,i.lineDash&&r.setLineDash(i.lineDash),r.lineDashOffset=i.lineDashOffset,r.strokeStyle=i.strokeStyle,r.fillStyle=i.fillStyle,r.globalAlpha=i.globalAlpha,this.points=s.Z.triangle({startPoint:o,targetPoint:t}),r.moveTo(this.points[0].x,this.points[0].y),r.lineTo(this.points[1].x,this.points[1].y),r.lineTo(this.points[2].x,this.points[2].y),r.closePath(),r.stroke(),r.fill())},e.prototype.onCanvasMouseDown=function(t){var e;this.context&&(e=this.context.getCanvasEl())&&(this.startPoint=a.Z.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),null!=e&&e.addEventListener("mousemove",this.onCanvasMouseMove),null!=e)&&e.addEventListener("mouseup",this.onCanvasMouseUp)},e.prototype.onCanvasMouseMove=function(t){this.context&&(this.isMove=!0,this.draw(t),this.trigger(r.ActionEvents.Drawing,{selectType:r.SelectType.Triangle,actionType:r.ActionType.Draw,data:{id:a.Z.uuid(),type:r.SelectType.Triangle,data:{points:JSON.parse(JSON.stringify(this.points))},style:this.style}}))},e.prototype.onCanvasMouseUp=function(t){this.isMove&&(this.end(t),t.stopPropagation())},e.draw=function(t,e){t&&e&&this.drawHistoryPath(t,e)},e.drawHistoryPath=function(t,e){var n;t.beginPath(),e.style&&(t.lineWidth=e.style.lineWidth,t.lineJoin=e.style.lineJoin,t.lineCap=e.style.lineCap,e.style.lineDash&&t.setLineDash(e.style.lineDash),t.lineDashOffset=e.style.lineDashOffset,t.strokeStyle=e.style.strokeStyle,t.fillStyle=e.style.fillStyle,t.globalAlpha=null!=(n=e.style.globalAlpha)?n:1),t.moveTo(e.data.points[0].x,e.data.points[0].y),t.lineTo(e.data.points[1].x,e.data.points[1].y),t.lineTo(e.data.points[2].x,e.data.points[2].y),t.closePath(),t.stroke(),t.fill()},e.prototype.start=function(e){var n,o;this.context&&![r.ActionStatus.Running,r.ActionStatus.Destroy].includes(this.status)&&(o=null==(o=null==(n=this.context)?void 0:n.getCanvasEl)?void 0:o.call(n))&&(t.prototype.start.call(this,e),e&&(this.style=e),this.trigger(r.ActionEvents.DrawBeforeStart,{selectType:r.SelectType.Triangle,actionType:r.ActionType.Draw}),null!=o&&o.addEventListener("mousedown",this.onCanvasMouseDown),this.status=r.ActionStatus.Running,this.trigger(r.ActionEvents.DrawStart,{selectType:r.SelectType.Triangle,actionType:r.ActionType.Draw}))},e.prototype.end=function(e){var n,o=this.context;o&&(n=o.getCanvasEl())&&(null!=n&&n.removeEventListener("mousedown",this.onCanvasMouseDown),null!=n&&n.removeEventListener("mousemove",this.onCanvasMouseMove),null!=n&&n.removeEventListener("mouseup",this.onCanvasMouseUp),e&&this.draw(e),this.status=r.ActionStatus.End,n={id:a.Z.uuid(),type:r.SelectType.Triangle,data:{points:JSON.parse(JSON.stringify(this.points))},style:this.style},o.addHistoryData(n),this.startPoint=null,this.points=[],this.isMove=!1,this.trigger(r.ActionEvents.DrawEnd,{selectType:r.SelectType.Triangle,actionType:r.ActionType.Draw,data:n})),t.prototype.end.call(this,e)},e.prototype.destroy=function(){var e,n=this.context;n&&(e=n.getCanvasEl())&&(this.status===r.ActionStatus.Running&&(n.clearDraw(),n.drawHistoryData()),null!=e&&e.removeEventListener("mousedown",this.onCanvasMouseDown),null!=e&&e.removeEventListener("mousemove",this.onCanvasMouseMove),null!=e&&e.removeEventListener("mouseup",this.onCanvasMouseUp),this.startPoint=null,this.points=[],this.isMove=!1,this.status=r.ActionStatus.Destroy,this.trigger(r.ActionEvents.Destroy,{selectType:r.SelectType.Triangle,actionType:r.ActionType.Draw})),t.prototype.destroy.call(this)},e}(l.Z);e.Z=d},699819:function(t,e,n){var o=n(620308),a=n(598252),i=n(393823),r=n(172276),s=n(895836),l=n(984847),c=n(174358),u=n(897724),d=n(816235),y=n(389418),p=n(288882),h=n(929932),f=n(983883),v=n(538779),m=n(686281),g=n(567521),x=n(847267),D=n(554438),C=n(423746),T=n(507877),M=n(947424);e.Z={PolygonSelection:o.Z,CircleDrawAction:s.Z,DiamondDrawAction:l.Z,DrawAction:c.Z,FreeDrawAction:u.Z,PolygonDrawAction:d.Z,RectangleDrawAction:y.Z,StartDrawAction:p.Z,TriangleDrawAction:h.Z,CircleModifyAction:f.Z,DiamondModifyAction:v.Z,ModifyAction:m.Z,PolygonModifyAction:g.Z,RectangleModifyAction:x.Z,StartModifyAction:D.Z,TriangleModifyAction:C.Z,DefaultAnchorStyle:a.Z,DefaultMoveGemStyle:i.Z,DefaultStyle:r.Z,Util:M.Z,Types:T}},983883:function(t,e,n){var o,a=n(460467),i=n(895836),r=n(507877),s=n(686281),l=(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(){return(c=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},u=function(t){function e(e){return(e=t.call(this,e)||this).ResizeCursorMapping=new Map([[0,"ns-resize"],[1,"ew-resize"],[2,"ns-resize"],[3,"ew-resize"]]),e}return l(e,t),e.prototype.drawAnchors=function(){if(this.context){var t=this.context.getCtx();if(t)for(var e=(n=null==(n=null==(n=null==this?void 0:this.data)?void 0:n.data)?void 0:n.data).center,n=n.radius,o=[{x:e.x,y:e.y-n},{x:e.x+n,y:e.y},{x:e.x,y:e.y+n},{x:e.x-n,y:e.y}],a=0;a<o.length;a++){var i=o[a];t.beginPath(),this.setAnchorCircleStyle(),t.ellipse(i.x,i.y,this.anchorRadius,this.anchorRadius,45*Math.PI/180,0,2*Math.PI),t.closePath(),t.stroke(),t.fill()}}},e.prototype.getPointInAnchor=function(t){if(!this.data)return null;for(var e=null,n=-1,o=(i=null==(i=null==(i=null==this?void 0:this.data)?void 0:i.data)?void 0:i.data).center,i=i.radius,r=[{x:o.x,y:o.y-i},{x:o.x+i,y:o.y},{x:o.x,y:o.y+i},{x:o.x-i,y:o.y}],s=0;s<r.length;s++){var l=r[s],c=this.anchorRadius+this.anchorLineWidth;if(a.Z.isPointInCircle(t,{center:l,radius:c})){e=l,n=s;break}}return e&&-1!==n?{point:e,index:n}:null},e.prototype.setResizeCursorByIndex=function(t){var e,n;this.context&&(e=this.context.getCanvasEl(),n=this.context.getAssistCanvasEl(),e)&&n&&(e.style.cursor=n.style.cursor=this.ResizeCursorMapping.get(t))},e.prototype.drawModify=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();n&&o&&this.data&&this.startPoint&&(o=n.getHistoryDataById(this.data.data.id))&&(e=o.data.center,o.data.radius=a.Z.getDistanceByBetweenPoint({p1:e,p2:t}),this.data.data=o,n.clearDraw(),n.drawHistoryData(),this.drawAnchors())},e.prototype.drawMove=function(t,e){var n,o=this.context,a=null==o?void 0:o.getCtx();o&&a&&this.data&&(a=o.getHistoryDataById(this.data.data.id))&&(n=e.x-t.x,e=e.y-t.y,a.data.center.x+=n,a.data.center.y+=e,this.data.data=a,o.clearDraw(),o.drawHistoryData(),this.drawAnchors())},e.prototype.getSelectType=function(){return r.SelectType.Circle},e.prototype.isCanMove=function(t){var e,n;return!!this.data&&(e=(n=null==(n=null==(n=null==this?void 0:this.data)?void 0:n.data)?void 0:n.data).center,n=n.radius,a.Z.isPointInCircle(t,{center:e,radius:n}))&&!this.getPointInAnchor(t)},e.prototype.drawMoveGeometry=function(){this.context&&this.data&&i.Z.draw(this.context.getAssistCtx(),this.data)},e.prototype.drawMoveGeometry=function(t,e){var n,o;return this.context&&this.data&&t&&e?((n=JSON.parse(JSON.stringify(this.data.data))).data=c(c({},n.data),{center:c({},n.data.center)}),o=e.x-t.x,e=e.y-t.y,n.data&&n.data.center&&(n.data.center.x+=o,n.data.center.y+=e,o=c(c({},this.moveGemStyle),null!=(t=n.style)?t:{}),n.style.lineWidth=o.lineWidth,n.style.lineJoin=o.lineJoin,n.style.lineCap=o.lineCap,n.lineDash=o.lineDash,n.style.lineDashOffset=o.lineDashOffset,n.style.strokeStyle=o.strokeStyle,n.style.fillStyle=o.fillStyle,n.style.globalAlpha=null!=(e=o.globalAlpha)?e:1,i.Z.draw(this.context.getAssistCtx(),n)),n):null},e}(s.Z);e.Z=u},538779:function(t,e,n){var o,a=n(460467),i=n(419174),r=n(984847),s=n(507877),l=n(686281),c=(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(){return(u=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},d=function(t){function e(e){return(e=t.call(this,e)||this).rectangleAnchorPoints=[],e.indexToModifyHandlerMapping=new Map([[0,e.modifyDataByLeftTop],[1,e.modifyDataByCenterTop],[2,e.modifyDataByRightTop],[3,e.modifyDataByRightCenter],[4,e.modifyDataByRightBottom],[5,e.modifyDataByCenterBottom],[6,e.modifyDataByLeftBottom],[7,e.modifyDataByLeftCenter]]),e.ResizeCursorMapping=new Map([[0,"nwse-resize"],[1,"ns-resize"],[2,"nesw-resize"],[3,"ew-resize"],[4,"nwse-resize"],[5,"ns-resize"],[6,"nesw-resize"],[7,"ew-resize"]]),e}return c(e,t),e.prototype.drawAnchors=function(){if(this.context){var t=this.context.getCtx();if(t){var e,n=(e=null==(e=null==(e=null==this?void 0:this.data)?void 0:e.data)?void 0:e.data).leftTopPoint,o=e.width,a=o/2,i=(e=e.height)/2;this.rectangleAnchorPoints=[u({},n),{x:n.x+a,y:n.y},{x:n.x+o,y:n.y},{x:n.x+o,y:n.y+i},{x:n.x+o,y:n.y+e},{x:n.x+a,y:n.y+e},{x:n.x,y:n.y+e},{x:n.x,y:n.y+i}];for(var r=0;r<this.rectangleAnchorPoints.length;r++){var s=this.rectangleAnchorPoints[r];t.beginPath(),this.setAnchorCircleStyle(),t.ellipse(s.x,s.y,this.anchorRadius,this.anchorRadius,45*Math.PI/180,0,2*Math.PI),t.closePath(),t.stroke(),t.fill()}t.beginPath(),this.setAnchorLineStyle(),t.moveTo(n.x,n.y),t.lineTo(n.x+o,n.y),t.lineTo(n.x+o,n.y+e),t.lineTo(n.x,n.y+e),t.lineTo(n.x,n.y),t.closePath(),t.stroke()}}},e.prototype.getPointInAnchor=function(t){if(!this.data)return null;for(var e=null,n=-1,o=0;o<this.rectangleAnchorPoints.length;o++){var i=this.rectangleAnchorPoints[o],r=this.anchorRadius+this.anchorLineWidth;if(a.Z.isPointInCircle(t,{center:i,radius:r})){e=i,n=o;break}}return e&&-1!==n?{point:e,index:n}:null},e.prototype.setResizeCursorByIndex=function(t){var e,n;this.context&&(e=this.context.getCanvasEl(),n=this.context.getAssistCanvasEl(),e)&&n&&(e.style.cursor=n.style.cursor=this.ResizeCursorMapping.get(t))},e.prototype.drawModify=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();n&&o&&this.data&&this.startPoint&&(o=n.getHistoryDataById(this.data.data.id))&&(e=this.indexToModifyHandlerMapping.get(this.startIndex))&&e.call(this,t)&&(this.data.data=o,n.clearDraw(),n.drawHistoryData(),this.drawAnchors())},e.prototype.drawMove=function(t,e){var n,o=this.context,a=null==o?void 0:o.getCtx();o&&a&&this.data&&(a=o.getHistoryDataById(this.data.data.id))&&(n=e.x-t.x,e=e.y-t.y,a.data.leftTopPoint.x+=n,a.data.leftTopPoint.y+=e,this.data.data=a,o.clearDraw(),o.drawHistoryData(),this.drawAnchors())},e.prototype.getSelectType=function(){return s.SelectType.Diamond},e.prototype.getBox=function(){var t,e=this.context,n=null==e?void 0:e.getCtx();return e&&n&&this.data&&(n=e.getHistoryDataById(this.data.data.id))?(n=(e=n.data).leftTopPoint,t=e.width,e=e.height,{leftTop:u({},n),rightTop:{x:n.x+t,y:n.y},rightBottom:{x:n.x+t,y:n.y+e},leftBottom:{x:n.x,y:n.y+e}}):null},e.prototype.modifyDataByLeftTop=function(t){var e=this.context,n=null==e?void 0:e.getCtx();return!(!(e&&n&&this.data&&this.startPoint)||!(n=e.getHistoryDataById(this.data.data.id))||!(e=this.getBox())||t.x>e.rightTop.x||t.y>e.rightBottom.y||(n.data.leftTopPoint=t,n.data.width=e.rightTop.x-t.x,n.data.height=e.rightBottom.y-t.y,0))},e.prototype.modifyDataByCenterTop=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();return!(!(n&&o&&this.data&&this.startPoint)||!(o=n.getHistoryDataById(this.data.data.id))||(n=o.data.width,!(e=this.getBox()))||t.y>e.leftBottom.y||(o.data.leftTopPoint={x:e.leftTop.x,y:t.y},o.data.width=n,o.data.height=e.rightBottom.y-t.y,0))},e.prototype.modifyDataByRightTop=function(t){var e=this.context,n=null==e?void 0:e.getCtx();return!(!(e&&n&&this.data&&this.startPoint)||!(n=e.getHistoryDataById(this.data.data.id))||!(e=this.getBox())||t.x<e.leftTop.x||t.y>e.leftBottom.y||(n.data.leftTopPoint={x:e.leftTop.x,y:t.y},n.data.width=t.x-e.leftTop.x,n.data.height=e.rightBottom.y-t.y,0))},e.prototype.modifyDataByRightCenter=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!(!(o&&a&&this.data&&this.startPoint)||!(a=o.getHistoryDataById(this.data.data.id))||(e=(o=a.data).leftTopPoint,o=o.height,!(n=this.getBox()))||t.x<n.leftTop.x||(a.data.leftTopPoint=u({},e),a.data.width=t.x-n.leftTop.x,a.data.height=o,0))},e.prototype.modifyDataByRightBottom=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();return!(!(n&&o&&this.data&&this.startPoint)||!(o=n.getHistoryDataById(this.data.data.id))||(n=o.data.leftTopPoint,!(e=this.getBox()))||t.x<e.leftTop.x||t.y<e.leftTop.y||(o.data.leftTopPoint=u({},n),o.data.width=t.x-e.leftTop.x,o.data.height=t.y-e.leftTop.y,0))},e.prototype.modifyDataByCenterBottom=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!(!(o&&a&&this.data&&this.startPoint)||!(a=o.getHistoryDataById(this.data.data.id))||(e=(o=a.data).leftTopPoint,o=o.width,!(n=this.getBox()))||t.y<n.leftTop.y||(a.data.leftTopPoint=u({},e),a.data.width=o,a.data.height=t.y-n.leftTop.y,0))},e.prototype.modifyDataByLeftBottom=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();return!(!(n&&o&&this.data&&this.startPoint)||!(o=n.getHistoryDataById(this.data.data.id))||(n=o.data.leftTopPoint,!(e=this.getBox()))||t.x>e.rightBottom.x||t.y<e.rightTop.y||(o.data.leftTopPoint={x:t.x,y:n.y},o.data.width=e.rightBottom.x-t.x,o.data.height=t.y-e.rightTop.y,0))},e.prototype.modifyDataByLeftCenter=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!(!(o&&a&&this.data&&this.startPoint)||!(a=o.getHistoryDataById(this.data.data.id))||(e=(o=a.data).leftTopPoint,o=o.height,!(n=this.getBox()))||t.x>n.rightBottom.x||(a.data.leftTopPoint={x:t.x,y:e.y},a.data.width=n.rightBottom.x-t.x,a.data.height=o,0))},e.prototype.isCanMove=function(t){var e,n,o,a,r,s;return!!this.data&&(e=(n=null==(n=null==(n=null==this?void 0:this.data)?void 0:n.data)?void 0:n.data).leftTopPoint,o=(s=n.width)/2,a=(n=n.height)/2,r=i.xmu([t.x,t.y]),s=i.yue([[[e.x,e.y+a],[e.x+o,e.y],[e.x+s,e.y+a],[e.x+o,e.y+n],[e.x,e.y+a]]]),i.FWy(r,s))&&!this.getPointInAnchor(t)},e.prototype.drawMoveGeometry=function(){this.context&&this.data&&r.Z.draw(this.context.getAssistCtx(),this.data)},e.prototype.drawMoveGeometry=function(t,e){var n,o;return this.context&&this.data&&t&&e?((n=JSON.parse(JSON.stringify(this.data.data))).data=u(u({},n.data),{leftTopPoint:u({},n.data.leftTopPoint)}),o=e.x-t.x,e=e.y-t.y,n.data&&n.data.leftTopPoint&&(n.data.leftTopPoint.x+=o,n.data.leftTopPoint.y+=e,o=u(u({},this.moveGemStyle),null!=(t=n.style)?t:{}),n.style.lineWidth=o.lineWidth,n.style.lineJoin=o.lineJoin,n.style.lineCap=o.lineCap,n.lineDash=o.lineDash,n.style.lineDashOffset=o.lineDashOffset,n.style.strokeStyle=o.strokeStyle,n.style.fillStyle=o.fillStyle,n.style.globalAlpha=null!=(e=o.globalAlpha)?e:1,r.Z.draw(this.context.getAssistCtx(),n)),n):null},e.prototype.destroy=function(){this.startIndex=-1,t.prototype.destroy.call(this)},e}(l.Z);e.Z=d},686281:function(t,e,n){var o,a=n(460467),i=n(441930),r=n(598252),s=n(393823),l=n(172276),c=n(507877),u=(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=function(){return(d=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},y=function(t){function e(e){var n=t.call(this)||this;return n.context=null,n.startPoint=null,n.startIndex=-1,n.data=null,n.status=c.ActionStatus.UnStart,n.EmitActions={CONTEXT:"CONTEXT"},n.anchorRadius=5,n.anchorLineWidth=2,n.moveStartPoint=null,n.canMove=!1,n.isMoved=!1,n.style=d({},l.Z),n.anchorStyle=d({},r.Z),n.moveGemStyle=d({},s.Z),n.data=e,n.onContext=n.onContext.bind(n),n.onCanvasMousedown=n.onCanvasMousedown.bind(n),n.onCanvasMousemove=n.onCanvasMousemove.bind(n),n.onCanvasMouseup=n.onCanvasMouseup.bind(n),n.onCanvasIsModifyMousemove=n.onCanvasIsModifyMousemove.bind(n),n.onMoveMousedown=n.onMoveMousedown.bind(n),n.onMoveMousemove=n.onMoveMousemove.bind(n),n.onMoveMouseup=n.onMoveMouseup.bind(n),n.on(n.EmitActions.CONTEXT,n.onContext),n}return u(e,t),e.prototype.getAnchorStyle=function(){return d({},this.anchorStyle)},e.prototype.getStyle=function(){return d({},this.style)},e.prototype.getMoveGemStyle=function(){return d({},this.moveGemStyle)},e.prototype.setAnchorStyle=function(t){this.anchorStyle=d(d({},r.Z),null!=t?t:{})},e.prototype.setStyle=function(t){this.style=d(d({},l.Z),null!=t?t:{})},e.prototype.setMoveGemStyle=function(t){this.moveGemStyle=d(d({},s.Z),null!=t?t:{})},e.prototype.setAnchorCircleStyle=function(){var t;this.context&&(t=this.context.getCtx())&&(t.strokeStyle=this.anchorStyle.strokeStyle,t.fillStyle=this.anchorStyle.fillStyle,t.lineWidth=this.anchorStyle.lineWidth,t.globalAlpha=this.anchorStyle.globalAlpha)},e.prototype.setAnchorLineStyle=function(){var t;this.context&&(t=this.context.getCtx())&&(t.strokeStyle=this.anchorStyle.strokeStyle,t.lineWidth=this.anchorStyle.lineWidth,t.setLineDash(this.anchorStyle.lineDash),t.lineDashOffset=this.anchorStyle.lineDashOffset)},e.prototype.onContext=function(){this.drawAnchors()},e.prototype.onCanvasMousedown=function(t){var e;this.context&&(e=this.context.getCanvasEl())&&this.context.getCtx()&&(t=a.Z.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),t=this.getPointInAnchor(t))&&(this.startPoint=t.point,this.startIndex=t.index,e.addEventListener("mousemove",this.onCanvasMousemove),e.addEventListener("mouseup",this.onCanvasMouseup))},e.prototype.onCanvasMousemove=function(t){var e;t.stopPropagation(),this.context&&(e=this.context.getCanvasEl())&&this.context.getCtx()&&this.startPoint&&(t=a.Z.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),this.drawModify(t),this.trigger(c.ActionEvents.Modifying,this.data))},e.prototype.onCanvasMouseup=function(t){this.end(t),t.stopPropagation()},e.prototype.onCanvasIsModifyMousemove=function(t){var e,n;this.context&&(e=this.context.getCanvasEl(),n=this.context.getAssistCanvasEl(),e)&&n&&(this.startPoint||this.moveStartPoint||(t=a.Z.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),(t=this.getPointInAnchor(t))?this.setResizeCursorByIndex(t.index):e.style.cursor=n.style.cursor="default"))},e.prototype.initMoveEvents=function(){var t,e=this.context;e&&(t=e.getCanvasEl(),e=e.getAssistCanvasEl(),t)&&e&&(t.addEventListener("mousedown",this.onMoveMousedown),t.addEventListener("mousemove",this.onMoveMousemove),e.addEventListener("mousemove",this.onMoveMousemove),e.addEventListener("mouseup",this.onMoveMouseup))},e.prototype.clearMoveEvents=function(){var t,e=this.context;e&&(t=e.getCanvasEl(),e=e.getAssistCanvasEl(),t)&&e&&(t.removeEventListener("mousedown",this.onMoveMousedown),t.removeEventListener("mousemove",this.onMoveMousemove),e.removeEventListener("mousemove",this.onMoveMousemove),e.removeEventListener("mouseup",this.onMoveMouseup))},e.prototype.onMoveMousedown=function(t){var e,n,o;t&&(e=this.context)&&(n=e.getCanvasEl(),o=e.getAssistCanvasEl(),n)&&o&&this.canMove&&(e.setFrontCanvas(o),this.moveStartPoint=a.Z.clientToCtxPoint({event:t,rect:n.getBoundingClientRect()}),this.drawMoveGeometry())},e.prototype.onMoveMousemove=function(t){var e,n,o;t&&(o=this.context)&&(e=o.getCanvasEl(),n=o.getAssistCanvasEl(),e)&&n&&(t=a.Z.clientToCtxPoint({event:t,rect:e.getBoundingClientRect()}),this.moveStartPoint?(this.isMoved=!0,o.clearAssistDraw(),o=this.drawMoveGeometry(this.moveStartPoint,t),this.trigger(c.ActionEvents.Moving,{selectType:this.getSelectType(),actionType:c.ActionType.Move,data:o})):(this.canMove=this.isCanMove(t),o=n.style.cursor,e.style.cursor=n.style.cursor=this.canMove?"move":o))},e.prototype.onMoveMouseup=function(t){var e,n,o;t&&(e=this.context)&&(o=e.getCanvasEl(),n=e.getAssistCanvasEl(),o)&&n&&(this.canMove&&this.isMoved&&this.moveStartPoint?(e.setBackCanvas(n),o=a.Z.clientToCtxPoint({event:t,rect:o.getBoundingClientRect()}),e.clearAssistDraw(),this.drawMove(this.moveStartPoint,o),this.canMove=!1,this.isMoved=!1,this.moveStartPoint=null,t.stopPropagation(),this.trigger(c.ActionEvents.MoveEnd,this.data)):(e.setBackCanvas(n),this.canMove=!1,this.isMoved=!1,this.moveStartPoint=null))},e.prototype.start=function(){var t,e,n;this.context&&![c.ActionStatus.Running,c.ActionStatus.Destroy].includes(this.status)&&(e=null==(e=null==(t=this.context)?void 0:t.getCanvasEl)?void 0:e.call(t),n=null==(n=null==t?void 0:t.getAssistCanvasEl)?void 0:n.call(t),e)&&n&&(e.style.cursor=n.style.cursor="default",this.trigger(c.ActionEvents.ModifyBeforeStart,{selectType:this.getSelectType(),actionType:c.ActionType.Modify}),e.addEventListener("mousedown",this.onCanvasMousedown),e.addEventListener("mousemove",this.onCanvasIsModifyMousemove),this.initMoveEvents(),this.status=c.ActionStatus.Running,this.trigger(c.ActionEvents.ModifyStart,{selectType:this.getSelectType(),actionType:c.ActionType.Modify}))},e.prototype.end=function(t){var e,n;t&&(n=this.context)&&(e=n.getCanvasEl(),n=n.getAssistCanvasEl(),e)&&n&&(e.style.cursor=n.style.cursor="default",e.removeEventListener("mousedown",this.onCanvasMousedown),e.removeEventListener("mousemove",this.onCanvasMousemove),e.removeEventListener("mouseup",this.onCanvasMouseup),e.removeEventListener("mousemove",this.onCanvasIsModifyMousemove),this.clearMoveEvents(),t=a.Z.clientToCtxPoint({event:t,rect:null==e?void 0:e.getBoundingClientRect()}),this.drawModify(t),this.status=c.ActionStatus.End,this.startPoint=null,this.trigger(c.ActionEvents.ModifyEnd,this.data),e.style.cursor=n.style.cursor="default")},e.prototype.destroy=function(){var t,e,n=this.context;n&&(t=n.getCanvasEl(),e=n.getAssistCanvasEl(),t)&&e&&(t.style.cursor=e.style.cursor="default",this.remove(this.EmitActions.CONTEXT,this.onContext),t.removeEventListener("mousedown",this.onCanvasMousedown),t.removeEventListener("mousemove",this.onCanvasMousemove),t.removeEventListener("mouseup",this.onCanvasMouseup),t.removeEventListener("mousemove",this.onCanvasIsModifyMousemove),this.clearMoveEvents(),n.clearDraw(),n.drawHistoryData(),this.status=c.ActionStatus.Destroy,this.startPoint=null,this.trigger(c.ActionEvents.Destroy,{selectType:this.getSelectType(),actionType:c.ActionType.Modify}),t.style.cursor=e.style.cursor="default")},e.prototype.setContext=function(t){this.context=t,this.trigger(this.EmitActions.CONTEXT)},e.prototype.getStatus=function(){return this.status},e}(i.Z.Events);e.Z=y},567521:function(t,e,n){var o,a=n(460467),i=n(419174),r=n(816235),s=n(507877),l=n(686281),c=(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(){return(u=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},d=function(t,e,n){if(n||2===arguments.length)for(var o,a=0,i=e.length;a<i;a++)!o&&a in e||((o=o||Array.prototype.slice.call(e,0,a))[a]=e[a]);return t.concat(o||Array.prototype.slice.call(e))},y=function(t){function e(e){return(e=t.call(this,e)||this).startIndex=-1,e}return c(e,t),e.prototype.drawAnchors=function(){var t;if(this.context){var e=this.context.getCtx();if(e)for(var n=(null==(t=null==(t=null==this?void 0:this.data)?void 0:t.data)?void 0:t.data)||[],o=0;o<n.length;o++){var a=n[o];e.beginPath(),this.setAnchorCircleStyle(),e.ellipse(a.x,a.y,this.anchorRadius,this.anchorRadius,45*Math.PI/180,0,2*Math.PI),e.closePath(),e.stroke(),e.fill()}}},e.prototype.getPointInAnchor=function(t){if(!this.data)return null;for(var e=null,n=-1,o=this.data.data.data,i=0;i<o.length;i++){var r=o[i],s=this.anchorRadius+this.anchorLineWidth;if(a.Z.isPointInCircle(t,{center:r,radius:s})){e=r,n=i;break}}return e&&-1!==n?{point:e,index:n}:null},e.prototype.setResizeCursorByIndex=function(t){var e,n;this.context&&(e=this.context.getCanvasEl(),n=this.context.getAssistCanvasEl(),e)&&n&&(e.style.cursor=n.style.cursor="nesw-resize")},e.prototype.drawModify=function(t){var e=this.context,n=null==e?void 0:e.getCtx();e&&n&&this.data&&this.startPoint&&-1!==this.startIndex&&(n=e.getHistoryDataById(this.data.data.id))&&(n.data[this.startIndex]=t,this.data.data=n,e.clearDraw(),e.drawHistoryData(),this.drawAnchors())},e.prototype.drawMove=function(t,e){var n,o,a=this.context,i=null==a?void 0:a.getCtx();a&&i&&this.data&&(i=a.getHistoryDataById(this.data.data.id))&&(n=e.x-t.x,o=e.y-t.y,i.data.forEach((function(t){t.x+=n,t.y+=o})),this.data.data=i,a.clearDraw(),a.drawHistoryData(),this.drawAnchors())},e.prototype.getSelectType=function(){return s.SelectType.Polygon},e.prototype.isCanMove=function(t){var e,n;return!!this.data&&((n=d([],null==(n=null==(n=null==this?void 0:this.data)?void 0:n.data)?void 0:n.data,!0)).push(n[0]),e=i.xmu([t.x,t.y]),n=i.yue([n.map((function(t){return[t.x,t.y]}))]),i.FWy(e,n))&&!this.getPointInAnchor(t)},e.prototype.drawMoveGeometry=function(){this.context&&this.data&&r.Z.draw(this.context.getAssistCtx(),this.data)},e.prototype.drawMoveGeometry=function(t,e){var n,o,a;return this.context&&this.data&&t&&e?((n=JSON.parse(JSON.stringify(this.data.data))).data=n.data.map((function(t){return u({},t)})),o=e.x-t.x,a=e.y-t.y,n.data&&n.data.length&&(n.data.forEach((function(t){t.x+=o,t.y+=a})),t=u(u({},this.moveGemStyle),null!=(e=n.style)?e:{}),n.style.lineWidth=t.lineWidth,n.style.lineJoin=t.lineJoin,n.style.lineCap=t.lineCap,n.lineDash=t.lineDash,n.style.lineDashOffset=t.lineDashOffset,n.style.strokeStyle=t.strokeStyle,n.style.fillStyle=t.fillStyle,n.style.globalAlpha=null!=(e=t.globalAlpha)?e:1,r.Z.draw(this.context.getAssistCtx(),n)),n):null},e}(l.Z);e.Z=y},847267:function(t,e,n){var o,a=n(460467),i=n(419174),r=n(389418),s=n(507877),l=n(686281),c=(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(){return(u=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},d=function(t){function e(e){return(e=t.call(this,e)||this).rectangleAnchorPoints=[],e.indexToModifyHandlerMapping=new Map([[0,e.modifyDataByLeftTop],[1,e.modifyDataByCenterTop],[2,e.modifyDataByRightTop],[3,e.modifyDataByRightCenter],[4,e.modifyDataByRightBottom],[5,e.modifyDataByCenterBottom],[6,e.modifyDataByLeftBottom],[7,e.modifyDataByLeftCenter]]),e.ResizeCursorMapping=new Map([[0,"nwse-resize"],[1,"ns-resize"],[2,"nesw-resize"],[3,"ew-resize"],[4,"nwse-resize"],[5,"ns-resize"],[6,"nesw-resize"],[7,"ew-resize"]]),e}return c(e,t),e.prototype.drawAnchors=function(){if(this.context){var t=this.context.getCtx();if(t){var e,n=(e=null==(e=null==(e=null==this?void 0:this.data)?void 0:e.data)?void 0:e.data).leftTopPoint,o=e.width,a=o/2,i=(e=e.height)/2;this.rectangleAnchorPoints=[u({},n),{x:n.x+a,y:n.y},{x:n.x+o,y:n.y},{x:n.x+o,y:n.y+i},{x:n.x+o,y:n.y+e},{x:n.x+a,y:n.y+e},{x:n.x,y:n.y+e},{x:n.x,y:n.y+i}];for(var r=0;r<this.rectangleAnchorPoints.length;r++){var s=this.rectangleAnchorPoints[r];t.beginPath(),this.setAnchorCircleStyle(),t.ellipse(s.x,s.y,this.anchorRadius,this.anchorRadius,45*Math.PI/180,0,2*Math.PI),t.closePath(),t.stroke(),t.fill()}}}},e.prototype.getPointInAnchor=function(t){if(!this.data)return null;for(var e=null,n=-1,o=0;o<this.rectangleAnchorPoints.length;o++){var i=this.rectangleAnchorPoints[o],r=this.anchorRadius+this.anchorLineWidth;if(a.Z.isPointInCircle(t,{center:i,radius:r})){e=i,n=o;break}}return e&&-1!==n?{point:e,index:n}:null},e.prototype.setResizeCursorByIndex=function(t){var e,n;this.context&&(e=this.context.getCanvasEl(),n=this.context.getAssistCanvasEl(),e)&&n&&(e.style.cursor=n.style.cursor=this.ResizeCursorMapping.get(t))},e.prototype.drawModify=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();n&&o&&this.data&&this.startPoint&&(o=n.getHistoryDataById(this.data.data.id))&&(e=this.indexToModifyHandlerMapping.get(this.startIndex))&&e.call(this,t)&&(this.data.data=o,n.clearDraw(),n.drawHistoryData(),this.drawAnchors())},e.prototype.drawMove=function(t,e){var n,o=this.context,a=null==o?void 0:o.getCtx();o&&a&&this.data&&(a=o.getHistoryDataById(this.data.data.id))&&(n=e.x-t.x,e=e.y-t.y,a.data.leftTopPoint.x+=n,a.data.leftTopPoint.y+=e,this.data.data=a,o.clearDraw(),o.drawHistoryData(),this.drawAnchors())},e.prototype.getSelectType=function(){return s.SelectType.Rectangle},e.prototype.getBox=function(){var t,e=this.context,n=null==e?void 0:e.getCtx();return e&&n&&this.data&&(n=e.getHistoryDataById(this.data.data.id))?(n=(e=n.data).leftTopPoint,t=e.width,e=e.height,{leftTop:u({},n),rightTop:{x:n.x+t,y:n.y},rightBottom:{x:n.x+t,y:n.y+e},leftBottom:{x:n.x,y:n.y+e}}):null},e.prototype.modifyDataByLeftTop=function(t){var e=this.context,n=null==e?void 0:e.getCtx();return!(!(e&&n&&this.data&&this.startPoint)||!(n=e.getHistoryDataById(this.data.data.id))||!(e=this.getBox())||t.x>e.rightTop.x||t.y>e.rightBottom.y||(n.data.leftTopPoint=t,n.data.width=e.rightTop.x-t.x,n.data.height=e.rightBottom.y-t.y,0))},e.prototype.modifyDataByCenterTop=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();return!(!(n&&o&&this.data&&this.startPoint)||!(o=n.getHistoryDataById(this.data.data.id))||(n=o.data.width,!(e=this.getBox()))||t.y>e.leftBottom.y||(o.data.leftTopPoint={x:e.leftTop.x,y:t.y},o.data.width=n,o.data.height=e.rightBottom.y-t.y,0))},e.prototype.modifyDataByRightTop=function(t){var e=this.context,n=null==e?void 0:e.getCtx();return!(!(e&&n&&this.data&&this.startPoint)||!(n=e.getHistoryDataById(this.data.data.id))||!(e=this.getBox())||t.x<e.leftTop.x||t.y>e.leftBottom.y||(n.data.leftTopPoint={x:e.leftTop.x,y:t.y},n.data.width=t.x-e.leftTop.x,n.data.height=e.rightBottom.y-t.y,0))},e.prototype.modifyDataByRightCenter=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!(!(o&&a&&this.data&&this.startPoint)||!(a=o.getHistoryDataById(this.data.data.id))||(e=(o=a.data).leftTopPoint,o=o.height,!(n=this.getBox()))||t.x<n.leftTop.x||(a.data.leftTopPoint=u({},e),a.data.width=t.x-n.leftTop.x,a.data.height=o,0))},e.prototype.modifyDataByRightBottom=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();return!(!(n&&o&&this.data&&this.startPoint)||!(o=n.getHistoryDataById(this.data.data.id))||(n=o.data.leftTopPoint,!(e=this.getBox()))||t.x<e.leftTop.x||t.y<e.leftTop.y||(o.data.leftTopPoint=u({},n),o.data.width=t.x-e.leftTop.x,o.data.height=t.y-e.leftTop.y,0))},e.prototype.modifyDataByCenterBottom=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!(!(o&&a&&this.data&&this.startPoint)||!(a=o.getHistoryDataById(this.data.data.id))||(e=(o=a.data).leftTopPoint,o=o.width,!(n=this.getBox()))||t.y<n.leftTop.y||(a.data.leftTopPoint=u({},e),a.data.width=o,a.data.height=t.y-n.leftTop.y,0))},e.prototype.modifyDataByLeftBottom=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();return!(!(n&&o&&this.data&&this.startPoint)||!(o=n.getHistoryDataById(this.data.data.id))||(n=o.data.leftTopPoint,!(e=this.getBox()))||t.x>e.rightBottom.x||t.y<e.rightTop.y||(o.data.leftTopPoint={x:t.x,y:n.y},o.data.width=e.rightBottom.x-t.x,o.data.height=t.y-e.rightTop.y,0))},e.prototype.modifyDataByLeftCenter=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!(!(o&&a&&this.data&&this.startPoint)||!(a=o.getHistoryDataById(this.data.data.id))||(e=(o=a.data).leftTopPoint,o=o.height,!(n=this.getBox()))||t.x>n.rightBottom.x||(a.data.leftTopPoint={x:t.x,y:e.y},a.data.width=n.rightBottom.x-t.x,a.data.height=o,0))},e.prototype.isCanMove=function(t){var e,n,o,a;return!!this.data&&(e=(n=null==(n=null==(n=null==this?void 0:this.data)?void 0:n.data)?void 0:n.data).leftTopPoint,a=n.width,n=n.height,o=i.xmu([t.x,t.y]),a=i.yue([[[e.x,e.y],[e.x+a,e.y],[e.x+a,e.y+n],[e.x,e.y+n],[e.x,e.y]]]),i.FWy(o,a))&&!this.getPointInAnchor(t)},e.prototype.drawMoveGeometry=function(){this.context&&this.data&&r.Z.draw(this.context.getAssistCtx(),this.data)},e.prototype.drawMoveGeometry=function(t,e){var n,o;return this.context&&this.data&&t&&e?((n=JSON.parse(JSON.stringify(this.data.data))).data=u(u({},n.data),{leftTopPoint:u({},n.data.leftTopPoint)}),o=e.x-t.x,e=e.y-t.y,n.data&&n.data.leftTopPoint&&(n.data.leftTopPoint.x+=o,n.data.leftTopPoint.y+=e,o=u(u({},this.moveGemStyle),null!=(t=n.style)?t:{}),n.style.lineWidth=o.lineWidth,n.style.lineJoin=o.lineJoin,n.style.lineCap=o.lineCap,n.lineDash=o.lineDash,n.style.lineDashOffset=o.lineDashOffset,n.style.strokeStyle=o.strokeStyle,n.style.fillStyle=o.fillStyle,n.style.globalAlpha=null!=(e=o.globalAlpha)?e:1,r.Z.draw(this.context.getAssistCtx(),n)),n):null},e.prototype.destroy=function(){this.startIndex=-1,t.prototype.destroy.call(this)},e}(l.Z);e.Z=d},554438:function(t,e,n){var o,a=n(460467),i=n(419174),r=n(288882),s=n(507877),l=n(686281),c=(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(){return(u=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},d=function(t){function e(e){return(e=t.call(this,e)||this).ResizeCursorMapping=new Map([[0,"ns-resize"],[1,"ew-resize"],[2,"ns-resize"],[3,"ew-resize"]]),e}return c(e,t),e.prototype.drawAnchors=function(){if(this.context){var t=this.context.getCtx();if(t){for(var e=(n=null==(n=null==(n=null==this?void 0:this.data)?void 0:n.data)?void 0:n.data).center,n=n.outRadius,o=[{x:e.x,y:e.y-n},{x:e.x+n,y:e.y},{x:e.x,y:e.y+n},{x:e.x-n,y:e.y}],a=0;a<o.length;a++){var i=o[a];t.beginPath(),this.setAnchorCircleStyle(),t.ellipse(i.x,i.y,this.anchorRadius,this.anchorRadius,45*Math.PI/180,0,2*Math.PI),t.closePath(),t.stroke(),t.fill()}t.beginPath(),this.setAnchorLineStyle(),t.ellipse(e.x,e.y,n,n,45*Math.PI/180,0,2*Math.PI),t.closePath(),t.stroke()}}},e.prototype.getPointInAnchor=function(t){if(!this.data)return null;for(var e=null,n=-1,o=(i=null==(i=null==(i=null==this?void 0:this.data)?void 0:i.data)?void 0:i.data).center,i=i.outRadius,r=[{x:o.x,y:o.y-i},{x:o.x+i,y:o.y},{x:o.x,y:o.y+i},{x:o.x-i,y:o.y}],s=0;s<r.length;s++){var l=r[s],c=this.anchorRadius+this.anchorLineWidth;if(a.Z.isPointInCircle(t,{center:l,radius:c})){e=l,n=s;break}}return e&&-1!==n?{point:e,index:n}:null},e.prototype.setResizeCursorByIndex=function(t){var e,n;this.context&&(e=this.context.getCanvasEl(),n=this.context.getAssistCanvasEl(),e)&&n&&(t=this.ResizeCursorMapping.get(t),e.style.cursor=n.style.cursor=t)},e.prototype.drawModify=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();n&&o&&this.data&&this.startPoint&&(o=n.getHistoryDataById(this.data.data.id))&&(e=o.data.center,o.data.outRadius=a.Z.getDistanceByBetweenPoint({p1:e,p2:t}),o.data.innerRadius=o.data.outRadius/2,this.data.data=o,n.clearDraw(),n.drawHistoryData(),this.drawAnchors())},e.prototype.drawMove=function(t,e){var n,o=this.context,a=null==o?void 0:o.getCtx();o&&a&&this.data&&(a=o.getHistoryDataById(this.data.data.id))&&(n=e.x-t.x,e=e.y-t.y,a.data.center.x+=n,a.data.center.y+=e,this.data.data=a,o.clearDraw(),o.drawHistoryData(),this.drawAnchors())},e.prototype.getSelectType=function(){return s.SelectType.Start},e.prototype.isCanMove=function(t){if(!this.data)return!1;for(var e=(a=null==(a=null==(a=null==this?void 0:this.data)?void 0:a.data)?void 0:a.data).center,n=a.outRadius,o=a.innerRadius,a=i.xmu([t.x,t.y]),r=[],s=0;s<5;s++)r.push({x:Math.cos((18+72*s)/180*Math.PI)*n+e.x,y:-Math.sin((18+72*s)/180*Math.PI)*n+e.y}),r.push({x:Math.cos((54+72*s)/180*Math.PI)*o+e.x,y:-Math.sin((54+72*s)/180*Math.PI)*o+e.y});var l=r.map((function(t){return[t.x,t.y]}));l.push(l[0]),l=i.yue([l]);return i.FWy(a,l)&&!this.getPointInAnchor(t)},e.prototype.drawMoveGeometry=function(){this.context&&this.data&&r.Z.draw(this.context.getAssistCtx(),this.data)},e.prototype.drawMoveGeometry=function(t,e){var n,o;return console.trace("drawMoveGeometry"),this.context&&this.data&&t&&e?((n=JSON.parse(JSON.stringify(this.data.data))).data=u(u({},n.data),{center:u({},n.data.center)}),o=e.x-t.x,e=e.y-t.y,n.data&&n.data.center&&(n.data.center.x+=o,n.data.center.y+=e,o=u(u({},this.moveGemStyle),null!=(t=n.style)?t:{}),n.style.lineWidth=o.lineWidth,n.style.lineJoin=o.lineJoin,n.style.lineCap=o.lineCap,n.lineDash=o.lineDash,n.style.lineDashOffset=o.lineDashOffset,n.style.strokeStyle=o.strokeStyle,n.style.fillStyle=o.fillStyle,n.style.globalAlpha=null!=(e=o.globalAlpha)?e:1,r.Z.draw(this.context.getAssistCtx(),n)),n):null},e}(l.Z);e.Z=d},423746:function(t,e,n){var o,a=n(460467),i=n(419174),r=n(929932),s=n(507877),l=n(686281),c=(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(){return(u=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},d=function(t,e,n){if(n||2===arguments.length)for(var o,a=0,i=e.length;a<i;a++)!o&&a in e||((o=o||Array.prototype.slice.call(e,0,a))[a]=e[a]);return t.concat(o||Array.prototype.slice.call(e))},y=function(t){function e(e){return(e=t.call(this,e)||this).rectangleAnchorPoints=[],e.indexToModifyHandlerMapping=new Map([[0,e.modifyDataByLeftTop],[1,e.modifyDataByCenterTop],[2,e.modifyDataByRightTop],[3,e.modifyDataByRightCenter],[4,e.modifyDataByRightBottom],[5,e.modifyDataByCenterBottom],[6,e.modifyDataByLeftBottom],[7,e.modifyDataByLeftCenter]]),e.ResizeCursorMapping=new Map([[0,"nwse-resize"],[1,"ns-resize"],[2,"nesw-resize"],[3,"ew-resize"],[4,"nwse-resize"],[5,"ns-resize"],[6,"nesw-resize"],[7,"ew-resize"]]),e}return c(e,t),e.prototype.drawAnchors=function(){if(this.context){var t=this.context.getCtx();if(t)if((e=(null==(e=null==(e=null==this?void 0:this.data)?void 0:e.data)?void 0:e.data).points)&&e.length){var e,n={x:e[0].x,y:e[1].y},o=e[2].x-e[0].x,a=o/2,i=(e=e[2].y-e[1].y)/2;this.rectangleAnchorPoints=[u({},n),{x:n.x+a,y:n.y},{x:n.x+o,y:n.y},{x:n.x+o,y:n.y+i},{x:n.x+o,y:n.y+e},{x:n.x+a,y:n.y+e},{x:n.x,y:n.y+e},{x:n.x,y:n.y+i}];for(var r=0;r<this.rectangleAnchorPoints.length;r++){var s=this.rectangleAnchorPoints[r];t.beginPath(),this.setAnchorCircleStyle(),t.ellipse(s.x,s.y,this.anchorRadius,this.anchorRadius,45*Math.PI/180,0,2*Math.PI),t.closePath(),t.stroke(),t.fill()}t.beginPath(),this.setAnchorLineStyle(),t.moveTo(n.x,n.y),t.lineTo(n.x+o,n.y),t.lineTo(n.x+o,n.y+e),t.lineTo(n.x,n.y+e),t.lineTo(n.x,n.y),t.closePath(),t.stroke()}}},e.prototype.getPointInAnchor=function(t){if(!this.data)return null;for(var e=null,n=-1,o=0;o<this.rectangleAnchorPoints.length;o++){var i=this.rectangleAnchorPoints[o],r=this.anchorRadius+this.anchorLineWidth;if(a.Z.isPointInCircle(t,{center:i,radius:r})){e=i,n=o;break}}return e&&-1!==n?{point:e,index:n}:null},e.prototype.setResizeCursorByIndex=function(t){var e,n;this.context&&(e=this.context.getCanvasEl(),n=this.context.getAssistCanvasEl(),e)&&n&&(e.style.cursor=n.style.cursor=this.ResizeCursorMapping.get(t))},e.prototype.drawModify=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();n&&o&&this.data&&this.startPoint&&(o=n.getHistoryDataById(this.data.data.id))&&(e=this.indexToModifyHandlerMapping.get(this.startIndex))&&e.call(this,t)&&(this.data.data=o,n.clearDraw(),n.drawHistoryData(),this.drawAnchors())},e.prototype.drawMove=function(t,e){var n,o,a=this.context,i=null==a?void 0:a.getCtx();a&&i&&this.data&&(i=a.getHistoryDataById(this.data.data.id))&&(n=e.x-t.x,o=e.y-t.y,i.data.points.forEach((function(t){t.x+=n,t.y+=o})),this.data.data=i,a.clearDraw(),a.drawHistoryData(),this.drawAnchors())},e.prototype.getSelectType=function(){return s.SelectType.Triangle},e.prototype.getBox=function(){var t,e,n=this.context;return n&&this.data&&(n=n.getHistoryDataById(this.data.data.id))&&(n=n.data.points)&&n.length?(t={x:n[0].x,y:n[1].y},e=n[2].x-n[0].x,n=n[2].y-n[1].y,{leftTop:u({},t),rightTop:{x:t.x+e,y:t.y},rightBottom:{x:t.x+e,y:t.y+n},leftBottom:{x:t.x,y:t.y+n}}):null},e.prototype.modifyDataByLeftTop=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();return!!(n&&o&&this.data&&this.startPoint)&&!!(o=n.getHistoryDataById(this.data.data.id))&&!(!(n=o.data.points)||!n.length||!(n=this.getBox())||t.x>n.rightTop.x||t.y>n.rightBottom.y||(e=n.rightTop.x-t.x,n=n.rightBottom.y-t.y,o.data.points=[{x:t.x,y:t.y+n},{x:t.x+e/2,y:t.y},{x:t.x+e,y:t.y+n}],0))},e.prototype.modifyDataByCenterTop=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!!(o&&a&&this.data&&this.startPoint)&&!!(a=o.getHistoryDataById(this.data.data.id))&&!(!(o=a.data.points)||!o.length||!(o=this.getBox())||t.y>o.leftBottom.y||(e={x:o.leftTop.x,y:t.y},n=o.rightTop.x-o.leftTop.x,o=o.rightBottom.y-t.y,a.data.points=[{x:e.x,y:e.y+o},{x:e.x+n/2,y:e.y},{x:e.x+n,y:e.y+o}],0))},e.prototype.modifyDataByRightTop=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!!(o&&a&&this.data&&this.startPoint)&&!!(a=o.getHistoryDataById(this.data.data.id))&&!(!(o=a.data.points)||!o.length||!(o=this.getBox())||t.x<o.leftTop.x||t.y>o.leftBottom.y||(e={x:o.leftTop.x,y:t.y},n=t.x-o.leftTop.x,o=o.rightBottom.y-t.y,a.data.points=[{x:e.x,y:e.y+o},{x:e.x+n/2,y:e.y},{x:e.x+n,y:e.y+o}],0))},e.prototype.modifyDataByRightCenter=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();return!!(n&&o&&this.data&&this.startPoint)&&!!(o=n.getHistoryDataById(this.data.data.id))&&!(!(n=o.data.points)||!n.length||!(n=this.getBox())||t.x<n.leftTop.x||(e={x:n.leftTop.x,y:n.leftTop.y},t=t.x-n.leftTop.x,n=n.rightBottom.y-n.rightTop.y,o.data.points=[{x:e.x,y:e.y+n},{x:e.x+t/2,y:e.y},{x:e.x+t,y:e.y+n}],0))},e.prototype.modifyDataByRightBottom=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!!(o&&a&&this.data&&this.startPoint)&&!!(a=o.getHistoryDataById(this.data.data.id))&&!(!(o=a.data.points)||!o.length||!(o=this.getBox())||t.x<o.leftTop.x||t.y<o.leftTop.y||(e=u({},o.leftTop),n=t.x-o.leftTop.x,t=t.y-o.leftTop.y,a.data.points=[{x:e.x,y:e.y+t},{x:e.x+n/2,y:e.y},{x:e.x+n,y:e.y+t}],0))},e.prototype.modifyDataByCenterBottom=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!!(o&&a&&this.data&&this.startPoint)&&!!(a=o.getHistoryDataById(this.data.data.id))&&!(!(o=a.data.points)||!o.length||!(o=this.getBox())||t.y<o.leftTop.y||(e=u({},o.leftTop),n=o.rightTop.x-o.leftTop.x,t=t.y-o.leftTop.y,a.data.points=[{x:e.x,y:e.y+t},{x:e.x+n/2,y:e.y},{x:e.x+n,y:e.y+t}],0))},e.prototype.modifyDataByLeftBottom=function(t){var e,n,o=this.context,a=null==o?void 0:o.getCtx();return!!(o&&a&&this.data&&this.startPoint)&&!!(a=o.getHistoryDataById(this.data.data.id))&&!(!(o=a.data.points)||!o.length||!(o=this.getBox())||t.x>o.rightBottom.x||t.y<o.rightTop.y||(e={x:t.x,y:o.leftTop.y},n=o.rightBottom.x-t.x,t=t.y-o.rightTop.y,a.data.points=[{x:e.x,y:e.y+t},{x:e.x+n/2,y:e.y},{x:e.x+n,y:e.y+t}],0))},e.prototype.modifyDataByLeftCenter=function(t){var e,n=this.context,o=null==n?void 0:n.getCtx();return!!(n&&o&&this.data&&this.startPoint)&&!!(o=n.getHistoryDataById(this.data.data.id))&&!(!(n=o.data.points)||!n.length||!(n=this.getBox())||t.x>n.rightBottom.x||(e={x:t.x,y:n.leftTop.y},t=n.rightBottom.x-t.x,n=n.rightBottom.y-n.rightTop.y,o.data.points=[{x:e.x,y:e.y+n},{x:e.x+t/2,y:e.y},{x:e.x+t,y:e.y+n}],0))},e.prototype.isCanMove=function(t){var e,n;return!!this.data&&((n=d([],(null==(n=null==(n=null==(n=null==this?void 0:this.data)?void 0:n.data)?void 0:n.data)?void 0:n.points)||[],!0)).push(n[0]),e=i.xmu([t.x,t.y]),n=i.yue([n.map((function(t){return[t.x,t.y]}))]),i.FWy(e,n))&&!this.getPointInAnchor(t)},e.prototype.drawMoveGeometry=function(){this.context&&this.data&&r.Z.draw(this.context.getAssistCtx(),this.data)},e.prototype.drawMoveGeometry=function(t,e){var n,o,a;return this.context&&this.data&&t&&e?((n=JSON.parse(JSON.stringify(this.data.data))).data=u(u({},n.data),{points:n.data.points.map((function(t){return u({},t)}))}),o=e.x-t.x,a=e.y-t.y,n.data&&n.data.points&&n.data.points.length&&(n.data.points.forEach((function(t){t.x+=o,t.y+=a})),t=u(u({},this.moveGemStyle),null!=(e=n.style)?e:{}),n.style.lineWidth=t.lineWidth,n.style.lineJoin=t.lineJoin,n.style.lineCap=t.lineCap,n.lineDash=t.lineDash,n.style.lineDashOffset=t.lineDashOffset,n.style.strokeStyle=t.strokeStyle,n.style.fillStyle=t.fillStyle,n.style.globalAlpha=null!=(e=t.globalAlpha)?e:1,r.Z.draw(this.context.getAssistCtx(),n)),n):null},e.prototype.destroy=function(){this.startIndex=-1,t.prototype.destroy.call(this)},e}(l.Z);e.Z=y},507877:function(t,e,n){var o,a,i,r,s,l;n.r(e),n.d(e,{ActionEvents:function(){return a},ActionStatus:function(){return o},ActionType:function(){return s},PolygonSelectionActions:function(){return i},SelectType:function(){return r}}),(l=o=o||{})[l.UnStart=0]="UnStart",l[l.Running=1]="Running",l[l.End=2]="End",l[l.Destroy=3]="Destroy",function(t){t.DrawBeforeStart="DrawBeforeStart",t.DrawStart="DrawStart",t.Drawing="Drawing",t.DrawEnd="DrawEnd",t.MoveBeforeStart="MoveBeforeStart",t.MoveStart="MoveStart",t.Moving="Moving",t.MoveEnd="MoveEnd",t.ModifyBeforeStart="ModifyBeforeStart",t.ModifyStart="ModifyStart",t.Modifying="Modifying",t.ModifyEnd="ModifyEnd",t.Destroy="Destroy"}(a=a||{}),function(t){t.CanvasMount="CanvasMount",t.CanvasClickEmpty="CanvasClickEmpty",t.CanvasClickGeometry="CanvasClickGeometry"}(i=i||{}),function(t){t.Polygon="Polygon",t.Circle="Circle",t.Rectangle="Rectangle",t.Triangle="Triangle",t.Diamond="Diamond",t.Start="Start",t.Free="Free"}(r=r||{}),function(t){t.Draw="Draw",t.Modify="Modify",t.Move="Move"}(s=s||{})},947424:function(t,e){e.Z={getRectLeftTopPoint:function(t){var e=t.startPoint;return(t=t.targetPoint).x<=e.x&&t.y<=e.y?t:t.x<=e.x&&t.y>=e.y?{x:t.x,y:e.y}:t.x>=e.x&&t.y<=e.y?{x:e.x,y:t.y}:t.x>=e.x&&t.y>=e.y?e:null},triangle:function(t){var e,n=t.startPoint,o=(t=t.targetPoint,this.getRectLeftTopPoint({startPoint:n,targetPoint:t}));return o?(e=Math.abs(t.x-n.x),t=Math.abs(t.y-n.y),[{x:o.x,y:o.y+t},{x:o.x+e/2,y:o.y},{x:o.x+e,y:o.y+t}]):[]}}},882793:function(t,e,n){var o=n(331329);e.Z=o.Z},331329:function(t,e,n){var o=n(801821),a=n.n(o),i=n(690171),r=n(133008),s=n(203739),l=function(){return(l=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},c=function(t,e){var n={};for(a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(t);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(t,a[o])&&(n[a[o]]=t[a[o]]);return n},u=function(t){var e,n=void 0===(n=t.className)?"":n,o=t.style,r=void 0===(e=t.direction)?"vertical":e,c=void 0===(e=t.size)?20:e,u=void 0!==(e=t.isUseMedia)&&e,d=void 0===(e=t.rootValue)?192:e,y=(0,i.useMemo)((function(){return(0,s.NA)(u,d,c)}),[u,d,c]);t=(0,i.useCallback)((function(){return"horizontal"===r?{display:"inline-block",width:1,height:"100%",margin:"0 ".concat(y)}:{width:"100%",height:1,margin:"".concat(y," 0")}}),[r,c]);return i.createElement("div",{className:a()("adhere-ui-split",null!=n?n:""),style:l(l({},t()),null!=o?o:{})})},d=(0,i.memo)(u);d.Group=function(t){var e=t.children,n=c(t,["children"]),o=(0,i.useMemo)((function(){return Array.isArray(e)?(e||[]).filter((function(t){return!!t})):e}),[e]);t=(0,i.useMemo)((function(){var t=[];return function e(n){i.Children.map(n,(function(n){var o;r.isFragment(n)?e(((null==(o=null==n?void 0:n.props)?void 0:o.children)||[]).filter((function(t){return!!t}))):t.push(n)}))}(o),t}),[o]);return i.Children.count(o)<=1?o:t.map((function(t,e){return 0===e?t:i.createElement(i.Fragment,{key:e},i.createElement(u,l({},n)),t)}))},e.Z=d},203739:function(t,e,n){function o(t,e,n){return t?function(t,e,n,o){return e<o?e:0===(o=function(t,e){return e=Math.pow(10,e+1),t=Math.floor(t*e),10*Math.round(t/10)/e}(e/t,n))?"0":o+"rem"}(e,n,5,0):"".concat(n,"px")}n.d(e,{NA:function(){return o}})},399226:function(t,e,n){var o=n(125214);e.Z=o.Z},125214:function(t,e,n){var o=n(801821),a=n.n(o),i=n(690171),r=n(355007),s="adhere-ui-swipeout",l=function(t){var e=void 0===(e=t.className)?"":e,n=void 0===(n=t.style)?{}:n,o=void 0===(o=t.contentClassName)?"":o,l=void 0===(l=t.contentStyle)?{}:l,c=void 0===(c=t.beforeClassName)?"":c,u=void 0===(u=t.beforeStyle)?{}:u,d=void 0===(d=t.afterClassName)?"":d,y=void 0===(y=t.afterStyle)?{}:y,p=t.before,h=t.after,f=void 0!==(x=t.beforeShow)&&x,v=void 0!==(x=t.afterShow)&&x,m=void 0===(x=t.direction)?"horizontal":x,g=void 0===(x=t.duration)?0:x,x=t.children,D=(0,i.useRef)(null),C=(0,i.useRef)(),T=(0,i.useRef)(new Map([[[!0,!0].toString(),1],[[!1,!1].toString(),1],[[!0,!1].toString(),0],[[!1,!0].toString(),2]]));function M(e,n){t[e]&&t[e](n)}return(0,i.useLayoutEffect)((function(){var t,e;C.current||(e=T.current.get([f,v].toString()),C.current=new r.t(D.current,{init:!1,initialSlide:e,direction:m,slidesPerView:"auto",centeredSlides:!1,spaceBetween:0}),null!=(t=null==(e=null==C?void 0:C.current)?void 0:e.on)&&t.call(e,"init",(function(){return M("onInit")})),null!=(e=null==(t=null==C?void 0:C.current)?void 0:t.on)&&e.call(t,"slideChangeTransitionStart",(function(){var t;return M("onSlideChangeTransitionStart",null==(t=C.current)?void 0:t.activeIndex)})),null!=(t=null==(e=null==C?void 0:C.current)?void 0:e.on)&&t.call(e,"slideChangeTransitionEnd",(function(){var t;return M("onSlideChangeTransitionEnd",null==(t=C.current)?void 0:t.activeIndex)})),null!=(e=null==(t=null==C?void 0:C.current)?void 0:t.init)&&e.call(t))}),[]),(0,i.useEffect)((function(){var t,e;null!=(e=null==(t=null==C?void 0:C.current)?void 0:t.slideTo)&&e.call(t,T.current.get([f,v].toString()),g)}),[f,v,g]),(0,i.useEffect)((function(){C.current&&C.current.changeDirection(m)}),[m]),i.createElement("div",{className:a()(s,"swiper",null!=e?e:""),style:null!=n?n:{},ref:D},i.createElement("div",{className:"swiper-wrapper"},i.createElement("div",{className:a()("swiper-slide","".concat(s,"-before"),null!=c?c:""),style:null!=u?u:{}},null==p?void 0:p()),i.createElement("div",{className:a()("swiper-slide","".concat(s,"-content"),null!=o?o:""),style:null!=l?l:{}},x),i.createElement("div",{className:a()("swiper-slide","".concat(s,"-after"),null!=d?d:""),style:null!=y?y:{}},null==h?void 0:h())))};e.Z=(0,i.memo)(l)},822817:function(t,e,n){var o=n(18702),a=n(690171),i=n(310736);const{PolygonSelection:r}=o.default;e.Z=()=>{const[t,e]=(0,a.useState)(""),n=(0,a.useRef)();return a.createElement("div",null,a.createElement("p",null,"图像裁剪"),a.createElement("div",{className:i.Z.Wrap},a.createElement(r.Cropping,{ref:n,value:t,onChange:t=>e(t),maskClassName:i.Z.MaskWrap})))}},435073:function(t,e,n){var o=n(313236),a=n(88048),i=n(134149),r=n(18702),s=n(5254),l=n(983754),c=n(455880),u=n(690171),d=n(306593);const{PolygonSelection:y,PolygonDrawAction:p,CircleDrawAction:h,RectangleDrawAction:f,TriangleDrawAction:v,DiamondDrawAction:m,StartDrawAction:g,FreeDrawAction:x,CircleModifyAction:D,DiamondModifyAction:C,PolygonModifyAction:T,RectangleModifyAction:M,TriangleModifyAction:w,StartModifyAction:P,Types:{PolygonSelectionActions:S,ActionEvents:E}}=r.default;e.Z=()=>{const t=(0,u.useRef)(),e=(0,u.useRef)(null),n=(0,u.useRef)(),r=new Map([["Polygon",T],["Circle",D],["Rectangle",M],["Triangle",w],["Diamond",C],["Start",P]]);return(0,u.useEffect)((()=>{e.current=new y(t.current,[],{[S.CanvasMount]:()=>{n.current=document.createElement("canvas"),n.current.style.position="absolute",n.current.style.left="0",n.current.style.top="0",n.current.style.width="100%",n.current.style.height="100%",n.current.style.zIndex="0",n.current.width=t.current.offsetWidth,n.current.height=t.current.offsetHeight,t.current.appendChild(n.current)}}),e.current.on(S.CanvasClickGeometry,(t=>{const n=new(r.get(t.type))({selectType:t.type,actionType:"Draw",data:t});n.on(E.End,(()=>{n.start()})),e.current.changeAction(n),n.start()})),e.current.on(S.CanvasClickEmpty,(()=>{console.log("clickEmpty"),e.current.clearDraw(),e.current.clearAssistDraw(),e.current.drawHistoryData()}));const o=document.getElementById("file");o.addEventListener("change",(()=>{const t=o.files[0],e=new FileReader;e.onloadend=t=>{const e=new Image;e.onload=()=>{const t=n.current.getContext("2d");t.clearRect(0,0,e.width,e.height),t.drawImage(e,0,0,e.width,e.height)},e.src=t.target.result},e.readAsDataURL(t)}))}),[]),u.createElement("div",{className:d.Z.Wrap},u.createElement("div",{className:d.Z.Fixed},u.createElement("ul",null,u.createElement("li",null,u.createElement("input",{id:"file",accept:"image/gif,image/jpeg,image/png,image/bmp",type:"file",style:{display:"none"}}),u.createElement(s.ZP,{type:"primary",onClick:()=>{const t=document.getElementById("file"),e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),t.dispatchEvent(e)}},"打开")),u.createElement("li",null,u.createElement(s.ZP,{type:"primary",onClick:()=>{const t=e.current.getHistoryData();t&&t.length?i.Z.InputPrompt({title:"数据名称",config:{label:"数据名称",initialValue:""},width:300,zIndex:1e3,local:"zh_CN",onSuccess:e=>new Promise((n=>{const o=a.Z.getObjectByLocal("polygonSelectionData")||[];o.push({id:(new Date).getTime(),name:e,data:t}),a.Z.putObjectByLocal("polygonSelectionData",o),l.ZP.success("保存成功！"),n()}))}):l.ZP.warn("画布上没有可以保存的数据！")}},"保存数据")),u.createElement("li",null,u.createElement(s.ZP,{type:"primary",onClick:()=>{const t=a.Z.getObjectByLocal("polygonSelectionData")||[],n=[{title:"名称",dataIndex:"name",key:"name"},{title:"操作",dataIndex:"option",key:"option",render:(n,i)=>u.createElement("div",{style:{display:"flex",alignItems:"center",height:15}},u.createElement("a",{href:"#",onClick:()=>{const e=t.findIndex((t=>t.id===i.id));-1!==e&&(t.splice(e,1),a.Z.putObjectByLocal("polygonSelectionData",t),l.ZP.success("删除成功！"),r())}},"删除"),u.createElement(o.Z,{direction:"horizontal"}),u.createElement("a",{href:"#",onClick:()=>{l.ZP.success("操作成功！"),r();const{data:t}=i;e.current.setHistoryData(t),e.current.clearDraw(),e.current.drawHistoryData()}},"打开"))}],{close:r}=i.Z.Modal({config:{title:"设置数据"},defaultCloseBtn:!1,children:u.createElement("div",{style:{width:"100%"}},u.createElement(c.Z,{rowKey:"id",columns:n,dataSource:t,pagination:!1}))})}},"设置数据"))),u.createElement("ul",null,u.createElement("li",null,u.createElement(s.ZP,{type:"primary",onClick:()=>{const t=new h;t.on(E.End,(e=>{t.start()})),e.current.changeAction(t),t.start()}},"圆形")),u.createElement("li",null,u.createElement(s.ZP,{type:"primary",onClick:()=>{const t=new f;t.on(E.End,(e=>{t.start()})),e.current.changeAction(t),t.start()}},"矩形")),u.createElement("li",null,u.createElement(s.ZP,{type:"primary",onClick:()=>{const t=new m;t.on(E.End,(e=>{t.start()})),e.current.changeAction(t),t.start()}},"菱形")),u.createElement("li",null,u.createElement(s.ZP,{type:"primary",onClick:()=>{const t=new v;t.on(E.End,(e=>{t.start()})),e.current.changeAction(t),t.start()}},"三角形")),u.createElement("li",null,u.createElement(s.ZP,{type:"primary",onClick:()=>{const t=new g;t.on(E.End,(e=>{t.start()})),e.current.changeAction(t),t.start()}},"五角星")),u.createElement("li",null,u.createElement(s.ZP,{type:"primary",onClick:()=>{const t=new p;t.on(E.End,(e=>{t.start()})),e.current.changeAction(t),t.start()}},"多边形")),u.createElement("li",null,u.createElement(s.ZP,{type:"primary",onClick:()=>{const t=new x;t.on(E.End,(()=>{t.start()})),e.current.changeAction(t),t.start()}},"自由绘制")))),u.createElement("div",{className:d.Z.Auto,ref:t}))}},583007:function(t,e,n){n.r(e);var o=n(690171),a=n(296032),i=n(822817),r=n(435073);e.default=()=>o.createElement(a.ZP,null,o.createElement(a.$0,{title:"PolygonSelection"},o.createElement("p",null,"多功能选区"),o.createElement("ul",null,o.createElement("li",null,"- 圆形区域"),o.createElement("li",null,"- 菱形区域"),o.createElement("li",null,"- 多边形区域"),o.createElement("li",null,"- 矩形形区域"),o.createElement("li",null,"- 五角星区域"),o.createElement("li",null,"- 三角形区域"),o.createElement("li",null,"- 自由绘制区域"),o.createElement("li",null,"- 图片裁剪"))),o.createElement(a.e0,{title:"代码演示",columnCount:1,config:[{id:"p1",name:"基本使用",cardProps:{description:{title:"基本使用",info:"基本使用"}},config:[{title:"imageselect.jsx",mode:"code",scope:{React:o},codeText:"\nimport React, { useEffect, useRef } from 'react';\nimport { Button, Table, message } from 'antd';\nimport {\n  PolygonSelection as PolygonSelectionModule,\n  Preferences,\n  MessageDialog,\n  Split,\n} from '@baifendian/adhere';\n\nimport styles from './imageselect.less';\n\nconst {\n  PolygonSelection,\n  PolygonDrawAction,\n  CircleDrawAction,\n  RectangleDrawAction,\n  TriangleDrawAction,\n  DiamondDrawAction,\n  StartDrawAction,\n  FreeDrawAction,\n  CircleModifyAction,\n  DiamondModifyAction,\n  PolygonModifyAction,\n  RectangleModifyAction,\n  TriangleModifyAction,\n  StartModifyAction,\n  Types: { PolygonSelectionActions, ActionEvents },\n} = PolygonSelectionModule;\n\nexport default () => {\n  const autoRef = useRef();\n  const polygonSelection = useRef(null);\n  const imgCanvasRef = useRef();\n\n  // ActionType\n  const typeActionMap = new Map([\n    ['Polygon', PolygonModifyAction],\n    ['Circle', CircleModifyAction],\n    ['Rectangle', RectangleModifyAction],\n    ['Triangle', TriangleModifyAction],\n    ['Diamond', DiamondModifyAction],\n    ['Start', StartModifyAction],\n  ]);\n\n  useEffect(() => {\n    // 初始化polygonSelection\n    polygonSelection.current = new PolygonSelection(autoRef.current, [], {\n      [PolygonSelectionActions.CanvasMount]: () => {\n        // 初始化image显示的画布\n        imgCanvasRef.current = document.createElement('canvas');\n        imgCanvasRef.current.style.position = 'absolute';\n        imgCanvasRef.current.style.left = '0';\n        imgCanvasRef.current.style.top = '0';\n        imgCanvasRef.current.style.width = '100%';\n        imgCanvasRef.current.style.height = '100%';\n        imgCanvasRef.current.style.zIndex = '0';\n        imgCanvasRef.current.width = autoRef.current.offsetWidth;\n        imgCanvasRef.current.height = autoRef.current.offsetHeight;\n        autoRef.current.appendChild(imgCanvasRef.current);\n      },\n    });\n\n    // 点击了画布中的几何图形\n    polygonSelection.current.on(PolygonSelectionActions.CanvasClickGeometry, (data) => {\n      const Component = typeActionMap.get(data.type);\n\n      const action = new Component({\n        selectType: data.type,\n        actionType: 'Draw',\n        data,\n      });\n\n      action.on(ActionEvents.End, () => {\n        action.start();\n      });\n\n      polygonSelection.current.changeAction(action);\n\n      action.start();\n    });\n\n    // 点击了画布的空位置\n    polygonSelection.current.on(PolygonSelectionActions.CanvasClickEmpty, () => {\n      console.log('clickEmpty');\n      polygonSelection.current.clearDraw();\n      polygonSelection.current.clearAssistDraw();\n      polygonSelection.current.drawHistoryData();\n    });\n\n    // 打开文件\n    const fileEl = document.getElementById('file');\n    fileEl.addEventListener('change', () => {\n      const file = fileEl.files[0];\n\n      const read = new FileReader();\n      read.onloadend = (e) => {\n        const img = new Image();\n\n        img.onload = () => {\n          const ctx = imgCanvasRef.current.getContext('2d');\n          ctx.clearRect(0, 0, img.width, img.height);\n          ctx.drawImage(img, 0, 0, img.width, img.height);\n        };\n\n        img.src = e.target.result;\n      };\n      read.readAsDataURL(file);\n    });\n  }, []);\n\n  return (\n    <div className={styles.Wrap}>\n      <div className={styles.Fixed}>\n        <ul>\n          <li>\n            <input\n              id=\"file\"\n              accept=\"image/gif,image/jpeg,image/png,image/bmp\"\n              type=\"file\"\n              style={{ display: 'none' }}\n            />\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                const fileEl = document.getElementById('file');\n                const event = document.createEvent('MouseEvents');\n                event.initEvent('click', true, true);\n                fileEl.dispatchEvent(event);\n              }}\n            >\n              打开\n            </Button>\n          </li>\n          <li>\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                // 画布的数据\n                const canvasData = polygonSelection.current.getHistoryData();\n\n                if (!canvasData || !canvasData.length) {\n                  message.warn('画布上没有可以保存的数据！');\n                  return;\n                }\n\n                MessageDialog.InputPrompt({\n                  title: '数据名称',\n                  config: {\n                    label: '数据名称',\n                    initialValue: '',\n                  },\n                  width: 300,\n                  zIndex: 1000,\n                  local: 'zh_CN',\n                  onSuccess: (value) => {\n                    return new Promise((resolve) => {\n                      const localData = Preferences.getObjectByLocal('polygonSelectionData') || [];\n\n                      // 添加画布数据\n                      localData.push({\n                        id: new Date().getTime(),\n                        name: value,\n                        data: canvasData,\n                      });\n\n                      Preferences.putObjectByLocal('polygonSelectionData', localData);\n                      message.success('保存成功！');\n                      resolve();\n                    });\n                  },\n                });\n              }}\n            >\n              保存数据\n            </Button>\n          </li>\n          <li>\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                const localData = Preferences.getObjectByLocal('polygonSelectionData') || [];\n\n                const columns = [\n                  {\n                    title: '名称',\n                    dataIndex: 'name',\n                    key: 'name',\n                  },\n                  {\n                    title: '操作',\n                    dataIndex: 'option',\n                    key: 'option',\n                    render: (text, record) => {\n                      return (\n                        <div style={{ display: 'flex', alignItems: 'center', height: 15 }}>\n                          <a\n                            href=\"#\"\n                            onClick={() => {\n                              const index = localData.findIndex((data) => data.id === record.id);\n                              if (index !== -1) {\n                                localData.splice(index, 1);\n                                Preferences.putObjectByLocal('polygonSelectionData', localData);\n                                message.success('删除成功！');\n                                // MessageDialog.close(el);\n                                close();\n                              }\n                            }}\n                          >\n                            删除\n                          </a>\n                          <Split direction=\"horizontal\" />\n                          <a\n                            href=\"#\"\n                            onClick={() => {\n                              message.success('操作成功！');\n                              // MessageDialog.close(el);\n                              close();\n                              const { data } = record;\n                              polygonSelection.current.setHistoryData(data);\n                              polygonSelection.current.clearDraw();\n                              polygonSelection.current.drawHistoryData();\n                            }}\n                          >\n                            打开\n                          </a>\n                        </div>\n                      );\n                    },\n                  },\n                ];\n\n                const { close } = MessageDialog.Modal({\n                  config: {\n                    title: '设置数据',\n                  },\n                  defaultCloseBtn: false,\n                  children: (\n                    <div style={{ width: '100%' }}>\n                      <Table\n                        rowKey=\"id\"\n                        columns={columns}\n                        dataSource={localData}\n                        pagination={false}\n                      />\n                    </div>\n                  ),\n                });\n              }}\n            >\n              设置数据\n            </Button>\n          </li>\n        </ul>\n\n        <ul>\n          <li>\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                const action = new CircleDrawAction();\n                action.on(ActionEvents.End, (data) => {\n                  action.start();\n                });\n                polygonSelection.current.changeAction(action);\n                action.start();\n              }}\n            >\n              圆形\n            </Button>\n          </li>\n          <li>\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                const action = new RectangleDrawAction();\n                action.on(ActionEvents.End, (data) => {\n                  action.start();\n                });\n                polygonSelection.current.changeAction(action);\n                action.start();\n              }}\n            >\n              矩形\n            </Button>\n          </li>\n          <li>\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                const action = new DiamondDrawAction();\n                action.on(ActionEvents.End, (data) => {\n                  action.start();\n                });\n                polygonSelection.current.changeAction(action);\n                action.start();\n              }}\n            >\n              菱形\n            </Button>\n          </li>\n          <li>\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                const action = new TriangleDrawAction();\n                action.on(ActionEvents.End, (data) => {\n                  action.start();\n                });\n                polygonSelection.current.changeAction(action);\n                action.start();\n              }}\n            >\n              三角形\n            </Button>\n          </li>\n          <li>\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                const action = new StartDrawAction();\n                action.on(ActionEvents.End, (data) => {\n                  action.start();\n                });\n                polygonSelection.current.changeAction(action);\n                action.start();\n              }}\n            >\n              五角星\n            </Button>\n          </li>\n          <li>\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                const action = new PolygonDrawAction();\n                action.on(ActionEvents.End, (data) => {\n                  action.start();\n                });\n                polygonSelection.current.changeAction(action);\n                action.start();\n              }}\n            >\n              多边形\n            </Button>\n          </li>\n          <li>\n            <Button\n              type=\"primary\"\n              onClick={() => {\n                const action = new FreeDrawAction();\n                action.on(ActionEvents.End, () => {\n                  action.start();\n                });\n                polygonSelection.current.changeAction(action);\n                action.start();\n              }}\n            >\n              自由绘制\n            </Button>\n          </li>\n        </ul>\n      </div>\n      <div className={styles.Auto} ref={autoRef}></div>\n    </div>\n  );\n};\n\n"},{title:"imageselect.less",mode:"code",scope:{React:o},codeText:"\n.Wrap {\n  display: flex;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n}\n\n.Fixed {\n  flex-shrink: 0;\n  border-right: 1px solid rgba(0, 0, 0, 0.1);\n\n  > ul {\n    margin: 0;\n    padding: 20px;\n    list-style: none;\n\n    &:not(:last-child) {\n      border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n    }\n\n    > li {\n      &:not(:last-child) {\n        margin-bottom: 20px;\n      }\n\n      :global(> .ant-btn) {\n        width: 100%;\n      }\n    }\n  }\n}\n\n.Auto {\n  position: relative;\n  flex-grow: 1;\n  min-width: 0;\n}\n\n"}],type:"PlayGroundMulit",renderChildren:()=>o.createElement(r.Z,null)},{id:"p2",name:"图片裁剪",cardProps:{description:{title:"图片裁剪",info:"图片裁剪"}},config:[{title:"cropping.jsx",mode:"code",scope:{React:o},codeText:"\nimport React, { useRef, useState } from 'react';\n\nimport { PolygonSelection as PolygonSelectionModule } from '@baifendian/adhere';\n\nimport styles from './cropping.less';\n\nconst { PolygonSelection } = PolygonSelectionModule;\n\nexport default () => {\n  const [value, setValue] = useState('');\n\n  const ref = useRef();\n\n  return (\n    <div>\n      <p>图像裁剪</p>\n      <div className={styles.Wrap}>\n        <PolygonSelection.Cropping\n          ref={ref}\n          value={value}\n          onChange={(v) => setValue(v)}\n          maskClassName={styles.MaskWrap}\n        />\n      </div>\n    </div>\n  );\n};\n"},{title:"cropping.less",mode:"code",scope:{React:o},codeText:"\n.Wrap {\n  width: 100px;\n  height: 100px;\n  border: 1px solid #ccc;\n  border-radius: 50%;\n}\n\n.MaskWrap {\n  border-radius: 50%;\n}\n"}],type:"PlayGroundMulit",renderChildren:()=>o.createElement(i.Z,null)}]}),o.createElement(a.sB,{title:"Props",config:[{border:!0,title:"Cropping",data:[{params:"className",desc:"",type:"string",defaultVal:""},{params:"style",desc:"",type:"CSSProperties",defaultVal:""},{params:"maskClassName",desc:"",type:"string",defaultVal:""},{params:"maskStyle",desc:"",type:"CSSProperties",defaultVal:""},{params:"mask",desc:"",type:"ReactNode",defaultVal:""},{params:"modalProps",desc:"",type:"ModalProps",defaultVal:""},{params:"coreProps",desc:"",type:"CroppingCoreProps",defaultVal:""},{params:"value",desc:"",type:"string",defaultVal:""},{params:"onChange",desc:"",type:"(base64?: string) => void",defaultVal:""}]},{border:!0,title:"CroppingCore",data:[{params:"className",desc:"",type:"string",defaultVal:""},{params:"style",desc:"",type:"CSSProperties",defaultVal:""},{params:"wrapProps",desc:"",type:"CroppingCoreWrapProps",defaultVal:""},{params:"toolProps",desc:"",type:"CroppingCoreToolProps",defaultVal:""},{params:"areaProps",desc:"",type:"CroppingCoreAreaProps",defaultVal:""},{params:"minHeight",desc:"",type:"number",defaultVal:""},{params:"toolBarConfig",desc:"",type:"\n                  {\n                    direction?: string | 'left' | 'right' | 'top' | 'bottom';\n                    open?: {\n                      render?: (handle?: Function) => ReactNode;\n                      sort?: number;\n                    };\n                    rectangle?: {\n                      render?: (handle?: Function) => ReactNode;\n                      hide?: boolean;\n                      sort?: number;\n                    };\n                    circle?: {\n                      render?: (handle?: Function) => ReactNode;\n                      hide?: boolean;\n                      sort?: number;\n                    };\n                    start: {\n                      render?: (handle?: Function) => ReactNode;\n                      hide?: boolean;\n                      sort?: number;\n                    };\n                    triangle: {\n                      render?: (handle?: Function) => ReactNode;\n                      hide?: boolean;\n                      sort?: number;\n                    };\n                    diamond: {\n                      render?: (handle?: Function) => ReactNode;\n                      hide?: boolean;\n                      sort?: number;\n                    };\n                    polygon: {\n                      render?: (handle?: Function) => ReactNode;\n                      hide?: boolean;\n                      sort?: number;\n                    };\n                  }\n                ",defaultVal:""}]}]}),o.createElement(a.ae,{title:"Api",config:[{border:!0,title:"PolygonSelection",data:[{name:"getCtx",desc:"getCtx",modifier:"public",params:[],returnType:"CanvasRenderingContext2D | null",returnDesc:""},{name:"getCanvasEl",desc:"getCanvasEl",modifier:"public",params:[],returnType:"HTMLCanvasElement | null",returnDesc:""},{name:"getAssistCtx",desc:"getAssistCtx",modifier:"public",params:[],returnType:"CanvasRenderingContext2D | null",returnDesc:""},{name:"getAssistCanvasEl",desc:"getAssistCanvasEl",modifier:"public",params:[],returnType:"HTMLCanvasElement | null",returnDesc:""},{name:"getWidth",desc:"getWidth",modifier:"public",params:[],returnType:"number",returnDesc:""},{name:"getHeight",desc:"getHeight",modifier:"public",params:[],returnType:"number",returnDesc:""},{name:"addHistoryData",desc:"添加一个ActionData到canvasData中",modifier:"public",params:[{name:"data",desc:"data",type:"IActionData",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"removeHistoryDataById",desc:"删除一个ActionData中的数据",modifier:"public",params:[{name:"actionDataId",desc:"actionDataId",type:"string",defaultVal:"",required:"true"}],returnType:"IActionData[]",returnDesc:""},{name:"drawHistoryData",desc:"绘制历史数据",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"getHistoryDataById",desc:"获取历史数据",modifier:"public",params:[{name:"id",desc:"id",type:"string",defaultVal:"",required:"true"}],returnType:"IActionData | null | undefined ",returnDesc:""},{name:"getHistoryData",desc:"获取历史数据",modifier:"public",params:[],returnType:"IActionData[]",returnDesc:""},{name:"setHistoryData",desc:"设置历史数据",modifier:"public",params:[{name:"data",desc:"data",type:"IActionData[]",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"changeAction",desc:"切换一个Action",modifier:"public",params:[{name:"action",desc:"action对象",type:"IAction",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getCurAction",desc:"获取当前的Action",modifier:"public",params:[],returnType:"IAction | null",returnDesc:""},{name:"start",desc:"开始",modifier:"public",params:[{name:"style",desc:"样式",type:"IStyle",defaultVal:"",required:""}],returnType:"void",returnDesc:""},{name:"end",desc:"结束",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"clearDraw",desc:"clearDraw",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"clearAssistDraw",desc:"clearAssistDraw",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setFrontCanvas",desc:"置顶",modifier:"public",params:[{name:"canvasEl",desc:"canvasEl",type:"HTMLCanvasElement",defaultVal:"",required:""}],returnType:"void",returnDesc:""},{name:"setBackCanvas",desc:"置底",modifier:"public",params:[{name:"canvasEl",desc:"canvasEl",type:"HTMLCanvasElement",defaultVal:"",required:""}],returnType:"void",returnDesc:""},{name:"destroy",desc:"销毁",modifier:"public",params:[],returnType:"void",returnDesc:""}]},{border:!0,title:"CircleDrawAction",data:[{name:"booleanPointInData",desc:"booleanPointInData",modifier:"static",params:[{name:"point",desc:"point",type:"IPoint",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"ICircleData",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"draw",desc:"draw",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"ICircleData",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"drawHistoryPath",desc:"绘制历史数据",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"\n                  {\n                    center: IPoint;\n                    radius: number;\n                  }\n                ",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[{name:"style",desc:"style",type:"IStyle",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"获取状态",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"DiamondDrawAction",data:[{name:"booleanPointInData",desc:"booleanPointInData",modifier:"static",params:[{name:"point",desc:"point",type:"IPoint",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IDiamondData",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"draw",desc:"draw",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IDiamondData",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"drawHistoryPath",desc:"绘制历史数据",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"\n                  {\n                    leftTopPoint: IPoint | null;\n                    width: number;\n                    height: number;\n                  }\n                ",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[{name:"style",desc:"style",type:"IStyle",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"获取状态",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"FreeDrawAction",data:[{name:"draw",desc:"draw",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IFreeData",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"drawHistoryPath",desc:"绘制历史数据",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"\n                  {\n                    points: IPoint[];\n                  }\n                ",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[{name:"style",desc:"style",type:"IStyle",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"获取状态",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"PolygonDrawAction",data:[{name:"booleanPointInData",desc:"booleanPointInData",modifier:"static",params:[{name:"point",desc:"point",type:"IPoint",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IPolygonData",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"draw",desc:"draw",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IPolygonData",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"drawHistoryPath",desc:"绘制历史数据",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IPoint[]",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[{name:"style",desc:"style",type:"IStyle",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"获取状态",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"RectangleDrawAction",data:[{name:"booleanPointInData",desc:"booleanPointInData",modifier:"static",params:[{name:"point",desc:"point",type:"IPoint",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IRectangleData",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"draw",desc:"draw",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IRectangleData",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"drawHistoryPath",desc:"绘制历史数据",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"\n                  {\n                    leftTopPoint: IPoint | null;\n                    width: number;\n                    height: number;\n                  }\n                ",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[{name:"style",desc:"style",type:"IStyle",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"获取状态",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"StartDrawAction",data:[{name:"booleanPointInData",desc:"booleanPointInData",modifier:"static",params:[{name:"point",desc:"point",type:"IPoint",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IStartData",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"draw",desc:"draw",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"IStartData",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"drawHistoryPath",desc:"绘制历史数据",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"\n                  {\n                    center: IPoint;\n                    outRadius: number;\n                    innerRadius: number;\n                  }\n                ",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[{name:"style",desc:"style",type:"IStyle",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"获取状态",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"TriangleDrawAction",data:[{name:"booleanPointInData",desc:"booleanPointInData",modifier:"static",params:[{name:"point",desc:"point",type:"IPoint",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"ITriangleData",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"draw",desc:"draw",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"ITriangleData",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"drawHistoryPath",desc:"绘制历史数据",modifier:"static",params:[{name:"ctx",desc:"ctx",type:"CanvasRenderingContext2D",defaultVal:"",required:"true"},{name:"data",desc:"data",type:"\n                  {\n                    points: IPoint[];\n                  }\n                ",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[{name:"style",desc:"style",type:"IStyle",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"获取状态",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"CircleModifyAction",data:[{name:"isCanMove",desc:"isCanMove",modifier:"public",params:[{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[{name:"startPoint",desc:"startPoint",type:"IPoint",defaultVal:"",required:"true"},{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"initMoveEvents",desc:"initMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"clearMoveEvents",desc:"clearMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"onMoveMousedown",desc:"onMoveMousedown",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMousemove",desc:"onMoveMousemove",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMouseup",desc:"onMoveMouseup",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"getStatus",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"DiamondModifyAction",data:[{name:"isCanMove",desc:"isCanMove",modifier:"public",params:[{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[{name:"startPoint",desc:"startPoint",type:"IPoint",defaultVal:"",required:"true"},{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"initMoveEvents",desc:"initMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"clearMoveEvents",desc:"clearMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"onMoveMousedown",desc:"onMoveMousedown",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMousemove",desc:"onMoveMousemove",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMouseup",desc:"onMoveMouseup",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"getStatus",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"PolygonModifyAction",data:[{name:"isCanMove",desc:"isCanMove",modifier:"public",params:[{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[{name:"startPoint",desc:"startPoint",type:"IPoint",defaultVal:"",required:"true"},{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"initMoveEvents",desc:"initMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"clearMoveEvents",desc:"clearMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"onMoveMousedown",desc:"onMoveMousedown",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMousemove",desc:"onMoveMousemove",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMouseup",desc:"onMoveMouseup",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"getStatus",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"RectangleModifyAction",data:[{name:"isCanMove",desc:"isCanMove",modifier:"public",params:[{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[{name:"startPoint",desc:"startPoint",type:"IPoint",defaultVal:"",required:"true"},{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"initMoveEvents",desc:"initMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"clearMoveEvents",desc:"clearMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"onMoveMousedown",desc:"onMoveMousedown",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMousemove",desc:"onMoveMousemove",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMouseup",desc:"onMoveMouseup",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"getStatus",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"StartModifyAction",data:[{name:"isCanMove",desc:"isCanMove",modifier:"public",params:[{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[{name:"startPoint",desc:"startPoint",type:"IPoint",defaultVal:"",required:"true"},{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"initMoveEvents",desc:"initMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"clearMoveEvents",desc:"clearMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"onMoveMousedown",desc:"onMoveMousedown",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMousemove",desc:"onMoveMousemove",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMouseup",desc:"onMoveMouseup",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"getStatus",modifier:"public",params:[],returnType:"number",returnDesc:""}]},{border:!0,title:"TriangleModifyAction",data:[{name:"isCanMove",desc:"isCanMove",modifier:"public",params:[{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"boolean",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"drawMoveGeometry",desc:"drawMoveGeometry",modifier:"public",params:[{name:"startPoint",desc:"startPoint",type:"IPoint",defaultVal:"",required:"true"},{name:"targetPoint",desc:"targetPoint",type:"IPoint",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"initMoveEvents",desc:"initMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"clearMoveEvents",desc:"clearMoveEvents",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"onMoveMousedown",desc:"onMoveMousedown",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMousemove",desc:"onMoveMousemove",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"onMoveMouseup",desc:"onMoveMouseup",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"false"}],returnType:"void",returnDesc:""},{name:"start",desc:"start",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"end",desc:"end",modifier:"public",params:[{name:"e",desc:"e",type:"MouseEvent",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"destroy",desc:"destroy",modifier:"public",params:[],returnType:"void",returnDesc:""},{name:"setContext",desc:"setContext",modifier:"public",params:[{name:"context",desc:"context",type:"IPolygonSelection",defaultVal:"",required:"true"}],returnType:"void",returnDesc:""},{name:"getStatus",desc:"getStatus",modifier:"public",params:[],returnType:"number",returnDesc:""}]}]}))},726517:function(t,e,n){n.r(e);var o=n(889871),a=n(991098),i=n(267081),r=n(20061),s=n(670001),l=n(690171),c=n(296032);e.default=()=>{const[t,e]=(0,l.useState)([{title:"Ant Design Title 1",beforeShow:!1,afterShow:!1,duration:200},{title:"Ant Design Title 2",beforeShow:!1,afterShow:!1,duration:200},{title:"Ant Design Title 3",beforeShow:!1,afterShow:!1,duration:200},{title:"Ant Design Title 4",beforeShow:!1,afterShow:!1,duration:200}]);return l.createElement(c.ZP,null,l.createElement(c.$0,{title:"SwipeOut"},l.createElement("p",null,"滑动操作")),l.createElement(c.e0,{title:"代码演示",columnCount:1,config:[{id:"p1",name:"基本使用",mode:"code",scope:{React:l},cardProps:{description:{title:"基本使用",info:"基本使用"}},codeText:'\n  import React, { useState } from \'react\';\n  import { List, Avatar, Radio } from \'antd\';\n\n  import { SwipeOut, Space } from \'@baifendian/adhere\';\n\n  const [data, setData] = useState([\n    {\n      title: \'Ant Design Title 1\',\n      beforeShow: false,\n      afterShow: false,\n      duration: 200,\n    },\n    {\n      title: \'Ant Design Title 2\',\n      beforeShow: false,\n      afterShow: false,\n      duration: 200,\n    },\n    {\n      title: \'Ant Design Title 3\',\n      beforeShow: false,\n      afterShow: false,\n      duration: 200,\n    },\n    {\n      title: \'Ant Design Title 4\',\n      beforeShow: false,\n      afterShow: false,\n      duration: 200,\n    },\n  ]);\n\n  <div>\n    <Radio.Group>\n      <Radio.Button\n        value="large"\n        onClick={() => {\n          setData((record) =>\n            record.map((t) => ({ ...t, beforeShow: true, afterShow: false })),\n          );\n        }}\n      >\n        showBefore\n      </Radio.Button>\n      <Radio.Button\n        value="default"\n        onClick={() => {\n          setData((record) =>\n            record.map((t) => ({ ...t, beforeShow: false, afterShow: true })),\n          );\n        }}\n      >\n        showAfter\n      </Radio.Button>\n      <Radio.Button\n        value="small"\n        onClick={() => {\n          setData((record) =>\n            record.map((t) => ({ ...t, beforeShow: false, afterShow: false })),\n          );\n        }}\n      >\n        closeAll\n      </Radio.Button>\n    </Radio.Group>\n  </div>\n\n  <Space direction="vertical" />\n\n  <List\n    itemLayout="horizontal"\n    dataSource={data}\n    renderItem={(item) => (\n      <SwipeOut\n        before={() => (\n          <Radio.Group>\n            <Radio.Button value="large">Large</Radio.Button>\n            <Radio.Button value="default">Default</Radio.Button>\n            <Radio.Button value="small">Small</Radio.Button>\n          </Radio.Group>\n        )}\n        after={() => (\n          <Radio.Group>\n            <Radio.Button value="large">Large</Radio.Button>\n            <Radio.Button value="default">Default</Radio.Button>\n            <Radio.Button value="small">Small</Radio.Button>\n          </Radio.Group>\n        )}\n        beforeShow={item.beforeShow}\n        afterShow={item.afterShow}\n        duration={item.duration}\n      >\n        <List.Item>\n          <List.Item.Meta\n            avatar={\n              <Avatar src="https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png" />\n            }\n            title={<a href="https://ant.design">{item.title}</a>}\n            description="Ant Design, a design language for background applications, is refined by Ant UED Team"\n          />\n        </List.Item>\n      </SwipeOut>\n    )}\n  />\n      ',type:"PlayGround",renderChildren:()=>l.createElement(l.Fragment,null,l.createElement("div",null,l.createElement(i.ZP.Group,null,l.createElement(i.ZP.Button,{value:"large",onClick:()=>{e((t=>t.map((t=>({...t,beforeShow:!0,afterShow:!1})))))}},"showBefore"),l.createElement(i.ZP.Button,{value:"default",onClick:()=>{e((t=>t.map((t=>({...t,beforeShow:!1,afterShow:!0})))))}},"showAfter"),l.createElement(i.ZP.Button,{value:"small",onClick:()=>{e((t=>t.map((t=>({...t,beforeShow:!1,afterShow:!1})))))}},"closeAll"))),l.createElement(a.Z,{direction:"vertical"}),l.createElement(r.Z,{itemLayout:"horizontal",dataSource:t,renderItem:t=>l.createElement(o.Z,{before:()=>l.createElement(i.ZP.Group,null,l.createElement(i.ZP.Button,{value:"large"},"Large"),l.createElement(i.ZP.Button,{value:"default"},"Default"),l.createElement(i.ZP.Button,{value:"small"},"Small")),after:()=>l.createElement(i.ZP.Group,null,l.createElement(i.ZP.Button,{value:"large"},"Large"),l.createElement(i.ZP.Button,{value:"default"},"Default"),l.createElement(i.ZP.Button,{value:"small"},"Small")),beforeShow:t.beforeShow,afterShow:t.afterShow,duration:t.duration},l.createElement(r.Z.Item,null,l.createElement(r.Z.Item.Meta,{avatar:l.createElement(s.C,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:l.createElement("a",{href:"https://ant.design"},t.title),description:"Ant Design, a design language for background applications, is refined by Ant UED Team"})))}))}]}),l.createElement(c.sB,{title:"Props",config:[{border:!0,title:"属性",data:[{params:"className",desc:"附加的样式表",type:"string",defaultVal:""},{params:"style",desc:"附加的样式",type:"React.CSSProperties",defaultVal:""},{params:"beforeClassName",desc:"附加的样式表",type:"string",defaultVal:""},{params:"beforeStyle",desc:"附加的样式",type:"React.CSSProperties",defaultVal:""},{params:"afterClassName",desc:"附加的样式表",type:"string",defaultVal:""},{params:"afterStyle",desc:"附加的样式",type:"React.CSSProperties",defaultVal:""},{params:"contentClassName",desc:"附加的样式表",type:"string",defaultVal:""},{params:"contentStyle",desc:"附加的样式",type:"React.CSSProperties",defaultVal:""},{params:"beforeShow",desc:"是否显示内容之前的操作",type:"boolean",defaultVal:"false"},{params:"afterShow",desc:"是否显示内容之后的操作",type:"boolean",defaultVal:"false"},{params:"direction",desc:"方向",type:"'horizontal' | 'vertical'",defaultVal:"horizontal"},{params:"before",desc:"内容之前的UI",type:"() => React.ReactElement",defaultVal:""},{params:"after",desc:"内容之后的UI",type:"() => React.ReactElement",defaultVal:""},{params:"duration",desc:"beforeShow和afterShow的持续时间(毫秒)",type:"number",defaultVal:"200"},{params:"onInit",desc:"onInit",type:"() => void",defaultVal:""},{params:"slideChangeTransitionStart",desc:"slideChangeTransitionStart",type:"() => void",defaultVal:""},{params:"slideChangeTransitionEnd",desc:"slideChangeTransitionEnd",type:"() => void",defaultVal:""}]}]}))}},296032:function(t,e,n){n.d(e,{$0:function(){return l},ae:function(){return d},e0:function(){return c},sB:function(){return u}});var o=n(570517),a=n(153757),i=n(690171);const{PlayGroundPageContext:r,PlayGroundPage:s}=a.default,{Section:l,CodeBoxSection:c,PropsSection:u,FunctionPropsSection:d}=s;e.ZP=function(t){let{children:e,...n}=t;const[a,l]=(0,i.useState)(),c=(0,i.useRef)();return(0,i.useEffect)((()=>{l(c.current.parentElement.parentElement)}),[]),i.createElement(r.Provider,{value:{scrollEl:a}},i.createElement(s,(0,o.Z)({ref:c},n),e))}},18702:function(t,e,n){var o=n(699819);e.default=o.Z},991098:function(t,e,n){var o=n(682796);e.Z=o.Z},313236:function(t,e,n){var o=n(882793);e.Z=o.Z},889871:function(t,e,n){var o=n(399226);e.Z=o.Z}}]);