"use strict";(self.webpackChunk_ctsj_build=self.webpackChunk_ctsj_build||[]).push([[5203],{477950:function(e,n,t){var r=t(863435);n.Z={Permission:r.y3,setPermission:r.qw,checkPermission:r.P_,getPermission:r.Yj,PermissionFun:r.D_}},863435:function(e,n,t){t.d(n,{D_:function(){return d},P_:function(){return u},Yj:function(){return c},qw:function(){return l},y3:function(){return m}});var r=t(566891),i=t.n(r),a=t(690171),s=t(519344),o=[],l=function(e){o=e},c=function(){return JSON.parse(JSON.stringify(o))},u=function(e,n){return!((e=(e=void 0===e?c():e)||c())&&Array.isArray(e)&&n)||(Array.isArray(n)?n.every((function(n){return-1!==e.indexOf(n)})):-1!==e.indexOf(n))},m=function(e){var n=void 0===(n=e.allPermission)?c():n,t=e.permissions,r=e.children;e=e.noMatch;return a.createElement(s.Z,{conditional:u(n,t),noMatch:e},r)};function d(e){var n=void 0===(n=e.allPermission)?c():n,t=e.permissions,r=e.match;e=e.noMatch;return s.Z.conditionalRender({conditional:u(n,t),match:r,noMatch:e})}m.defaultProps={allPermission:void 0,permissions:"",noMatch:null,children:null},m.propTypes={allPermission:i().array,permissions:i().oneOfType([i().array,i().string]),noMatch:i().node,children:i().node}},942693:function(e,n,t){t.r(n);var r=t(134149),i=t(401285),a=t(772099),s=t(5254),o=t(102971),l=t(690171),c=t(296032);const{Permission:u,setPermission:m,getPermission:d}=i.default;m(["1"]),n.default=()=>{const[e,n]=(0,l.useState)(d()),[t,i]=(0,l.useState)(["2"]),f=(0,l.useRef)(),p=(0,l.useRef)();return l.createElement(c.ZP,null,l.createElement(c.$0,{title:"Permission"},l.createElement("p",null,"权限的组件"),l.createElement("ul",null,l.createElement("li",null,"- 设置所有权限"),l.createElement("li",null,"- 传入权限(支持多个)"),l.createElement("li",null,"- 可以自定义无权限的 UI"))),l.createElement(c.e0,{title:"代码演示",columnCount:1,config:[{id:"p1",name:"基本使用",mode:"code",scope:{React:l},cardProps:{description:{title:"基本使用",info:"基本使用"}},codeText:"\n  import React, { useState, useRef } from 'react';\n  import { Card, Empty, Button } from 'antd';\n  import { Permission, MessageDialog } from '@baifendian/adhere';\n\n  const { Permission: PermissionWrap, setPermission, getPermission } = Permission;\n\n  setPermission(['1']);\n\n  <Card\n  actions={[\n    <Button\n      type=\"primary\"\n      onClick={() => {\n        const {close} = MessageDialog.Modal({\n          config: {\n            title: '权限所有设置',\n            width: 300,\n            footer: [\n              <Button\n                type=\"primary\"\n                onClick={() => {\n                  const val = ref1.current.value.trim();\n                  if (val) {\n                    setPermission(val.split(','));\n                    setAllPermission(getPermission());\n                  }\n                  // MessageDialog.close(el);\n                  close();\n                }}\n              >\n                确定\n              </Button>,\n            ],\n          },\n          children: (\n            <div>\n              <input autoFocus={true} ref={ref1} defaultValue={getPermission()} />\n            </div>\n          ),\n        });\n      }}\n    >\n      设置所有权限\n    </Button>,\n\n    <Button\n      onClick={() => {\n        const {close} = MessageDialog.Modal({\n          config: {\n            title: '权限当前设置',\n            width: 300,\n            footer: [\n              <Button\n                type=\"primary\"\n                onClick={() => {\n                  const val = ref2.current.value.trim();\n                  if (val) {\n                    setCurPermission(val.split(','));\n                  }\n                  // MessageDialog.close(el);\n                  close();\n                }}\n              >\n                确定\n              </Button>,\n            ],\n          },\n          children: (\n            <div>\n              <input autoFocus={true} ref={ref2} defaultValue={curPermission} />\n            </div>\n          ),\n        });\n      }}\n    >\n      设置当前权限\n    </Button>,\n  ]}\n  >\n    <PermissionWrap permissions={curPermission} noMatch={<Empty />}>\n      <Button>有权限才能看到这个按钮</Button>\n    </PermissionWrap>\n  </Card>\n      ",type:"PlayGround",renderChildren:()=>l.createElement(a.Z,{actions:[l.createElement(s.ZP,{type:"primary",onClick:()=>{const{close:e}=r.Z.Modal({config:{title:"权限所有设置",width:300,footer:[l.createElement(s.ZP,{type:"primary",onClick:()=>{const t=f.current.value.trim();t&&(m(t.split(",")),n(d())),e()}},"确定")]},children:l.createElement("div",null,l.createElement("input",{autoFocus:!0,ref:f,defaultValue:d()}))})}},"设置所有权限"),l.createElement(s.ZP,{onClick:()=>{const{close:e}=r.Z.Modal({config:{title:"权限当前设置",width:300,footer:[l.createElement(s.ZP,{type:"primary",onClick:()=>{const n=p.current.value.trim();n&&i(n.split(",")),e()}},"确定")]},children:l.createElement("div",null,l.createElement("input",{autoFocus:!0,ref:p,defaultValue:t}))})}},"设置当前权限")]},l.createElement(u,{permissions:t,noMatch:()=>l.createElement(o.Z,null)},(()=>l.createElement(s.ZP,null,"有权限才能看到这个按钮"))))}]}),l.createElement(c.sB,{title:"Props",config:[{border:!0,title:"Permission",data:[{params:"allPermission",desc:"所有的权限",type:"Array<String>",defaultVal:"undefined"},{params:"permissions",desc:"校验的权限",type:"Array<String>",defaultVal:""},{params:"children",desc:"有权限时显示的内容",type:"React.ReactElement | null",defaultVal:""},{params:"noMatch",desc:"没有权限时显示的内容",type:"React.ReactElement",defaultVal:"null"}]}]}),l.createElement(c.ae,{title:"Api",config:[{border:!0,title:"Api",data:[{name:"setPermission",desc:"设置所有的权限",modifier:"static",params:[{name:"permission",desc:"所有的权限",type:"Array<String>",defaultVal:"",required:""}],returnType:"void",returnDesc:""},{name:"getPermission",desc:"获取所有的权限",modifier:"static",params:[],returnType:"Array<String>",returnDesc:"返回所有权限的数组"},{name:"checkPermission",desc:"监测是否有指定的权限",modifier:"static",params:[{name:"allPermission",desc:"所有的权限",type:"Array<String>",defaultVal:"",required:""},{name:"currentPermissions",desc:"监测的权限",type:"Array<String>",defaultVal:"",required:""}],returnType:"boolean",returnDesc:"是否存在指定的权限"},{name:"checkPermission",desc:"监测是否有指定的权限",modifier:"static",params:[{name:"allPermission",desc:"所有的权限",type:"Array<String>",defaultVal:"",required:""},{name:"currentPermissions",desc:"监测的权限",type:"Array<String>",defaultVal:"",required:""}],returnType:"boolean",returnDesc:"是否存在指定的权限"},{name:"PermissionFun",desc:"函数方式实现",modifier:"static",params:[{name:"allPermission",desc:"所有的权限",type:"Array<String>",defaultVal:"",required:""},{name:"permissions",desc:"监测的权限",type:"Array<String>",defaultVal:"",required:""},{name:"match",desc:"符合条件",type:"any",defaultVal:"",required:""},{name:"noMatch",desc:"不符合条件",type:"any",defaultVal:"",required:""}],returnType:"React.Element | null",returnDesc:""}]}]}))}},296032:function(e,n,t){t.d(n,{$0:function(){return l},ae:function(){return m},e0:function(){return c},sB:function(){return u}});var r=t(570517),i=t(153757),a=t(690171);const{PlayGroundPageContext:s,PlayGroundPage:o}=i.default,{Section:l,CodeBoxSection:c,PropsSection:u,FunctionPropsSection:m}=o;n.ZP=function(e){let{children:n,...t}=e;const[i,l]=(0,a.useState)(),c=(0,a.useRef)();return(0,a.useEffect)((()=>{l(c.current.parentElement.parentElement)}),[]),a.createElement(s.Provider,{value:{scrollEl:i}},a.createElement(o,(0,r.Z)({ref:c},t),n))}},401285:function(e,n,t){var r=t(477950);n.default=r.Z}}]);